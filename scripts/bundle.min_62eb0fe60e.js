!function i(a,s,l){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=s[t]={exports:{}};a[t][0].call(o.exports,function(e){return c(a[t][1][e]||e)},o,o.exports,i,a,s,l)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"create",value:function(e){return Object.freeze(e)}}]),e}();n.Enum=o},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EventSystem=n.StrictMode=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./Exception");var i=e("./Enum").Enum.create({None:0,Strict:1}),a=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:i.None;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.mode=e,this.handlers={}}return r(t,[{key:"addHandler",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if((this.strict===i.None||n)&&this.registEvent(e),!this.handlers[e])throw new o.Exception("The event is not registed.");return this.handlers[e].push(t),t}},{key:"removeHandler",value:function(e,t){var n=this.handlers[e];if(n&&0<n.length){var r=n.findIndex(function(e){return e===t});0<=r&&n.splice(r,1)}}},{key:"registEvent",value:function(e){this.handlers[e]||(this.handlers[e]=[])}},{key:"registSystemEventByDom0",value:function(e,t,n){var r=this;this.handlers[t]||(this.handlers[t]=[],n&&e&&(e[n]=function(e){r.raiseEvent(t,e)}))}},{key:"registSystemEventByDom2",value:function(e,t,n,r){var o=this;this.handlers[t]||(this.handlers[t]=[],n&&e&&e.addEventListener(n,function(e){o.raiseEvent(t,e)},r))}},{key:"raiseEvent",value:function(e,t){this.handlers[e]&&this.handlers[e].forEach(function(e){e(t)})}}]),t}();n.StrictMode=i,n.EventSystem=a},{"./Enum":1,"./Exception":3}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function e(t){r(this,e),this.message=t},i=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"The method is not implemented.";return r(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),t}();n.Exception=o,n.NotImplementedException=i},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=function(){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.width=e,this.height=t,this.grid=[];for(var n=0;n<e;n++){this.grid.push([]);for(var r=0;r<t;r++)this.grid[n][r]=void 0}}return r(o,[{key:"kill",value:function(e,t){delete this.grid[e][t]}},{key:"setCell",value:function(e,t,n){return this.grid[e][t]=n,this.grid[e][t]}},{key:"getCell",value:function(e,t){return this.grid[e][t]}},{key:"forEach",value:function(n){var r=0;this.grid.forEach(function(e){e&&e.forEach(function(e,t){n&&n(e,r,t)}),r+=1})}}]),o}();n.GeneralGrid=o},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.KeyInput=n.PointerInput=n.TouchInput=n.MouseInput=n.InputBase=n.Inputs=void 0;var r=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("../../Engine/Numerics/Vector2"),a=e("../Core/GeneralObject");function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(e){function n(e){s(this,n);var t=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.world=e,t.inputList=[],t.dispose.next(t.release),t}return c(n,a.GeneralObject),o(n,[{key:"launch",value:function(e){var t=this;this.ui=e,this.inputList.forEach(function(e){t.regist(e)})}},{key:"release",value:function(){this.inputList.forEach(function(e){e.release()}),this.ui=null}},{key:"regist",value:function(e){e.regist(this)}},{key:"addInput",value:function(e){this.inputList.push(e)}}]),n}(),f=function(){function e(){s(this,e)}return o(e,[{key:"regist",value:function(e){this.inputs=e,this.events=[]}},{key:"registEventFast",value:function(e,t,n,r){var o=this,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,a=function(e){n&&n(e),o.inputs.world.raiseSelfAndGameVisualsEvent(t,e),r&&r(e)};(i=i||this.inputs.ui).addEventListener(e,a),this.events.push({ui:i,name:e,listener:a})}},{key:"release",value:function(){this.events.forEach(function(e){e.ui.removeEventListener(e.name,e.listener)})}}]),e}(),h=function(e){function n(){return s(this,n),l(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return c(n,f),o(n,[{key:"regist",value:function(t){r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"regist",this).call(this,t),t.mouse||(t.mouse={isPressed:!1,position:new i.Vector2(0,0)}),this.registEventFast("click","onClick"),this.registEventFast("mouseenter","onMouseEnter"),this.registEventFast("mouseleave","onMouseLeave"),this.registEventFast("mousedown","onMouseDown",function(){t.mouse.isPressed=!0}),this.registEventFast("mouseup","onMouseUp",function(){t.mouse.isPressed=!1}),this.registEventFast("mousemove","onMouseMove",function(e){t.mouse.position=new i.Vector2(e.offsetX,e.offsetY)}),window.onmousewheel=document.onmousewheel=function(e){t.world.raiseSelfAndGameVisualsEvent("onMouseWheel",e)}}}]),n}(),p=function(e){function n(){return s(this,n),l(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return c(n,f),o(n,[{key:"regist",value:function(t){r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"regist",this).call(this,t),t.touch||(t.touch={isTouching:!1,position:new i.Vector2(0,0)}),this.registEventFast("touchStart","onTouchStart",function(){t.touch.isTouching=!0}),this.registEventFast("touchEnd","onTouchEnd",function(){t.touch.isTouching=!1}),this.registEventFast("touchmove","onTouchMove",function(e){e.preventDefault(),t.touch.position=new i.Vector2(e.changedTouches[0].clientX,e.changedTouches[0].clientY)})}}]),n}(),y=function(e){function n(){return s(this,n),l(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return c(n,f),o(n,[{key:"regist",value:function(t){r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"regist",this).call(this,t),t.pointer||(t.pointer={isPressed:!1,position:new i.Vector2(0,0)}),this.registEventFast("mousedown","onMouseDown",function(){t.pointer.isPressed=!0}),this.registEventFast("mouseup","onMouseUp",function(){t.pointer.isPressed=!1}),this.registEventFast("mousemove","onMouseMove",function(e){t.pointer.position=new i.Vector2(e.offsetX,e.offsetY)}),this.registEventFast("touchstart","onTouchStart",function(){event.preventDefault(),t.pointer.isPressed=!0}),this.registEventFast("touchend","onTouchEnd",function(){event.preventDefault(),t.pointer.isPressed=!1}),this.registEventFast("touchmove","onTouchMove",function(e){e.preventDefault(),t.pointer.isPressed=!0,t.pointer.position=new i.Vector2(e.changedTouches[0].clientX,e.changedTouches[0].clientY)}),this.registEventFast("mousedown","onPointerPressed"),this.registEventFast("mouseup","onPointerReleased"),this.registEventFast("mousemove","onPointerMove"),this.registEventFast("touchstart","onPointerPressed"),this.registEventFast("touchend","onPointerReleased"),this.registEventFast("touchmove","onPointerMove")}}]),n}(),d=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,f),o(t,[{key:"regist",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"regist",this).call(this,e),e.key||(e.key={isKeyDown:!1}),this.registEventFast("keydown","onKeyDown",function(){e.key.isKeyDown=!0},null,document),this.registEventFast("keyup","onKeyUp",function(){e.key.isKeyDown=!1},null,document),this.registEventFast("keypress","onKeyPress",null,null,document)}}]),t}();n.Inputs=u,n.InputBase=f,n.MouseInput=h,n.TouchInput=p,n.PointerInput=y,n.KeyInput=d},{"../../Engine/Numerics/Vector2":34,"../Core/GeneralObject":6}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GeneralObject=void 0;var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("./GeneralProcess");var r=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.start=new i.GeneralProcess(this),this.update=new i.GeneralProcess(this),this.dispose=new i.GeneralProcess(this),this.attachements=[]}return o(r,[{key:"proxy",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=new r;return n.start.setContext(this),n.update.setContext(this),t&&this.sync(n),e&&e(n,this),n}},{key:"attach",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.attachements.push(e),t&&this.sync(e)}},{key:"sync",value:function(t){var n=arguments;this.start.next(function(){var e;return(e=t.start).process.apply(e,n)}),this.update.next(function(){var e;return(e=t.update).process.apply(e,n)}),this.dispose.next(function(){var e;return(e=t.dispose).process.apply(e,n)})}}]),r}();n.GeneralObject=r},{"./GeneralProcess":7}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GeneralProcess=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./GeneralTask");var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.context=e,this.tasks=[]}return r(t,[{key:"setContext",value:function(e){this.context=e}},{key:"process",value:function(){var n=this,r=arguments;this.tasks.forEach(function(e){var t;e.enabled&&e.action&&(t=e.action).call.apply(t,[n.context].concat(Array.prototype.slice.call(r)))})}},{key:"before",value:function(e){return this.tasks.unshift(new o.GeneralTask(e)),this}},{key:"next",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1;if(e instanceof Array){var r=n;return e.forEach(function(e){t.next(e,r),r++}),this}return n<0&&(n=this.tasks.length),this.tasks.splice(n,0,new o.GeneralTask(e)),this}}]),t}();n.GeneralProcess=i},{"./GeneralTask":8}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.GeneralTask=function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.action=t,this.name=n,this.enabled=r}},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AnimationBox=void 0;var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("../../Core/GeneralObject"),a=e("./FrameManager");var r=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return n.canvas=e,n.context=e.getContext("2d"),n.world=t,n.world.initializeUI(e),n.frameManager=new a.FrameManager,n.start.next(function(){n.world.start.process()}),n.update.next(function(){n.world.view.render.process(n.context),n.world.update.process()}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.GeneralObject),o(r,[{key:"run",value:function(){var e=this;this.start.process(),this.frameManager.loopInvoke(function(){e.update.process()})}},{key:"stop",value:function(){var e=this;this.frameManager.stop(function(){e.context.clearRect(0,0,e.canvas.width,e.canvas.height)}),this.world.dispose.process()}}]),r}();n.AnimationBox=r},{"../../Core/GeneralObject":6,"./FrameManager":10}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isLoop=!1}return r(e,[{key:"loopInvoke",value:function(t){var n=this;this.isLoop=!0;!function e(){t(),n.isLoop?window.requestAnimationFrame(e):n.stopCallback&&n.stopCallback()}()}},{key:"stop",value:function(e){this.stopCallback=e,this.isLoop=!1}}]),e}();n.FrameManager=o},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GameView=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=e("../../../Engine/Numerics/Vector2"),o=e("../../Core/GeneralObject"),i=e("../../Core/GeneralProcess");var a=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.target=e,t.render=new i.GeneralProcess(t).next([t.setTransform,t.draw,t.restoreTransform]),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.GeneralObject),r(n,[{key:"setTransform",value:function(e){var t=this.target.transform.translation,n=this.target.transform.scale,r=this.target.transform.rotation,o=this.target.transform.center,i=t.add(o),a=new s.Vector2(i.x*(1-n.x),i.y*(1-n.y));e.translate(a.x,a.y),e.scale(n.x,n.y),e.translate(i.x,i.y),e.rotate(r),e.translate(-o.x,-o.y)}},{key:"restoreTransform",value:function(e){e.setTransform(1,0,0,1,0,0)}},{key:"draw",value:function(){}}]),n}();n.GameView=a},{"../../../Engine/Numerics/Vector2":34,"../../Core/GeneralObject":6,"../../Core/GeneralProcess":7}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GameVisual=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../Core/GeneralObject"),i=e("../../Numerics/Transform"),a=e("../../Common/EventSystem");var s=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.transform=new i.Transform,t.eventSystem=new a.EventSystem,t.bindView(e),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.GeneralObject),r(n,[{key:"bindView",value:function(e){(this.view=e)&&(e.target=this)}},{key:"on",value:function(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];this.eventSystem.addHandler(e,t,n)}},{key:"off",value:function(e,t){this.eventSystem.removeHandler(e,t)}}]),n}();n.GameVisual=s},{"../../Common/EventSystem":2,"../../Core/GeneralObject":6,"../../Numerics/Transform":33}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GameWorld=void 0;var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("../../Common/Inputs"),a=e("../GameObject/GameVisual");var r=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return n.width=e,n.height=t,n.gameVisuals=[],n.inputs=new i.Inputs(n),n.initialize(),n.createObjects(),n.start.next(n.startGameVisuals),n.update.next(n.updateGameVisuals),n.attach(n.inputs),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.GameVisual),o(r,[{key:"initialize",value:function(){}},{key:"initializeUI",value:function(e){this.ui=e,this.inputs.launch(this.ui)}},{key:"createObjects",value:function(){}},{key:"startGameVisuals",value:function(){this.gameVisuals.forEach(function(e){e.start.process()})}},{key:"updateGameVisuals",value:function(){this.gameVisuals.forEach(function(e){e.update.process()})}},{key:"addVisual",value:function(e){this.gameVisuals.push(e),e.world=this}},{key:"raiseSelfAndGameVisualsEvent",value:function(t,n){this.eventSystem.raiseEvent(t,n),this.gameVisuals.forEach(function(e){e.eventSystem.raiseEvent(t,n)})}}]),r}();n.GameWorld=r},{"../../Common/Inputs":5,"../GameObject/GameVisual":12}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GameWorldView=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../GameObject/GameView"),i=e("../../../Engine/UI/Color");var a=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.isClear=!1,t.clearColor=i.Colors.Black(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.GameView),r(n,[{key:"draw",value:function(t){this.isClear&&(t.fillStyle=this.clearColor.getRGBAValue(),t.fillRect(0,0,this.target.width,this.target.height)),this.target.gameVisuals.forEach(function(e){e.view&&e.view.render.process(t)})}}]),n}();n.GameWorldView=a},{"../../../Engine/UI/Color":35,"../GameObject/GameView":11}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Cell=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../../../Engine/Numerics/Vector2"),i=e("../../../../Engine/UI/Color");var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.location=new o.Vector2(0,0),this.color=i.Colors.Black(),this.size=1}return r(e,[{key:"setLocation",value:function(e){return this.location=e,this}},{key:"setColor",value:function(e){return this.color=e,this}},{key:"setSize",value:function(e){return this.size=e,this}}]),e}();n.Cell=a},{"../../../../Engine/Numerics/Vector2":34,"../../../../Engine/UI/Color":35}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CellularAutomata=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../../Common/GeneralGrid");var i=function(e){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));n.width=e,n.height=t,n.grid=[];for(var r=0;r<e;r++){n.grid.push([]);for(var o=0;o<t;o++)n.grid[r][o]=void 0}return n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,o.GeneralGrid),r(i,[{key:"generate",value:function(){return new i(this.width,this.height)}},{key:"getAround",value:function(e,t,n,r){for(var o=0,i=0;i<8;i++){var a=e+n[i],s=t+r[i];this.grid[a]&&this.grid[a][s]&&(o+=1)}return o}}]),i}();n.CellularAutomata=i},{"../../../Common/GeneralGrid":4}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GameOfLifeView=n.GameOfLife=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../CellularAutomata"),i=e("../../../../../Engine/Numerics/Vector2"),s=e("../../../../../Engine/UI/Color"),a=e("../Cell"),l=e("../../../GameObject/GameVisual"),c=e("../../../GameObject/GameView");function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function n(e){u(this,n);var t=f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.start.next(t._start),t.update.next(t._update),t.offsetX=[-1,0,1,1,1,0,-1,-1],t.offsetY=[-1,-1,-1,0,1,1,1,0],t}return h(n,l.GameVisual),r(n,[{key:"_start",value:function(){var a=this,t=this.world.width,n=this.world.height;this.cellSize=6;var e=Math.round(t/this.cellSize),r=Math.round(n/this.cellSize);this.CA=new o.CellularAutomata(e,r),this.CA.forEach(function(e,t,n){.9<Math.random()&&a.addDefaultCell(a.CA,t,n)}),this.fillColor=new s.Color(0,128,128,.5),this.view.render.next(function(e){e.fillStyle=a.fillColor.getRGBAValue(),e.fillRect(0,0,t,n)},0),this.cellColor=new s.Color(255,255,255,1),this.on("onPointerMove",function(){if(a.world.inputs.pointer.isPressed)for(var e=a.world.inputs.pointer.position,t=Math.round(e.x/a.cellSize),n=Math.round(e.y/a.cellSize),r=0;r<4;r++){var o=t+Math.round(2*Math.random()-1),i=n+Math.round(2*Math.random()-1);a.addDefaultCell(a.CA,o,i)}},!0),this.tick=0}},{key:"_update",value:function(){var i=this;if(.5<Math.random()&&(this.fillColor=s.ColorHelper.getGradientRandomColor(this.fillColor,10)),this.tick+=1,this.tick%6==0){var a=this.CA.generate();this.CA.forEach(function(e,t,n){var r=i.CA.getAround(t,n,i.offsetX,i.offsetY);if(e){if(2===r||3===r){var o=i.CA.getCell(t,n);a.setCell(t,n,o)}}else 3===r&&i.addDefaultCell(a,t,n)}),this.CA=a}}},{key:"addDefaultCell",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:s.Colors.White(),o=new i.Vector2(t*this.cellSize,n*this.cellSize);e.setCell(t,n,new a.Cell).setLocation(o).setColor(r).setSize(this.cellSize)}}]),n}(),y=function(e){function t(){return u(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,c.GameView),r(t,[{key:"draw",value:function(n){this.target.CA.forEach(function(e){if(e){var t=e.location;n.fillStyle=e.color.getRGBAValue(),n.fillRect(t.x,t.y,e.size,e.size)}})}}]),t}();n.GameOfLife=p,n.GameOfLifeView=y},{"../../../../../Engine/Numerics/Vector2":34,"../../../../../Engine/UI/Color":35,"../../../GameObject/GameView":11,"../../../GameObject/GameVisual":12,"../Cell":15,"../CellularAutomata":16}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LSystem=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./Rule/RuleSet"),i=e("./State/State");var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.states=[],this.ruleSets={},this.root={}}return r(e,[{key:"initRoot",value:function(e){this.root=e,this.states=[],this.states.push(e)}},{key:"addRule",value:function(e){this.ruleSets[e.target]||(this.ruleSets[e.target]=new o.RuleSet),this.ruleSets[e.target].add(e)}},{key:"generate",value:function(){for(var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=function(e){var t=[];n.states.forEach(function(e){n.ruleSets[e.id]?e.children=n.ruleSets[e.id].rules[0].generate(e):e.children=n._getDefaultState(e),n._combineArray(t,e.children)}),n.states=[],n._combineArray(n.states,t)},r=0;r<e;r++)t()}},{key:"_getDefaultState",value:function(e){var t=[];return t.push(new i.State(e.id,e,e.generation+1)),t}},{key:"_combineArray",value:function(t,e){e.forEach(function(e){t.push(e)})}}]),e}();n.LSystem=a},{"./Rule/RuleSet":21,"./State/State":22}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LSystemTreeView=n.LSystemTree=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./LSystem"),i=e("./State/State"),a=e("./Rule/RuleBase"),s=e("../../../../Engine/Numerics/Vector2"),l=e("../../../../Engine/UI/Color"),c=e("../../GameObject/GameVisual"),u=e("../../GameObject/GameView");function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function n(e){f(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.LSystem=new o.LSystem,t.LSystem.initRoot(new i.State("F",null,0));return t.LSystem.addRule(new a.RuleGrammar("F",0,"F[+F-F+F+FF]F[-F+F-F-FF]F")),t.depth=3,t.LSystem.generate(t.depth),t.start.next(t._start),t.update.next(t._update),t}return p(n,c.GameVisual),r(n,[{key:"states",get:function(){return this.LSystem.states}}]),r(n,[{key:"_start",value:function(){var t=this,n=this.world.width,r=this.world.height;this.fillColor=new l.Color(0,128,128,.4),this.view.render.next(function(e){e.fillStyle=t.fillColor.getRGBAValue(),e.fillRect(0,0,n,r)},0)}},{key:"_update",value:function(){.5<Math.random()&&(this.fillColor=l.ColorHelper.getGradientRandomColor(this.fillColor,10))}}]),n}(),d=function(e){function n(e){f(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.centerStack=[],t.offsetStack=[],t.lengthStack=[],t.currentIndex=0,t.rotateRatio=3,t.singleNumber=0,t}return p(n,u.GameView),r(n,[{key:"draw",value:function(e){this.centerStack=[],this.offsetStack=[],this.lengthStack=[],this.currentIndex=0,this.singleNumber=(this.singleNumber+.05)%(2*Math.PI),this.rotateRatio=6.2+.3*Math.sin(this.singleNumber),this.center=new s.Vector2(this.target.world.width/2,.9*this.target.world.height),this.lengthOfLine=this.target.world.height*(1/Math.pow(3,this.target.depth+1))*1,this.offset=new s.Vector2(0,-this.lengthOfLine),this.lineColor=new l.Color(255,255,255,1);for(var t=0,n=this.target.states,r=this.currentIndex;r<n.length;r++){switch(n[r].id){case"F":this.drawLineBranch(e,this.center,this.offset),this.center=this.center.add(this.offset);break;case"M":this.center=this.center.add(this.offset);break;case"+":this.offset=this.offset.rotate(Math.PI/this.rotateRatio);break;case"-":this.offset=this.offset.rotate(-Math.PI/this.rotateRatio);break;case".":this.lengthOfLine*=.618,this.offset.setLength(this.lengthOfLine);break;case"*":this.lengthOfLine/=.618,this.offset.setLength(this.lengthOfLine);break;case"[":this.centerStack.push(this.center.clone()),this.offsetStack.push(this.offset.clone()),this.lengthStack.push(this.lengthOfLine);break;case"]":this.center=this.centerStack.pop(),this.offset=this.offsetStack.pop(),this.lengthOfLine=this.lengthStack.pop()}if(this.currentIndex=r+1,1e4<(t+=1))break}}},{key:"drawLineBranch",value:function(e,t,n){var r=t.add(n);e.strokeStyle=this.lineColor.getRGBAValue(),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(r.x,r.y),e.closePath(),e.stroke()}}]),n}();n.LSystemTree=y,n.LSystemTreeView=d},{"../../../../Engine/Numerics/Vector2":34,"../../../../Engine/UI/Color":35,"../../GameObject/GameView":11,"../../GameObject/GameVisual":12,"./LSystem":18,"./Rule/RuleBase":20,"./State/State":22}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RuleGrammar=n.RuleBase=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("../State/State");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function e(t,n){a(this,e),this.target=t,this.priority=n},o=function(e){function o(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";a(this,o);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t));return r.states=n.split(""),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,s),r(o,[{key:"generate",value:function(t){var n=[];return this.states.forEach(function(e){n.push(new i.State(e,t,t.generation+1))}),n}}]),o}();n.RuleBase=s,n.RuleGrammar=o},{"../State/State":22}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rules=[]}return r(e,[{key:"add",value:function(e){this.rules.push(e),this.rules.sort(function(e,t){return e.priority-t.priority})}}]),e}();n.RuleSet=o},{}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.State=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.parent=n,this.children=[],this.generation=r}},{}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ParticlesFlyerView=n.ParticlesFlyer=void 0;var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=e("../../../../../Engine/UI/Color"),f=e("../../../../../Engine/Numerics/Vector2"),r=e("../../../../../Engine/Numerics/Random"),i=e("../ParticleSystem"),h=e("../Particle/FlyerParticle"),a=e("../../../GameObject/GameView");function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function n(e){s(this,n);var t=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.random=new r.Random,t.fillColor=new u.Color(0,0,0,.005),t.view.render.next(function(e){e.fillStyle=t.fillColor.getRGBAValue(),e.fillRect(0,0,t.world.width,t.world.height)},0),t.offsetX=[0,-1,0,1,1,1,0,-1,-1],t.offsetY=[0,-1,-1,-1,0,1,1,1,0],t.start.next(t._start),t.update.next(t._update),t}return c(n,i.ParticlesBase),o(n,[{key:"_start",value:function(){var e=this.world.width,t=this.world.height,n=new f.Vector2(.5*e,.5*t);this.flyers=[];for(var r=new f.Vector2(e,t).length(),o=parseInt(r/5),i=parseInt(r/60),a=.8*e,s=.8*t,l=0;l<o;l++){var c=new h.FlyerParticle;c.location=n.add(new f.Vector2(a*Math.random()-a/2,s*Math.random()-s/2)),c.velocity=new f.Vector2(10*Math.random()-5,10*Math.random()-5),c.size=2+i*Math.random(),c.color=u.Colors.White(),this.flyers.push(c)}this.particles=this.flyers,this.revolution=20,this.grid=this.createGrid(e,t,this.revolution),0===this.world.inputs.pointer.position.length()&&(this.world.inputs.pointer.position=new f.Vector2(e/2,t/2))}},{key:"_update",value:function(){var n=this,r={width:this.world.width,height:this.world.height};this.clearGrid(this.grid),this.allocateGrid(this.grid,this.particles,this.revolution),this.grid.forEach(function(e){e.forEach(function(e){if(0<e.length){var t=n.getGridNeighbours(n.grid,e[0],n.revolution);e.forEach(function(e){e.update(t,r,n.world.inputs.pointer.position)})}})}),.5<Math.random()&&(this.fillColor=u.ColorHelper.getGradientRandomColor(this.fillColor,40))}},{key:"createGrid",value:function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,r=Math.ceil(e/n),o=Math.ceil(t/n),i=[],a=0;a<r;a++){i[a]=[];for(var s=0;s<o;s++)i[a][s]=[]}return i}},{key:"clearGrid",value:function(e){e.forEach(function(e){e.forEach(function(e){e.splice(0,e.length)})})}},{key:"allocateGrid",value:function(o,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10;e.forEach(function(e){var t=e.location.divide(i),n=Math.floor(t.x),r=Math.floor(t.y);o[n][r].push(e)})}},{key:"getGridNeighbours",value:function(e,t,n){for(var r=[],o=e.length,i=e[0].length,a=t.location.divide(n),s=Math.floor(a.x),l=Math.floor(a.y),c=0;c<9;c++){var u=s+this.offsetX[c],f=l+this.offsetY[c];0<=u&&u<o&&0<=f&&f<i&&r.push.apply(r,p(e[u][f]))}return r}}]),n}(),d=function(e){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;s(this,r);var n=l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return n.scale=t,n.image=new Image(16,16),n.image.src="/static/sample.png",n.rotation=0,n.rotation2=0,n}return c(r,a.GameView),o(r,[{key:"draw",value:function(e){if(!this.target.stopDraw){this.rotation2=this.rotation2+.002,this.scaleCanvas(e,16*Math.sin(this.rotation2));for(var t=0;t<this.target.particles.length;t++){var n=this.target.particles[t],r=n.location;e.beginPath(),e.arc(r.x,r.y,n.size/2*this.scale,0,2*Math.PI,!1),e.fillStyle=n.color.getRGBAValue(),e.fill()}}}},{key:"scaleCanvas",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.rotation=this.rotation+5e-4;var n=this.target.world.width+t,r=this.target.world.height+t;e.translate(this.target.world.width/2,this.target.world.height/2),e.globalAlpha=.99,e.drawImage(document.getElementById("canvas"),-n/2,-r/2,n,r),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0)}}]),r}();n.ParticlesFlyer=y,n.ParticlesFlyerView=d},{"../../../../../Engine/Numerics/Random":32,"../../../../../Engine/Numerics/Vector2":34,"../../../../../Engine/UI/Color":35,"../../../GameObject/GameView":11,"../Particle/FlyerParticle":26,"../ParticleSystem":29}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Particle=void 0;var o=e("../../../../Engine/UI/Color");n.Particle=function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.location=t,this.size=n,this.age=r,this.color=new o.Color(0,0,0,1),this.isDead=!1}},{"../../../../Engine/UI/Color":35}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DynamicParticle=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("../Particle"),a=e("../../../../../Engine/Numerics/Vector2");var o=function(e){function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t,n));return r.velocity=new a.Vector2(0,0),r.acceleration=new a.Vector2(0,0),r.mass=10,r.velocityUpon=Number.POSITIVE_INFINITY,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,i.Particle),r(o,[{key:"applyForce",value:function(e){this.acceleration=this.acceleration.add(e.divide(this.mass))}},{key:"move",value:function(){this.velocity=this.velocity.add(this.acceleration),this.velocity.limitLength(this.velocityUpon),this.location=this.location.add(this.velocity),this.acceleration=new a.Vector2(0,0)}},{key:"moveTo",value:function(e){this.location=e,this.velocity.setLength(0)}}]),o}();n.DynamicParticle=o},{"../../../../../Engine/Numerics/Vector2":34,"../Particle":24}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FlyerParticle=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("./DynamicParticle"),s=e("../../../../../Engine/Numerics/Vector2");var o=function(e){function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t,n));return r.velocityUpon=3,r.neighbourDistance=200,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,i.DynamicParticle),r(o,[{key:"update",value:function(e,t,n){this.alignspeed(e),this.seperate(e),this.cohesion(e),this.follow(n,.5),this.checkRadius(n,new s.Vector2(t.width,t.height).length()/3),this.move(),this.checkBorder(t)}},{key:"alignspeed",value:function(e){var t=this,n=new s.Vector2,r=0;if(e.forEach(function(e){t.location.subtract(e.location).length()<t.neighbourDistance&&(n=n.add(e.velocity),r++)}),0<r){(n=n.divide(r)).limitLength(this.velocityUpon);var o=n.subtract(this.velocity);o.limitLength(1),this.applyForce(o)}}},{key:"seperate",value:function(e){var o=this,i=new s.Vector2,a=0;if(e.forEach(function(e){var t=o.location.subtract(e.location),n=t.length(),r=(o.size+e.size)/2+5;0<n&&n<r&&(t.normalize(),t.divide(n),i=i.add(t),a++)}),0<a){(i=i.divide(a)).normalize(),i.multiply(this.velocityUpon);var t=i.subtract(this.velocity);t.limitLength(10),this.applyForce(t)}}},{key:"cohesion",value:function(e){var t=this,n=new s.Vector2,r=0;if(e.forEach(function(e){t.location.subtract(e.location).length()<t.neighbourDistance&&(n=n.add(e.location),r++)}),0<r){n=n.divide(r);var o=this.seek(n);o.limitLength(.1),this.applyForce(o)}}},{key:"follow",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.applyForce(this.seek(e).multiply(t))}},{key:"findNeighbour",value:function(e){var r=this,o=Number.POSITIVE_INFINITY,i=-1;e.forEach(function(e,t){var n=r.location.subtract(e.location).length();0<n&&n<100&&n<o&&(o=n,i=t)}),this.neighbour=0<i?e[i]:null}},{key:"checkRadius",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,n=this.location.subtract(e).length(),r=Math.max(.1,Math.min(1,1-n/t));this.color.r=this.color.g=this.color.b=75*r+180}},{key:"checkBorder",value:function(e){var t=this.location,n=e.width,r=e.height,o=this.size/2+10,i=this.size/2+10;t.x<o?(t.x=o,this.velocity.x*=-1):t.x>n-o&&(t.x=n-o,this.velocity.x*=-1),t.y<i?(t.y=i,this.velocity.y*=-1):t.y>r-i&&(t.y=r-i,this.velocity.y*=-1)}},{key:"seek",value:function(e){return this._seek(this.location,e,this.velocity)}},{key:"_seek",value:function(e,t,n){var r=t.subtract(e);r.normalize(),r.multiply(this.velocityUpon);var o=r.subtract(n);return o.limitLength(1),o}}]),o}();n.FlyerParticle=o},{"../../../../../Engine/Numerics/Vector2":34,"./DynamicParticle":25}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SpotParticle=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./DynamicParticle"),a=e("../../../../../Engine/Numerics/Random"),s=e("../../../../../Engine/Numerics/Vector2"),l=e("../../../../../Engine/UI/Color");var i=function(e){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t,n));return r.angleOffset=.03*Math.random()-.015,r.velocityUpon=16,r.random=new a.Random,r.sizeMinimum=1,r.sizeRadius=.995,r.rotateRadius=.01,r.rotateRadiusRandom=.001,r.divideRadius=.03,r.divideSizeRadius=.8,r.divideSizeRadiusEx=.92,r.divideColorIncrementRatio=4,r.getGradientColorIncrement=1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,o.DynamicParticle),r(i,[{key:"update",value:function(e,t){0<this.age&&(this.age-=1,this.size=this.size*this.sizeRadius,this.velocity=this.velocity.rotate(this.angleOffset*this.rotateRadius),this.velocity=this.velocity.rotate(this.random.nextNorm(-100,100)*this.rotateRadiusRandom),this.color=l.ColorHelper.getGradientColor(this.color,this.getGradientColorIncrement),this.velocityUpon=.38*this.size,this.move(),this.color.a-=.002,this.color.a=Math.max(0,this.color.a)),this.size>this.sizeMinimum?Math.random()<this.divideRadius&&this.divide(e,t):(this.velocity=new s.Vector2(0,0),this.isDead=!0)}},{key:"divide",value:function(e,t){t<2&&(t=2);var n=this.size*this.divideSizeRadius;if(this.size=n,this.age=this.random.nextNorm(0,30),this.angleOffset=.02*Math.random()-.01,1<t)for(var r=2;r<=t;r++){n*=this.divideSizeRadiusEx;var o=new i(this.location,n);o.velocity=this.velocity.rotate(.011*this.random.next(-100,100)).multiply(.618),o.age=this.random.nextNorm(0,40),o.color=l.ColorHelper.getGradientRandomColor(this.color,this.velocity.length()*this.divideColorIncrementRatio),e.push(o)}}}]),i}();n.SpotParticle=i},{"../../../../../Engine/Numerics/Random":32,"../../../../../Engine/Numerics/Vector2":34,"../../../../../Engine/UI/Color":35,"./DynamicParticle":25}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.WalkerParticle=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./DynamicParticle"),i=e("../../../../../Engine/Numerics/Random");var a=function(e){function s(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t,n));return r.random=new i.Random,r.maxSize=1,r.maxAge=300,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,o.DynamicParticle),r(s,[{key:"update",value:function(e,t){this.age<this.maxAge&&(this.age+=1,this.size=this.maxSize*this.age/this.maxAge,this.mass=this.size*this.size*this.size,this.velocityUpon=this.size/2);var n=t.subtract(this.location),r=n.length();if(r<this.size/2)this.age=0,this.size=1,this.mass=1,this.location=this.origin.clone();else{var o=n.normalize(),i=s.StaticGravityRatio||0,a=o.multiply(this.mass/(r*r)*i);this.applyForce(a)}this.move()}}]),s}();n.WalkerParticle=a},{"../../../../../Engine/Numerics/Random":32,"./DynamicParticle":25}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ParticlesLineView=n.ParticlesCircleView=n.ParticlesBase=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../GameObject/GameVisual"),i=e("../../GameObject/GameView");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){function n(e){a(this,n);var t=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.count=100,t.particles=[],t}return l(n,o.GameVisual),r(n,[{key:"killDead",value:function(){var e=this.particles.length;if(0<e)for(var t=e-1;0<=t;t--){this.particles[t].isDead&&this.particles.splice(t,1)}}}]),n}(),u=function(e){function o(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;a(this,o);var r=s(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return r.isFill=t,r.scale=n,r}return l(o,i.GameView),r(o,[{key:"draw",value:function(e){this.target.stopDraw||(this.isFill?this.drawByFillCircle(e):this.drawByStrokeCircle(e))}},{key:"drawByFillCircle",value:function(e){for(var t=0;t<this.target.particles.length;t++){var n=this.target.particles[t],r=n.location;e.beginPath(),e.arc(r.x,r.y,n.size/2*this.scale,0,2*Math.PI,!1),e.fillStyle=n.color.getRGBAValue(),e.fill()}}},{key:"drawByStrokeCircle",value:function(e){for(var t=0;t<this.target.particles.length;t++){var n=this.target.particles[t],r=n.location;e.beginPath(),e.arc(r.x,r.y,n.size/2*this.scale,0,2*Math.PI,!1),e.strokeStyle=n.color.getRGBAValue(),e.closePath(),e.stroke()}}}]),o}(),f=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,i.GameView),r(t,[{key:"draw",value:function(e){if(!this.target.stopDraw)for(var t=1;t<this.target.particles.length;t++){var n=this.target.particles[t],r=n.location,o=this.target.particles[t-1].location||n.lastLocation;o&&(e.beginPath(),e.moveTo(r.x,r.y),e.lineTo(o.x,o.y),e.lineWidth=n.size,e.strokeStyle=n.color.getRGBAValue(),e.closePath(),e.stroke(),e.beginPath(),e.arc(r.x,r.y,n.size/2,0,2*Math.PI,!1),e.fillStyle=n.color.getRGBAValue(),e.fill())}}}]),t}();n.ParticlesBase=c,n.ParticlesCircleView=u,n.ParticlesLineView=f},{"../../GameObject/GameView":11,"../../GameObject/GameVisual":12}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ParticlesTree=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../../../../Engine/UI/Color"),i=e("../../../../../Engine/Numerics/Vector2"),a=e("../../../../../Engine/Numerics/Random"),s=e("../ParticleSystem"),l=e("../Particle/SpotParticle");var c=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.spots=[],t.random=new a.Random,t.start.next(t._start),t.update.next(t._update),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.ParticlesBase),r(n,[{key:"_start",value:function(){var e=Math.min(this.world.width,this.world.height),t=e/2500*Math.log10(e),n=new i.Vector2(this.world.width/2,1.45*this.world.height),r=new l.SpotParticle(n);r.velocity=new i.Vector2(0,-16*t),r.size=256*t,r.age=30,r.color=new o.Color(10,10,10),this.spots.push(r),this.particles=this.spots}},{key:"_update",value:function(){if(!this.stopDraw)if(6e4<this.spots.length)this.stopDraw=!0;else if(0<this.spots.length){for(var e=0;e<this.spots.length;e++){this.particles[e].update(this.spots,parseInt(this.random.nextNorm(1,3)))}this.killDead(this.spots)}}}]),n}();n.ParticlesTree=c},{"../../../../../Engine/Numerics/Random":32,"../../../../../Engine/Numerics/Vector2":34,"../../../../../Engine/UI/Color":35,"../Particle/SpotParticle":27,"../ParticleSystem":29}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ParticlesWalkerView=n.ParticlesWalker=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=e("../../../../../Engine/UI/Color"),i=e("../../../../../Engine/Numerics/Vector2"),o=e("../../../../../Engine/Numerics/Random"),a=e("../ParticleSystem"),c=e("../Particle/WalkerParticle"),s=e("../../../GameObject/GameView");function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function n(e){u(this,n);var t=f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.random=new o.Random,t.start.next(t._start),t.update.next(t._update),t}return h(n,a.ParticlesBase),r(n,[{key:"_start",value:function(){var t=this,n=this.world.width,r=this.world.height;this.walkers=[],this.split=1;var e=new i.Vector2(n/2,.8*r);this.center=e,c.WalkerParticle.StaticGravityRatio=5e3;var o=new c.WalkerParticle(e);o.origin=o.location.clone(),o.maxSize=10,o.color=new l.Color(255,255,255,.1),o.direction=new i.Vector2(0,-this.world.width/10),this.walkers.push(o),this.maxDepth=6+parseInt(n/600),this.createNodes(this.walkers,o,this.maxDepth,this.split,1),this.fillColor=new l.Color(0,128,128,800<n?.003:.005),this.view.render.next(function(e){e.fillStyle=t.fillColor.getRGBAValue(),e.fillRect(0,0,n,r)},0),this.rotationDelta=2*Math.PI/Math.floor(8*Math.random()+2),this.particles=this.walkers}},{key:"_update",value:function(){var n=this,r={width:this.world.width,height:this.world.height};this.transform.center=new i.Vector2(r.width/2,r.height/2),this.transform.rotation=this.transform.rotation+this.rotationDelta,this.walkers.forEach(function(e,t){e.update(r,0===t?n.center:e.parent.location)}),.5<Math.random()&&(this.fillColor=l.ColorHelper.getGradientRandomColor(this.fillColor,40)),.5<Math.random()&&(this.split+=1.6*Math.random()-.8,this.split=Math.max(1,Math.min(16,this.split))),this.modifyNodes(this.walkers[0],this.split,1*this.split/10)}},{key:"createNodes",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1;if(0<n){var i=[-1,1,0];t.children=[];for(var a=0;a<2;a++){var s=new c.WalkerParticle;s.direction=t.direction.rotate(Math.PI/r*i[a]),s.location=t.location.add(s.direction.multiply(o)),s.origin=s.location.clone(),s.parent=t,s.maxSize=.8*t.maxSize,s.color=new l.Color(255,255,255,1/this.maxDepth-.05*n),t.children.push(s),this.walkers.push(s),this.createNodes(e,s,n-1,r,o)}}}},{key:"modifyNodes",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(e.children&&0<e.children.length)for(var r=[-1,1,0],o=0;o<2;o++){var i=e.children[o];i.direction=e.direction.rotate(Math.PI/t*r[o]),i.origin=e.origin.add(i.direction.multiply(n)),this.modifyNodes(i,t,n)}}}]),n}(),y=function(e){function t(){return u(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,s.GameView),r(t,[{key:"draw",value:function(e){if(!this.target.stopDraw)for(var t=0;t<this.target.particles.length;t++){var n=this.target.particles[t],r=n.location;n.parent&&(e.beginPath(),e.moveTo(r.x,r.y),e.lineTo(n.parent.location.x,n.parent.location.y),e.lineWidth=n.size,e.strokeStyle=n.color.getRGBAValue(),e.closePath(),e.stroke())}}}]),t}();n.ParticlesWalker=p,n.ParticlesWalkerView=y},{"../../../../../Engine/Numerics/Random":32,"../../../../../Engine/Numerics/Vector2":34,"../../../../../Engine/UI/Color":35,"../../../GameObject/GameView":11,"../Particle/WalkerParticle":28,"../ParticleSystem":29}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"next",value:function(e,t){return parseInt(e+Math.floor(Math.random()*(t-e)))}},{key:"nextNorm",value:function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3,r=0,o=0;o<n;o++)r+=this.next(e,t+1);return r/n}}]),e}();n.Random=o},{}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Transform=void 0;var r=e("../../Engine/Numerics/Vector2");n.Transform=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.translation=new r.Vector2(0,0),this.scale=new r.Vector2(1,1),this.rotation=0,this.center=new r.Vector2(0,0)}},{"../../Engine/Numerics/Vector2":34}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var r=function(){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.x=e,this.y=t}return o(r,[{key:"clone",value:function(){return new r(this.x,this.y)}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"sqrLength",value:function(){return this.x*this.x+this.y*this.y}},{key:"normalize",value:function(){var e=1/this.length();return new r(this.x*e,this.y*e)}},{key:"negate",value:function(){return new r(-this.x,-this.y)}},{key:"add",value:function(e){return new r(this.x+e.x,this.y+e.y)}},{key:"subtract",value:function(e){return new r(this.x-e.x,this.y-e.y)}},{key:"multiply",value:function(e){return new r(this.x*e,this.y*e)}},{key:"divide",value:function(e){var t=1/e;return new r(this.x*t,this.y*t)}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"rotate",value:function(e){var t=Math.sin(e),n=Math.cos(e);return new r(this.x*n-this.y*t,this.y*n+this.x*t)}},{key:"setLength",value:function(e){var t=this.length();0<t&&(this.x=this.x*e/t,this.y=this.y*e/t)}},{key:"limitLength",value:function(e){e<this.length()&&this.setLength(e)}},{key:"cos",value:function(e){return this.dot(e)/(this.length()*e.length())}}]),r}();n.Vector2=r},{}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:255,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:255,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;i(this,o),this.r=e,this.g=t,this.b=n,this.a=r}return r(o,null,[{key:"FromHex",value:function(e){var t=parseInt(e.slice(1),16);return new o(t/65536,t/256%256,t%256)}}]),r(o,[{key:"clone",value:function(){return new o(this.r,this.g,this.b,this.a)}},{key:"getHexValue",value:function(){var e=parseInt(this.r),t=parseInt(this.g),n=parseInt(this.b),r=t<16?"0":"",o=n<16?"0":"";return"#"+(e<16?"0":"")+e.toString(16)+r+t.toString(16)+o+n.toString(16)}},{key:"getRGBAValue",value:function(){return"rgba("+parseInt(this.r)+","+parseInt(this.g)+","+parseInt(this.b)+","+this.a+")"}}]),o}(),o=function(){function e(){i(this,e)}return r(e,null,[{key:"getGradientColor",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=e.r;n+=t,n=Math.min(255,Math.max(0,n));var r=e.g;r+=t,r=Math.min(255,Math.max(0,r));var o=e.b;return o+=t,o=Math.min(255,Math.max(0,o)),new a(n,r,o,e.a)}},{key:"getGradientRandomColor",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=t/2,r=e.r;r+=Math.random()*t-n,r=Math.min(255,Math.max(0,r));var o=e.g;o+=Math.random()*t-n,o=Math.min(255,Math.max(0,o));var i=e.b;return i+=Math.random()*t-n,i=Math.min(255,Math.max(0,i)),new a(r,o,i,e.a)}}]),e}(),s=function(){function e(){i(this,e)}return r(e,null,[{key:"Black",value:function(){return new a(0,0,0,1)}},{key:"White",value:function(){return new a(255,255,255,1)}}]),e}();n.Color=a,n.ColorHelper=o,n.Colors=s},{}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EventHelper=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../Engine/Numerics/Vector2");var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"getEventClientPositon",value:function(e){return e instanceof MouseEvent?new o.Vector2(e.clientX,e.clientY):e instanceof TouchEvent?new o.Vector2(e.changedTouches[0].clientX,e.changedTouches[0].clientY):null}}]),e}();n.EventHelper=i},{"../../Engine/Numerics/Vector2":34}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EndlessAbyssView=n.EndlessAbyss=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../Engine/Game/GameObject/GameVisual"),i=e("../../Engine/Numerics/Vector2"),c=e("../../Engine/UI/Color"),a=e("../../Engine/Utilities/EventHelper"),s=e("../../Engine/Game/GameObject/GameView"),l=e("./Models/BlockGrid");function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function n(e){u(this,n);var t=f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.start.next(t._start),t.update.next(t._update),t.blockGrid=new l.BlockGrid(10,20),t.rotation=0,t}return h(n,o.GameVisual),r(n,[{key:"_start",value:function(){var t=this,n=this.world.width,r=this.world.height;this.center=new i.Vector2(n/2,r/2),this.fillColor=new c.Color(0,0,0,1),this.view.render.next(function(e){e.fillStyle=t.fillColor.getRGBAValue(),e.fillRect(0,0,n,r)},0),this._registEvents(),this.updateCount=0}},{key:"_update",value:function(){this.updateCount+=1,30<this.updateCount&&(this.updateCount=0,this.blockGrid.down())}},{key:"_registEvents",value:function(){var i=this;this.on("onKeyPress",function(e){"a"===e.key?i.blockGrid.left():"d"===e.key?i.blockGrid.right():"w"===e.key?i.blockGrid.up():"s"===e.key&&i.blockGrid.down()}),this.on("onPointerPressed",function(e){i.isPressed=!0,i.startPointer=a.EventHelper.getEventClientPositon(e),i.startRotation=i.rotation,i.moveCount=0}),this.on("onPointerReleased",function(){i.isPressed=!1}),this.on("onPointerMove",function(e){if(i.isPressed){var t=a.EventHelper.getEventClientPositon(e),n=t.subtract(i.startPointer),r=i.startPointer.subtract(i.center).rotate(Math.PI/2).normalize(),o=n.dot(r)/100;i.rotation=i.startRotation+o,i.end=t,i.moveCount+=1,8<i.moveCount&&(i.startPointer=a.EventHelper.getEventClientPositon(e),i.startRotation=i.rotation,i.moveCount=0)}})}}]),n}(),y=function(e){function t(){return u(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,s.GameView),r(t,[{key:"draw",value:function(r){var o=this,i=this.target.world.width,a=this.target.world.height,s=this.target.blockGrid.width,e=this.target.blockGrid.height,l=(.8*Math.min(i,a)-100)/e/2;this.fillColor=new c.Color(255,255,255),this.strokeColor=new c.Color(255,255,255,.05);for(var t=0;t<e;t++)for(var n=0;n<s;n++)this.drawArc(r,i/2,a/2,50+t*(l+0),l,n,s,this.strokeColor);this.target.blockGrid.forEach(function(e,t,n){e&&o.drawArc(r,i/2,a/2,50+n*(l+0),l,t,s,e.color,!1)}),this.target.blockGrid.current.getBlocks().forEach(function(e){if(e){var t=e.location.x,n=e.location.y;o.drawArc(r,i/2,a/2,50+n*(l+0),l,t,s,o.fillColor,!1)}}),this.target.blockGrid.next.getBlocks().forEach(function(e){if(e){var t=e.location.x,n=e.location.y+4;o.drawArc(r,i/2,a/2,50+n*(l+0),l,t,s,o.fillColor,!1)}})}},{key:"drawArc",value:function(e,t,n,r,o){var i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:10,s=arguments[7],l=!(8<arguments.length&&void 0!==arguments[8])||arguments[8],c=Math.PI/a,u=i*c*2-c+0+this.target.rotation,f=i*c*2+c-0+this.target.rotation;e.beginPath(),e.arc(t,n,r,u,f,!1),e.arc(t,n,r+o,f,u,!0),e.closePath(),l||(e.fillStyle=s.getRGBAValue(),e.fill()),e.strokeStyle=s.getRGBAValue(),e.stroke()}}]),t}();n.EndlessAbyss=p,n.EndlessAbyssView=y},{"../../Engine/Game/GameObject/GameView":11,"../../Engine/Game/GameObject/GameVisual":12,"../../Engine/Numerics/Vector2":34,"../../Engine/UI/Color":35,"../../Engine/Utilities/EventHelper":36,"./Models/BlockGrid":39}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Block=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../../../Engine/Numerics/Vector2"),i=e("../../../../Engine/UI/Color");var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.location=new o.Vector2(0,0),this.color=i.Colors.White()}return r(e,[{key:"setLocation",value:function(e){return this.location=e,this}},{key:"setColor",value:function(e){return this.color=e,this}}]),e}();n.Block=a},{"../../../../Engine/Numerics/Vector2":34,"../../../../Engine/UI/Color":35}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BlockGrid=void 0;var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("../../../Engine/Common/GeneralGrid"),s=e("../../../Engine/Numerics/Vector2"),a=e("../../../Engine/UI/Color"),l=e("./BlockGroup");var r=function(e){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));n.current=null,n.next=null,n.upOffset=new s.Vector2(0,0),n.downOffset=new s.Vector2(0,-1),n.leftOffset=new s.Vector2(-1,0),n.rightOffset=new s.Vector2(1,0),n.indexOffset=1;return n.colors=["#EE1111","#11EE11","#1111EE","#EEEE11","#11EEEE","#EE11EE"].map(function(e){return a.Color.FromHex(e)}),n.blockGroups=l.BlockGroupHelper.getStandardGroups(),n.generateNext(),n.generateCurrent(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.GeneralGrid),o(r,[{key:"setCurrent",value:function(e){this.current=e}},{key:"generateNext",value:function(){var e=Math.floor(Math.random()*this.blockGroups.length),t=new s.Vector2(Math.floor(this.width*Math.random()),this.height-1),n=Math.floor(4*Math.random());this.next=this.blockGroups[e].clone().setLocation(t).rotate(n)}},{key:"generateCurrent",value:function(){this.current=this.next,this.generateNext()}},{key:"up",value:function(){this._checkMoveAvaliable(this.current,this.upOffset,this.indexOffset)&&this.current.move(this.upOffset).rotate(this.indexOffset)}},{key:"down",value:function(){this._checkMoveAvaliable(this.current,this.downOffset)?this.current.move(this.downOffset):this.current.location.y===this.height-1?this.over():(this.combineBlock(this.current),this.generateCurrent())}},{key:"left",value:function(){this._checkMoveAvaliable(this.current,this.leftOffset)&&this.current.move(this.leftOffset)}},{key:"right",value:function(){this._checkMoveAvaliable(this.current,this.rightOffset)&&this.current.move(this.rightOffset)}},{key:"over",value:function(){this.overFlag||alert("Game Over"),this.overFlag=!0}},{key:"_checkMoveAvaliable",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:s.Vector2.Zero(),n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],o=this.current.getLocations(n),i=0;i<o.length;i++){var a=o[i].add(t);if(r&&(a.x=a.x%this.width,a.x<0&&(a.x+=this.width)),a.y<0||this.getCell(a.x,a.y))return!1}return!0}},{key:"combineBlock",value:function(e){var t=this,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=this.colors[Math.floor(this.colors.length*Math.random())];e.getBlocks().forEach(function(e){e&&(n&&(e.location.x=e.location.x%t.width,e.location.x<0&&(e.location.x+=t.width)),t.setCell(e.location.x,e.location.y,e.setColor(r)))}),this.combineFullRow()}},{key:"combineFullRow",value:function(){for(var e=this._findMaxRow(),t=!1,n=0;n<e;n++)this._checkFullRow(n)&&(this._clearSingleRow(n),t=!0);t&&this._updateBlockLocation()}},{key:"_findMaxRow",value:function(){for(var e=-1,t=0;t<this.height;t++)for(var n=0;n<this.width;n++)if(this.getCell(n,t)){e=t;break}return e}},{key:"_clearSingleRow",value:function(e){for(var t=0;t<this.width;t++)this.grid[t].splice(e,1),this.grid[t].push(null)}},{key:"_checkFullRow",value:function(e){for(var t=0;t<this.width;t++)if(!this.getCell(t,e))return!1;return!0}},{key:"_updateBlockLocation",value:function(){this.forEach(function(e,t,n){e&&e.setLocation(new s.Vector2(t,n))})}}]),r}();n.BlockGrid=r},{"../../../Engine/Common/GeneralGrid":4,"../../../Engine/Numerics/Vector2":34,"../../../Engine/UI/Color":35,"./BlockGroup":40}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BlockGroupHelper=n.BlockGroup=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./OffsetMap/OffsetMap"),i=e("./Block/Block"),a=e("../../../Engine/Numerics/Vector2");function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(){s(this,t),this.location=new a.Vector2(0,0),this.offsetMaps=[],this.current=0}return r(t,[{key:"clone",value:function(){var e=new t;return e.location=this.location.clone(),e.offsetMaps=this.offsetMaps,e.current=this.current,e}},{key:"setLocation",value:function(e){return this.location=e,this}},{key:"addOffsetMap",value:function(e){return this.offsetMaps.push(e),this}},{key:"addOffsetMapRange",value:function(e){var t=this;return e.forEach(function(e){t.offsetMaps.push(e)}),this}},{key:"getLocations",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=(this.current+e)%this.offsetMaps.length;return this.offsetMaps[t].getLocations(this.location)}},{key:"getBlocks",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=[];return this.getLocations(e).forEach(function(e){t.push((new i.Block).setLocation(e))}),t}},{key:"move",value:function(e){return this.location=this.location.add(e),this}},{key:"rotate",value:function(){return this.current=(this.current+1)%this.offsetMaps.length,this}}]),t}(),c=function(){function e(){s(this,e)}return r(e,null,[{key:"getStandardGroups",value:function(){return[[{x:[0,0,0,0],y:[0,-1,-2,-3]},{x:[0,1,2,3],y:[0,0,0,0]}],[{x:[1,1,1,0],y:[0,-1,-2,-2]},{x:[0,0,1,2],y:[,-1,-1,-1]},{x:[0,1,0,0],y:[0,0,-1,-2]},{x:[0,1,2,2],y:[0,0,0,-1]}],[{x:[0,0,0,1],y:[0,-1,-2,-2]},{x:[0,1,2,0],y:[0,0,0,-1]},{x:[0,1,1,1],y:[0,0,-1,-2]},{x:[2,0,1,2],y:[0,-1,-1,-1]}],[{x:[0,1,0,1],y:[0,0,-1,-1]}],[{x:[1,2,0,1],y:[0,0,-1,-1]},{x:[0,0,1,1],y:[0,-1,-1,-2]}],[{x:[0,1,1,2],y:[0,0,-1,-1]},{x:[1,1,0,0],y:[0,-1,-1,-2]}],[{x:[0,1,2,1],y:[0,0,0,-1]},{x:[1,0,1,1],y:[0,-1,-1,-2]},{x:[1,0,1,2],y:[0,-1,-1,-1]},{x:[0,0,1,0],y:[0,-1,-1,-2]}]].map(function(e){return(new l).addOffsetMapRange(e.map(function(n){return new o.OffsetMap(n.x.map(function(e,t){return new a.Vector2(n.x[t],n.y[t])}))}))})}}]),e}();n.BlockGroup=l,n.BlockGroupHelper=c},{"../../../Engine/Numerics/Vector2":34,"./Block/Block":38,"./OffsetMap/OffsetMap":41}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.offsets=e}return r(t,[{key:"setOffsets",value:function(e){return this.offsets=e,this}},{key:"getLocations",value:function(t){var n=[];return this.offsets.forEach(function(e){n.push(t.add(e))}),n}}]),t}();n.OffsetMap=o},{}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EndlessAbyssWorld=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../Engine/Game/GameWorld/GameWorld"),i=e("../Engine/Game/GameWorld/GameWorldView"),a=e("../Engine/Common/Inputs"),s=e("./EndlessAbyss/EndlessAbyss");var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.GameWorld),r(t,[{key:"initialize",value:function(){this.view=new i.GameWorldView(this),this.inputs.addInput(new a.PointerInput),this.inputs.addInput(new a.KeyInput)}},{key:"createObjects",value:function(){var e=new s.EndlessAbyss(new s.EndlessAbyssView);this.addVisual(e)}}],[{key:"Title",value:function(){return"Game - EndlessAbyss"}}]),t}();n.EndlessAbyssWorld=l},{"../Engine/Common/Inputs":5,"../Engine/Game/GameWorld/GameWorld":13,"../Engine/Game/GameWorld/GameWorldView":14,"./EndlessAbyss/EndlessAbyss":37}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GameOfLifeWorld=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../Engine/Game/GameWorld/GameWorld"),i=e("../Engine/Game/GameWorld/GameWorldView"),a=e("../Engine/Common/Inputs"),s=e("../Engine/Game/Visual/CA/GameOfLife/GameOfLife");var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.GameWorld),r(t,[{key:"initialize",value:function(){this.view=new i.GameWorldView(this),this.inputs.addInput(new a.PointerInput)}},{key:"createObjects",value:function(){var e=new s.GameOfLife(new s.GameOfLifeView);this.addVisual(e)}}],[{key:"Title",value:function(){return"CA - GameOfLife"}}]),t}();n.GameOfLifeWorld=l},{"../Engine/Common/Inputs":5,"../Engine/Game/GameWorld/GameWorld":13,"../Engine/Game/GameWorld/GameWorldView":14,"../Engine/Game/Visual/CA/GameOfLife/GameOfLife":17}],44:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GameStarter=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../Engine/Game/Animation/AnimationBox"),i=e("../ParticlesFlyerWorld"),a=e("../ParticlesWalkerWorld"),s=e("../ParticlesTreeWorld"),l=e("../LSystemTreeWorld"),c=e("../GameOfLifeWorld"),u=e("../EndlessAbyssWorld");var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.symbols={},this.addSymbol("flyer",i.ParticlesFlyerWorld),this.addSymbol("walker",a.ParticlesWalkerWorld),this.addSymbol("tree",s.ParticlesTreeWorld),this.addSymbol("lsystemtree",l.LSystemTreeWorld),this.addSymbol("gameoflife",c.GameOfLifeWorld),this.addSymbol("endlessabyss",u.EndlessAbyssWorld)}return r(e,[{key:"addSymbol",value:function(e,t){this.symbols[e]=t}},{key:"getSymbolByName",value:function(e){return this.symbols[e]}},{key:"launch",value:function(e){var t=this._getRequest(),n=this.getSymbolByName(t.scene);if(n)return document.title=n.Title(),new o.AnimationBox(e,new n(e.width,e.height));window.location="../"}},{key:"_getRequest",value:function(){var e={},t=location.search;if(0<=t.indexOf("?"))for(var n=t.substr(1).split("&"),r=0;r<n.length;r++)e[n[r].split("=")[0]]=unescape(n[r].split("=")[1]);return e}}]),e}();n.GameStarter=f},{"../../Engine/Game/Animation/AnimationBox":9,"../EndlessAbyssWorld":42,"../GameOfLifeWorld":43,"../LSystemTreeWorld":45,"../ParticlesFlyerWorld":46,"../ParticlesTreeWorld":47,"../ParticlesWalkerWorld":48}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LSystemTreeWorld=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../Engine/Game/GameWorld/GameWorld"),i=e("../Engine/Game/GameWorld/GameWorldView"),a=e("../Engine/Game/Visual/LSystem/LSystemTree");var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.GameWorld),r(t,[{key:"initialize",value:function(){this.view=new i.GameWorldView(this)}},{key:"createObjects",value:function(){var e=new a.LSystemTree(new a.LSystemTreeView);this.addVisual(e)}}],[{key:"Title",value:function(){return"L-System - Tree"}}]),t}();n.LSystemTreeWorld=s},{"../Engine/Game/GameWorld/GameWorld":13,"../Engine/Game/GameWorld/GameWorldView":14,"../Engine/Game/Visual/LSystem/LSystemTree":19}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ParticlesFlyerWorld=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../Engine/Game/GameWorld/GameWorld"),i=e("../Engine/Game/GameWorld/GameWorldView"),a=e("../Engine/Common/Inputs"),s=e("../Engine/Game/Visual/ParticleSystem/Flyer/ParticlesFlyer");var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.GameWorld),r(t,[{key:"initialize",value:function(){this.view=new i.GameWorldView(this),this.inputs.addInput(new a.PointerInput)}},{key:"createObjects",value:function(){var e=new s.ParticlesFlyer(new s.ParticlesFlyerView);this.addVisual(e)}}],[{key:"Title",value:function(){return"Particles - Flyer"}}]),t}();n.ParticlesFlyerWorld=l},{"../Engine/Common/Inputs":5,"../Engine/Game/GameWorld/GameWorld":13,"../Engine/Game/GameWorld/GameWorldView":14,"../Engine/Game/Visual/ParticleSystem/Flyer/ParticlesFlyer":23}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ParticlesTreeWorld=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../Engine/Game/GameWorld/GameWorld"),i=e("../Engine/Game/GameWorld/GameWorldView"),a=e("../Engine/Game/Visual/ParticleSystem/Tree/ParticlesTree"),s=e("../Engine/Game/Visual/ParticleSystem/ParticleSystem");var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.GameWorld),r(t,[{key:"initialize",value:function(){this.view=new i.GameWorldView(this)}},{key:"createObjects",value:function(){var e=new a.ParticlesTree(new s.ParticlesCircleView);this.addVisual(e)}}],[{key:"Title",value:function(){return"Particles - Tree"}}]),t}();n.ParticlesTreeWorld=l},{"../Engine/Game/GameWorld/GameWorld":13,"../Engine/Game/GameWorld/GameWorldView":14,"../Engine/Game/Visual/ParticleSystem/ParticleSystem":29,"../Engine/Game/Visual/ParticleSystem/Tree/ParticlesTree":30}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ParticlesWalkerWorld=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../Engine/Game/GameWorld/GameWorld"),i=e("../Engine/Game/GameWorld/GameWorldView"),a=e("../Engine/Common/Inputs"),s=e("../Engine/Game/Visual/ParticleSystem/Walker/ParticlesWalker");var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.GameWorld),r(t,[{key:"initialize",value:function(){this.view=new i.GameWorldView(this),this.inputs.addInput(new a.PointerInput)}},{key:"createObjects",value:function(){var e=new s.ParticlesWalker(new s.ParticlesWalkerView);this.addVisual(e)}}],[{key:"Title",value:function(){return"Particels - Walker"}}]),t}();n.ParticlesWalkerWorld=l},{"../Engine/Common/Inputs":5,"../Engine/Game/GameWorld/GameWorld":13,"../Engine/Game/GameWorld/GameWorldView":14,"../Engine/Game/Visual/ParticleSystem/Walker/ParticlesWalker":31}],49:[function(e,t,n){"use strict";n.__esModule=!0;var r,o=e("./Gallery/GameStarter/GameStarter"),i=document.getElementById("canvas"),a=document.getElementById("button-rebuild");function s(){i.width=document.body.clientWidth,i.height=document.body.clientHeight,(r=(new o.GameStarter).launch(i)).run()}window.addEventListener("resize",function(){r.stop(),s()}),a.addEventListener("click",function(){r.stop(),s()}),s()},{"./Gallery/GameStarter/GameStarter":44}]},{},[49]);