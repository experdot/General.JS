!function r(s,a,c){function u(e,t){if(!a[e]){if(!s[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var o=a[e]={exports:{}};s[e][0].call(o.exports,function(t){return u(s[e][1][t]||t)},o,o.exports,r,s,a,c)}return a[e].exports}for(var l="function"==typeof require&&require,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.launch=[HTMLCollection],t.run=[],t.dispose=[],t}return o(t,e),t}(t("../../Core/GeneralObject").GeneralInterface);n.AppInterface=r},{"../../Core/GeneralObject":12}],2:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Core/GeneralObject"),s=t("../AppInterface/AppInterface"),a=function(e){function t(){var t=e.call(this)||this;return t.implements(new s.AppInterface),t}return o(t,e),t}(r.GeneralObject);n.App=a},{"../../Core/GeneralObject":12,"../AppInterface/AppInterface":1}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.show=function(t){void 0===t&&(t=""),e.onNotify(t)},e}();(n.MessageBox=i).onNotify=function(t){window.alert(t)}},{}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){void 0===t&&(t=1),void 0===e&&(e=1),this.width=t,this.height=e,this.data=[];for(var n=0;n<t;n++){this.data.push([]);for(var i=0;i<e;i++)this.data[n][i]=void 0}}return t.prototype.set=function(t,e,n){return this.data[t][e]=n,this.data[t][e]},t.prototype.get=function(t,e){return this.data[t][e]},t.prototype.forEach=function(i){this.data.forEach(function(t,n){t&&t.forEach(function(t,e){i&&i(t,n,e)})})},t}();n.Array2=i},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){this.reset()}return t.prototype.reset=function(){return this.lastTime=(new Date).getTime(),this},t.prototype.delay=function(t,e,n){var i=(new Date).getTime(),o=i-this.lastTime;t<=o?(this.lastTime=i,e&&e(o)):n&&n(o)},t}();n.DelayTimer=i},{}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o,r=t("./Exception");(o=i=n.StrictMode||(n.StrictMode={}))[o.None=0]="None",o[o.Strict=1]="Strict";var s=function(){function t(t){void 0===t&&(t=i.None),this.mode=t,this.handlers={},this.dom0Events=[],this.dom2Events=[]}return t.prototype.addHandler=function(t,e,n){if(void 0===n&&(n=!1),(this.mode===i.None||n)&&this.registEvent(t),!this.handlers[t])throw new r.InvalidOperationException("The event is not registed.");return this.handlers[t].push(e),e},t.prototype.removeHandler=function(t,e){var n=this.handlers[t];if(n&&0<n.length){var i=n.findIndex(function(t){return t===e});0<=i&&n.splice(i,1)}},t.prototype.registEvent=function(t){this.handlers[t]||(this.handlers[t]=[])},t.prototype.registEventDomLevel0=function(t,e,n){var i=this;this.handlers[e]||(this.handlers[e]=[],n&&t&&(t[n]=function(t){i.raiseEvent(e,t)},this.dom0Events.push({ui:t,name:n})))},t.prototype.registEventDomLevel2=function(t,e,n,i){var o=this;if(!this.handlers[e]&&(this.handlers[e]=[],n&&t)){var r=function(t){o.raiseEvent(e,t)};t.addEventListener(n,r,i),this.dom2Events.push({ui:t,name:n,listener:r})}},t.prototype.raiseEvent=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.handlers[t]&&this.handlers[t].forEach(function(t){t.apply(void 0,e)})},t.prototype.release=function(){this.handlers={},this.dom0Events.forEach(function(t){t.ui[t.name]=null}),this.dom2Events.forEach(function(t){t.ui.removeEventListener(t.name,t.listener)})},t}();n.Events=s},{"./Exception":7}],7:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(t){this.message=t},s=function(e){function t(t){return void 0===t&&(t="One of the arguments provided to a method is not valid."),e.call(this,t)||this}return o(t,e),t}(n.Exception=r),a=function(e){function t(t){return void 0===t&&(t="An undefined/null reference is passed to a method that does not accept it as a valid argument."),e.call(this,t)||this}return o(t,e),t}(n.ArgumentException=s);n.ArgumentNullException=a;var c=function(e){function t(t){return void 0===t&&(t="The value of an argument is outside the allowable range of values as defined by the invoked method."),e.call(this,t)||this}return o(t,e),t}(s);n.ArgumentOutOfRangeException=c;var u=function(e){function t(t){return void 0===t&&(t="An attempt is made to access an element of an array or collection with an index that is outside its bounds."),e.call(this,t)||this}return o(t,e),t}(r);n.IndexOutOfRangeException=u;var l=function(e){function t(t){return void 0===t&&(t="A method call is invalid for the object's current state."),e.call(this,t)||this}return o(t,e),t}(r);n.InvalidOperationException=l;var h=function(e){function t(t){return void 0===t&&(t="The key specified for accessing an element in an object does not match any key in the object."),e.call(this,t)||this}return o(t,e),t}(r);n.KeyNotFoundException=h;var f=function(e){function t(t){return void 0===t&&(t="The method is not implemented."),e.call(this,t)||this}return o(t,e),t}(r);n.NotImplementedException=f;var p=function(e){function t(t){return void 0===t&&(t="An invoked method is not supported."),e.call(this,t)||this}return o(t,e),t}(r);n.NotSupportedException=p;var d=function(e){function t(t){return void 0===t&&(t="A feature does not run on a particular platform."),e.call(this,t)||this}return o(t,e),t}(r);n.PlatformNotSupportedException=d;var y=function(e){function t(t){return void 0===t&&(t="An array with the wrong number of dimensions is passed to a method."),e.call(this,t)||this}return o(t,e),t}(r);n.RankException=y;var g=function(e){function t(t){return void 0===t&&(t="The time interval allotted to an operation has expired."),e.call(this,t)||this}return o(t,e),t}(r);n.TimeoutException=g},{}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return Object.defineProperty(t,"Unique",{get:function(){return t.unique++},enumerable:!0,configurable:!0}),t.unique=1,t}();n.Identifier=i},{}],9:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,s,a=t("./Exception"),c=t("../Numerics/Vector2");(s=r=n.InputEvents||(n.InputEvents={})).Click="Click",s.MouseDown="MouseDown",s.MouseUp="MouseUp",s.MouseMove="MouseMove",s.MouseEnter="MouseEnter",s.MouseLeave="MouseLeave",s.MouseWheel="MouseWheel",s.TouchStart="TouchStart",s.TouchEnd="TouchEnd",s.TouchMove="TouchMove",s.PointerClicked="PointerClicked",s.PointerPressed="PointerPressed",s.PointerReleased="PointerReleased",s.PointerMoved="PointerMoved",s.PointerEntered="PointerEntered",s.PointerExited="PointerExited",s.PointerWheelChanged="PointerWheelChanged",s.KeyDown="KeyDown",s.KeyUp="KeyUp",s.KeyPress="KeyPress",s.Drop="Drop",s.DragEnter="DragEnter",s.DragExit="DragExit",s.DragOver="DragOver";var u=function(){function t(){this.inputList=[],this.dispatcher=function(){throw new a.NotImplementedException("The dispatcher event handler is not configured.")}}return t.prototype.change=function(t){return this.dispatcher=t,this},t.prototype.launch=function(t){var e=this;return this.release(),this.ui=t,this.inputList.forEach(function(t){e.regist(t)}),this},t.prototype.release=function(){this.inputList.forEach(function(t){t.release()}),this.ui=null},t.prototype.regist=function(t){t.regist(this)},t.prototype.addInput=function(t){this.inputList.push(t)},t}();n.Inputs=u;var l=function(){function t(){this.events=[]}return t.prototype.regist=function(t){this.inputs=t},t.prototype.registEvent=function(t,e,n,i,o){var r=this;void 0===o&&(o=null);var s=function(t){n&&n(t),r.inputs.dispatcher(e,t),i&&i(t)};(o=o||this.inputs.ui).addEventListener(t,s),this.events.push({ui:o,name:t,listener:s})},t.prototype.release=function(){this.events.forEach(function(t){t.ui.removeEventListener(t.name,t.listener)})},t}(),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.regist=function(t){e.prototype.regist.call(this,t),t.mouse||(t.mouse={isPressed:!1,position:new c.Vector2(0,0)}),this._registMouseEvent(t)},t.prototype._registMouseEvent=function(e){this.registEvent("click",r.Click),this.registEvent("mouseenter",r.MouseEnter),this.registEvent("mouseleave",r.MouseLeave,function(){e.mouse.isPressed=!1}),this.registEvent("mousedown",r.MouseDown,function(){e.mouse.isPressed=!0}),this.registEvent("mouseup",r.MouseUp,function(){e.mouse.isPressed=!1}),this.registEvent("mousemove",r.MouseMove,function(t){e.mouse.position=new c.Vector2(t.offsetX,t.offsetY)});var t=function(t){e.dispatcher&&e.dispatcher(r.MouseWheel,t)};window.onmousewheel=t,document.onmousewheel=t},t}(n.InputBase=l);n.MouseInput=h;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.regist=function(t){e.prototype.regist.call(this,t),t.touch||(t.touch={isTouching:!1,position:new c.Vector2(0,0)}),this._registTouchEvent(t)},t.prototype._registTouchEvent=function(e){this.registEvent("touchstart",r.TouchStart,function(){e.touch.isTouching=!0}),this.registEvent("touchend",r.TouchEnd,function(){e.touch.isTouching=!1}),this.registEvent("touchmove",r.TouchMove,function(t){t.preventDefault(),e.touch.position=new c.Vector2(t.changedTouches[0].clientX,t.changedTouches[0].clientY)})},t}(l);n.TouchInput=f;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.regist=function(t){e.prototype.regist.call(this,t),t.pointer||(t.pointer={isPressed:!1,position:new c.Vector2(0,0)}),this._registMouseEvent(t),this._registTouchEvent(t)},t.prototype._registMouseEvent=function(e){this.registEvent("click",r.PointerClicked),this.registEvent("mouseenter",r.PointerEntered),this.registEvent("mouseleave",r.PointerExited,function(){e.pointer.isPressed=!1}),this.registEvent("mousedown",r.PointerPressed,function(){e.pointer.isPressed=!0}),this.registEvent("mouseup",r.PointerReleased,function(){e.pointer.isPressed=!1}),this.registEvent("mousemove",r.PointerMoved,function(t){e.pointer.position=new c.Vector2(t.offsetX,t.offsetY)});var t=function(t){e.dispatcher&&e.dispatcher(r.MouseWheel,t)};window.onmousewheel=t,document.onmousewheel=t},t.prototype._registTouchEvent=function(n){this.registEvent("touchstart",r.PointerPressed,function(t){t.preventDefault(),n.pointer.isPressed=!0,n.pointer.position=new c.Vector2(t.changedTouches[0].clientX,t.changedTouches[0].clientY)}),this.registEvent("touchend",r.PointerReleased,function(t){t.preventDefault();var e=n.pointer.isPressed;n.pointer.position=new c.Vector2(t.changedTouches[0].clientX,t.changedTouches[0].clientY),e&&n.ui.click()}),this.registEvent("touchmove",r.PointerMoved,function(t){t.preventDefault(),n.pointer.isPressed=!0,n.pointer.position=new c.Vector2(t.changedTouches[0].clientX,t.changedTouches[0].clientY)})},t}(l);n.PointerInput=p;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.regist=function(t){e.prototype.regist.call(this,t),t.key||(t.key={isKeyDown:!1}),this.registEvent("keydown",r.KeyDown,function(){t.key.isKeyDown=!0},null,document.body),this.registEvent("keyup",r.KeyUp,function(){t.key.isKeyDown=!1},null,document.body),this.registEvent("keypress",r.KeyPress,null,null,document.body)},t}(l);n.KeyInput=d;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.regist=function(t){e.prototype.regist.call(this,t),this.registEvent("drop",r.Drop,function(t){t.stopPropagation(),t.preventDefault()}),this.registEvent("dragenter",r.DragEnter,function(t){t.stopPropagation(),t.preventDefault()}),this.registEvent("dragexit",r.DragExit,function(t){t.stopPropagation(),t.preventDefault()}),this.registEvent("dragover",r.DragOver,function(t){t.stopPropagation(),t.preventDefault()})},t}(l);n.DragDropInput=y},{"../Numerics/Vector2":30,"./Exception":7}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.requestFullScreen=function(e,n){void 0===e&&(e=!1),["ms","moz","webkit"].map(function(t){return t+(e?"RequestFullscreen":"ExitFullscreen")}).forEach(function(t){e?n[t]&&n[t]():document[t]&&document[t]()})},t}();n.Utilities=i},{}],11:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){var t=e.call(this)||this;return t.parent=null,t.children=[],t}return o(t,e),t.prototype.addChild=function(t){return(t.parent=this).children.push(t),this.joint(t),this},t.prototype.removeChild=function(t){var e=this.children.indexOf(t);return 0<=e&&(this.disjoint(t),t.parent=null,this.children.splice(e,1)),this},t}(t("./GeneralObject").GeneralObject);n.GeneralNode=r},{"./GeneralObject":12}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Common/Identifier"),o=t("./GeneralProcess"),r=function(){};n.GeneralInterface=r;var s=function(){function t(){this.identifier=i.Identifier.Unique,this.joints=[],this.processes={}}return t.prototype.joint=function(t){return o.GeneralProcess.setObjectSource(t,this),o.GeneralProcess.combine(this,t),this.joints.push(t),t.joints.push(this),this},t.prototype.disjoint=function(t){return this.joints.splice(this.joints.indexOf(t),1),t.joints.splice(t.joints.indexOf(this),1),o.GeneralProcess.seperate(this,t),o.GeneralProcess.setObjectSource(t,t),this},t.prototype.implements=function(t){for(var e in t)t[e]instanceof Array&&(this.processes[e]=new o.GeneralProcess(this).next(this[e]))},t}();n.GeneralObject=s},{"../Common/Identifier":8,"./GeneralProcess":13}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./GeneralTask"),o=function(){function s(t){this.thisArg=t,this.source=t,this.tasks=[]}return s.find=function(t){var e=[],n=t.processes;for(var i in n)e.push({key:i,value:n[i]});return e},s.setObjectSource=function(t,e){s.find(t).forEach(function(t){t.value.setSource(e)})},s.combine=function(t,e){s.every(t,e,function(t,i){t.next(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return i.process.apply(i,e)},e.identifier)})},s.seperate=function(t,e){s.every(t,e,function(t){t.remove(e.identifier)})},s.every=function(t,e,i){var o=t.processes,r=e.processes;s.find(t).forEach(function(t){var e=o[t.key],n=r[t.key];n instanceof s&&i(e,n,t.key)})},s.prototype.setSource=function(t){return this.source=t,this},s.prototype.process=function(){for(var e=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return this.tasks.forEach(function(t){t.run.apply(t,[e.thisArg,e.source].concat(n))}),this},s.prototype.before=function(t,e){return t&&this.tasks.unshift(new i.GeneralTask(t,e)),this},s.prototype.next=function(t,e){return t&&this.tasks.push(new i.GeneralTask(t,e)),this},s.prototype.remove=function(e){var n=this;return this.tasks.filter(function(t){return t.identifier===e}).forEach(function(t){var e=n.tasks.indexOf(t);n.tasks.splice(e,1)}),this},s.prototype.clear=function(){return this.tasks=[],this},s}();n.GeneralProcess=o},{"./GeneralTask":14}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e,n){void 0===e&&(e=Number.MIN_SAFE_INTEGER),void 0===n&&(n=!0),this.action=t,this.identifier=e,this.enabled=n}return t.prototype.run=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];this.enabled&&this.action&&(e=this.action).call.apply(e,[t].concat(n))},t}();n.GeneralTask=i},{}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function u(){}return u.clear=function(t){return t.clearRect(0,0,t.canvas.width,t.canvas.height),this},u.shadow=function(t,e,n,i,o,r){return u.hold(t,function(){t.shadowBlur=e,t.shadowColor=n,t.shadowOffsetX=i,t.shadowOffsetY=o,r&&r(t)}),this},u.scaleOffset=function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1);var o=t.canvas.width,r=t.canvas.height,s=o+e,a=r+n;return u.hold(t,function(){t.globalAlpha=i,t.translate(o/2,r/2),t.drawImage(t.canvas,-s/2,-a/2,s,a)}),this},u.rotate=function(t,e,n,i){void 0===n&&(n=1);var o=t.canvas.width,r=t.canvas.height,s=o/2,a=r/2;return u.hold(t,function(){t.translate(s,a),t.rotate(e),t.translate(-s,-a),t.globalAlpha=n,i&&i(t)}),this},u.mirror=function(t,e,n,i,o){void 0===i&&(i=1);var r=t.canvas.width,s=t.canvas.height,a=r/2,c=s/2;return u.hold(t,function(){t.translate(a,c),t.scale(e,n),t.translate(-a,-c),t.globalAlpha=i,o&&o(t)}),this},u.transform=function(t,e,n){return u.hold(t,function(){t.setTransform.apply(t,e.toArray()),n&&n(t)}),this},u.transparent=function(t,e,n){return void 0===e&&(e=1),u.hold(t,function(){t.globalAlpha=e,n&&n(t)}),this},u.hold=function(t,e){return t.save(),e&&e(t),t.restore(),this},u}();n.Graphics=i},{}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e}return t.prototype.clear=function(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this},t.prototype.draw=function(t){return t&&t(this.context),this},t.prototype.output=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.drawImage.apply(t,[this.canvas].concat(e)),this},t}();n.OffscreenCanvas=i},{}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../Common/DelayTimer"),o=function(){function t(){this.isLoop=!1,this.frameCount=0,this.framePerSecond=0,this.lastSecondCount=0,this.timer=new i.DelayTimer,this.onRateChanged=null}return t.prototype.loopInvoke=function(t){var e,n=this;this.isLoop=!0;var i=function(){t&&t(),n.frameCount+=1,n.timer.delay(1e3,function(t){var e=1e3===t?0:-1;n.framePerSecond=n.frameCount-n.lastSecondCount+e,n.lastSecondCount=n.frameCount,n.onRateChanged&&n.onRateChanged(n.framePerSecond)}),n.isLoop?e=window.requestAnimationFrame(i):(window.cancelAnimationFrame(e),n.frameCount=0,n.framePerSecond=0,n.lastSecondCount=0,n.stopCallback&&n.stopCallback())};i()},t.prototype.stop=function(t){this.stopCallback=t,this.isLoop=!1},t}();n.FrameManager=o},{"../../Common/DelayTimer":5}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./FrameManager"),o=function(){function t(t,e,n){this.container=t,this.canvas=e,this.context=e.getContext("2d"),this.world=n,this.world.initializeUI(t,e),this.frameManager=new i.FrameManager}return t.prototype.run=function(){var t=this;this.world.processes.start.process(),this.world.processes.gui.process(this.container),this.frameManager.loopInvoke(function(){t.world.processes.render.process(t.context),t.world.processes.update.process()})},t.prototype.stop=function(){var t=this;this.frameManager.stop(function(){t.context.clearRect(0,0,t.canvas.width,t.canvas.height)}),this.world.processes.dispose.process()},t}();n.GameBox=o},{"./FrameManager":17}],19:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Core/GeneralObject"),s=t("../../../UI/Color"),a=t("../../GameInterface/GameInterface"),c=function(o){function t(t,e,n){void 0===t&&(t=s.Colors.Black),void 0===e&&(e=10),void 0===n&&(n=!0);var i=o.call(this)||this;return i.fillColor=t,i.gradientNumber=e,i.direct=n,i.implements(new a.GameEffectInterface),i}return r(t,o),t.prototype.start=function(t){var n=this;this.direct&&t.processes.render.before(function(t,e){return n.effect(e)},this.identifier)},t.prototype.update=function(){.5<Math.random()&&(this.fillColor=s.ColorHelper.gradientRandom(this.fillColor,this.gradientNumber))},t.prototype.effect=function(t){var e=t.canvas.width,n=t.canvas.height;t.fillStyle=this.fillColor.rgba,t.fillRect(0,0,e,n)},t}(o.GeneralObject);n.GhostEffect=c;var u=function(o){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!0);var i=o.call(this)||this;return i.image=new Image,i.image.src=t,i.alpha=e,i.direct=n,i.implements(new a.GameEffectInterface),i}return r(t,o),t.prototype.start=function(t){var n=this;this.direct&&t.processes.render.before(function(t,e){return n.effect(e)},this.identifier)},t.prototype.effect=function(t){var e=t.globalAlpha;t.globalAlpha=this.alpha,t.drawImage(this.image,0,0),t.globalAlpha=e},t}(o.GeneralObject);n.GhostImageEffect=u},{"../../../Core/GeneralObject":12,"../../../UI/Color":36,"../../GameInterface/GameInterface":20}],20:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.start=[],t.dispose=[],t}return o(t,e),t}(t("../../Core/GeneralObject").GeneralInterface),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=[CanvasRenderingContext2D],t}return o(t,e),t}(n.GameObjectInterface=r);n.GameViewInterface=s;var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gui=[HTMLElement],t}return o(t,e),t}(r);n.GameGUIInterface=a;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.update=[],t}return o(t,e),t}(r);n.GameEffectInterface=c;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=[CanvasRenderingContext2D],t.gui=[HTMLElement],t.update=[],t}return o(t,e),t}(r);n.GameVsiualInterface=u},{"../../Core/GeneralObject":12}],21:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Core/GeneralObject"),s=t("../GameInterface/GameInterface"),a=function(e){function t(){var t=e.call(this)||this;return t.implements(new s.GameViewInterface),t}return o(t,e),t}(r.GeneralObject),c=function(e){function t(){var t=e.call(this)||this;return t.implements(new s.GameViewInterface),t}return o(t,e),t}(n.GameView=a);n.TypedGameView=c},{"../../Core/GeneralObject":12,"../GameInterface/GameInterface":20}],22:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Core/GeneralNode"),s=t("../GameInterface/GameInterface"),a=t("../../Common/Events"),c=function(e){function t(){var t=e.call(this)||this;return t.implements(new s.GameVsiualInterface),t.events=new a.Events,t}return o(t,e),t.prototype.on=function(t,e,n){void 0===n&&(n=!0),this.events.addHandler(t,e,n)},t.prototype.off=function(t,e){this.events.removeHandler(t,e)},t.prototype.dispatch=function(n){for(var t,i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];(t=this.events).raiseEvent.apply(t,[n].concat(i)),this.children.forEach(function(t){var e;(e=t).dispatch.apply(e,[n].concat(i))})},t.prototype.dispose=function(){this.events.release()},t}(r.GeneralNode);n.GameVisual=c},{"../../Common/Events":6,"../../Core/GeneralNode":11,"../GameInterface/GameInterface":20}],23:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameObject/GameVisual"),s=t("../../Common/Inputs"),a=function(i){function t(t,e){var n=i.call(this)||this;return n.width=t,n.height=e,(n.world=n).inputs=(new s.Inputs).change(function(t,e){return n.dispatch(t,e)}),n.ui={container:null,canvas:null},n.initialize(),n.createObjects(),n}return o(t,i),Object.defineProperty(t.prototype,"size",{get:function(){return{width:this.width,height:this.height,center:{x:this.width/2,y:this.height/2}}},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){},t.prototype.createObjects=function(){},t.prototype.initializeUI=function(t,e){this.ui.container=t,this.ui.canvas=e,this.inputs.launch(this.ui.container)},t.prototype.addChild=function(t){return i.prototype.addChild.call(this,t),t.world=this},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.inputs.release()},t}(r.GameVisual);n.GameWorld=a},{"../../Common/Inputs":9,"../GameObject/GameVisual":22}],24:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(t){this.language=t}return Object.defineProperty(e,"LanguageSessionKey",{get:function(){return"General_SessionStorage_Language"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Netural",{get:function(){return new e(sessionStorage.getItem(e.LanguageSessionKey)||navigator.language||"en-US")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"en_US",{get:function(){return new e("en-US")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"zh_CN",{get:function(){return new e("zh-CN")},enumerable:!0,configurable:!0}),e.switch=function(t){sessionStorage.setItem(e.LanguageSessionKey,t)},Object.defineProperty(e.prototype,"displayName",{get:function(){return n.Languages[this.language]},enumerable:!0,configurable:!0}),e}();n.CultureInfo=i,n.Languages={"en-US":"English(United States)","zh-CN":"简体中文"}},{}],25:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Common/Exception"),i=function(){function t(){}return t.openFileDialog=function(e,t){void 0===t&&(t="");var n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept",t),n.onchange=function(t){e&&e(t)},n.style.display="none",document.body.appendChild(n),n.click(),n.remove()},t.readAllText=function(t,e){this._readByFileReader(t,e,function(t,e){t.readAsText(e)})},t.readAsDataURL=function(t,e){this._readByFileReader(t,e,function(t,e){t.readAsDataURL(e)})},t._readByFileReader=function(t,e,n){var i=new FileReader;n(i,t),i.onload=function(){e&&e(i.result)},i.onerror=function(){throw new o.Exception("Could not read file, error: "+i.error)}},t}();n.FileIO=i},{"../Common/Exception":7}],26:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function n(){}return n.get=function(t,e){return n.request("GET",t,e)},n.request=function(t,e,n){var i=new XMLHttpRequest;i.open(t,e),i.send(),i.onload=function(){n&&n(i.response)}},n}();n.HttpWebRequest=i},{}],27:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function a(t,e,n,i,o,r){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),void 0===o&&(o=0),void 0===r&&(r=0),this.M11=t,this.M12=e,this.M21=n,this.M22=i,this.M31=o,this.M32=r,this}return Object.defineProperty(a,"Identity",{get:function(){return new a},enumerable:!0,configurable:!0}),a.createScale=function(t,e,n){var i=new a,o=n.x*(1-t),r=n.y*(1-e);return i.M11=t,i.M12=0,i.M21=0,i.M22=e,i.M31=o,i.M32=r,i},a.createRotation=function(t,e){var n=new a,i=Math.cos(t),o=Math.sin(t),r=e.x*(1-i)+e.y*o,s=e.y*(1-i)-e.x*o;return n.M11=i,n.M12=o,n.M21=-o,n.M22=i,n.M31=r,n.M32=s,n},a.createTranslation=function(t){var e=new a;return e.M11=1,e.M12=0,e.M21=0,e.M22=1,e.M31=t.x,e.M32=t.y,e},a.prototype.toArray=function(){return[this.M11,this.M12,this.M21,this.M22,this.M31,this.M32]},a.prototype.toIdentity=function(){return this.M11=this.M22=1,this.M12=this.M21=this.M31=this.M32=0,this},a.prototype.transform=function(t,e,n,i,o,r,s){var a=Math.cos(o),c=Math.sin(o);return this.append(a*n,c*n,-c*i,a*i,t,e),(r||s)&&(this.M31-=r*this.M11+s*this.M21,this.M32-=r*this.M12+s*this.M22),this},a.prototype.append=function(t,e,n,i,o,r){var s=this.M11,a=this.M12,c=this.M21,u=this.M22;return this.M11=t*s+e*c,this.M12=t*a+e*u,this.M21=n*s+i*c,this.M22=n*a+i*u,this.M31=o*s+r*c+this.M31,this.M32=o*a+r*u+this.M32,this},a.prototype.multiply=function(t){return this.append(t.M11,t.M12,t.M21,t.M22,t.M31,t.M32),this},a.prototype.invert=function(){var t=this.M11,e=this.M12,n=this.M21,i=this.M22,o=this.M31,r=t*i-e*n;return this.M11=i/r,this.M12=-e/r,this.M21=-n/r,this.M22=t/r,this.M31=(n*this.M32-i*o)/r,this.M32=-(t*this.M32-e*o)/r,this},a}();n.Matrix3x2=i},{}],28:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.next=function(t){return void 0===t&&(t=Number.MAX_SAFE_INTEGER),Math.floor(0<=Math.random()*t?t:0)},t.prototype.range=function(t,e){return Math.ceil(t+Math.floor(Math.random()*(e-t)))},t.prototype.normal=function(t,e,n){void 0===n&&(n=3);for(var i=0,o=0;o<n;o++)i+=this.range(t,e+1);return i/n},t.prototype.sample=function(){return Math.random()},t}();n.Random=i},{}],29:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./Vector2"),o=t("./Matrix3x2"),r=function(){function t(){this.translation=new i.Vector2(0,0),this.scale=new i.Vector2(1,1),this.rotation=0,this.center=new i.Vector2(0,0)}return t.prototype.toMatrix3x2=function(){var t=o.Matrix3x2.createScale(this.scale.x,this.scale.y,this.center),e=o.Matrix3x2.createRotation(this.rotation,this.center),n=o.Matrix3x2.createTranslation(this.translation);return t.multiply(e).multiply(n)},t}();n.Transform=r},{"./Matrix3x2":27,"./Vector2":30}],30:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return Object.defineProperty(i,"Zero",{get:function(){return new i(0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sqrtLength",{get:function(){return this.x*this.x+this.y*this.y},enumerable:!0,configurable:!0}),i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.normalize=function(){var t=1/this.length;return new i(this.x*t,this.y*t)},i.prototype.negate=function(){return new i(-this.x,-this.y)},i.prototype.add=function(t){return new i(this.x+t.x,this.y+t.y)},i.prototype.subtract=function(t){return new i(this.x-t.x,this.y-t.y)},i.prototype.multiply=function(t){return new i(this.x*t,this.y*t)},i.prototype.divide=function(t){var e=1/t;return new i(this.x*e,this.y*e)},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y},i.prototype.rotate=function(t){var e=Math.sin(t),n=Math.cos(t);return new i(this.x*n-this.y*e,this.y*n+this.x*e)},i.prototype.setLength=function(t){var e=this.length;0<e&&(this.x=this.x*t/e,this.y=this.y*t/e)},i.prototype.limitLength=function(t){t<this.length&&this.setLength(t)},i.prototype.cos=function(t){return this.dot(t)/(this.length*t.length)},i}();n.Vector2=i},{}],31:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return Object.defineProperty(t,"IsMobile",{get:function(){return/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),t}();n.PlatformInfo=i},{}],32:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("./ResourceManager"),s=t("./ResourceSet"),a=function(n){function t(t){var e=n.call(this)||this;return e.url=t,e.add(new s.ResourceSet(e.url)),e}return o(t,n),t.prototype.load=function(t){var e=this;return n.prototype.load.call(this,function(){e.target&&e.assign(e.target),t&&t()})},t.prototype.attach=function(t){return this.target=t,this},t}(r.ResourceManager);n.ConfigurationManager=a},{"./ResourceManager":34,"./ResourceSet":35}],33:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("./ResourceManager"),s=t("../Globalization/CultureInfo"),a=t("./ResourceSet"),c=function(n){function t(t){var e=n.call(this)||this;return e.config=t,e.onPrepared=function(){},e}return o(t,n),t.prototype.init=function(t){return this.config=t,this},t.prototype.load=function(t){var e=this;return n.prototype.load.call(this,function(){e.target&&e.assign(e.target),t&&t()}),this},t.prototype.attach=function(t,e){return void 0===e&&(e=s.CultureInfo.Netural),this.config&&(this.add(new a.ResourceSet(this.config.get(e.language))),this.target=t),this},t.prototype.switch=function(t,e){return void 0===t&&(t=s.CultureInfo.Netural),this.config&&(this.sets=[],this.attach(this.target,t).load(e)),this},t}(r.ResourceManager);n.CultureResourceManager=c;var u=function(){function t(t,e,n){void 0===n&&(n="{{language}}"),this.template=t,this.languages=e,this.replace=n}return t.prototype.get=function(e){return this.languages.findIndex(function(t){return t===e})<0&&(e=this.languages[0]),this.template.replace(this.replace,e)},t}();n.CultureResourceConfig=u},{"../Globalization/CultureInfo":24,"./ResourceManager":34,"./ResourceSet":35}],34:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Network/Network"),i=function(){function t(){this.sets=[]}return t.prototype.add=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=this.sets).push.apply(t,e)},t.prototype.clear=function(){return this.sets=[],this},t.prototype.load=function(t){var e=this;return this.preload?this.preload(function(){e.loading(t)}):this.loading(t),this},t.prototype.assign=function(n){return this.sets.forEach(function(t){for(var e in n){void 0!==t.data[e]&&(n[e]=t.data[e])}}),this},t.prototype.loading=function(n){var i=this.sets.length;this.sets.forEach(function(e){o.HttpWebRequest.get(e.src,function(t){e.init(JSON.parse(t)),1,i&&n&&n()})})},t}();n.ResourceManager=i},{"../Network/Network":26}],35:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t){this.src=t}return t.prototype.init=function(t){this.data=t,this.loaded=!0},t}();n.ResourceSet=i},{}],36:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function n(t,e,n,i){void 0===t&&(t=255),void 0===e&&(e=255),void 0===n&&(n=255),void 0===i&&(i=1),this.r=t,this.g=e,this.b=n,this.a=i}return n.fromHex=function(t){var e=parseInt(t.slice(1),16);return new n(e/65536,e/256%256,e%256)},n.fromNumber=function(t){return new n(t/65536,t/256%256,t%256)},Object.defineProperty(n.prototype,"hex",{get:function(){var t=Math.floor(this.r),e=Math.floor(this.g),n=Math.floor(this.b),i=t<16?"0":"",o=n<16?"0":"";return"#"+(e<16?"0":"")+t.toString(16)+i+e.toString(16)+o+n.toString(16)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rgb",{get:function(){return"rgb("+Math.floor(this.r)+","+Math.floor(this.g)+","+Math.floor(this.b)+")"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rgba",{get:function(){return"rgba("+Math.floor(this.r)+","+Math.floor(this.g)+","+Math.floor(this.b)+","+this.a+")"},enumerable:!0,configurable:!0}),n.prototype.clone=function(){return new n(this.r,this.g,this.b,this.a)},n}();n.Color=s;var i=function(){function t(){}return t.gradient=function(t,e){void 0===e&&(e=1);var n=t.r;n+=e,n=Math.min(255,Math.max(0,n));var i=t.g;i+=e,i=Math.min(255,Math.max(0,i));var o=t.b;return o+=e,o=Math.min(255,Math.max(0,o)),new s(n,i,o,t.a)},t.gradientRandom=function(t,e){void 0===e&&(e=1);var n=e/2,i=t.r;i+=Math.random()*e-n,i=Math.min(255,Math.max(0,i));var o=t.g;o+=Math.random()*e-n,o=Math.min(255,Math.max(0,o));var r=t.b;return r+=Math.random()*e-n,r=Math.min(255,Math.max(0,r)),new s(i,o,r,t.a)},t.gradientRandom2=function(t,e){void 0===e&&(e=1);var n=e/8,i=t.r;i+=Math.random()*e-n,i=Math.min(255,Math.max(0,i));var o=t.g;o+=Math.random()*e-n,o=Math.min(255,Math.max(0,o));var r=t.b;return r+=Math.random()*e-n,r=Math.min(255,Math.max(0,r)),new s(i,o,r,t.a)},t}();n.ColorHelper=i;var o=function(){function t(){}return Object.defineProperty(t,"Black",{get:function(){return new s(0,0,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"White",{get:function(){return new s(255,255,255,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Gray",{get:function(){return new s(128,128,128,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Random",{get:function(){return new s(255*Math.random(),255*Math.random(),255*Math.random(),1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RandomGray",{get:function(){var t=255*Math.random();return new s(t,t,t,1)},enumerable:!0,configurable:!0}),t}();n.Colors=o},{}],37:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Numerics/Vector2"),o=function(){function t(){}return t.getEventClientPositon=function(t){return t instanceof MouseEvent?new i.Vector2(t.clientX,t.clientY):t instanceof TouchEvent?new i.Vector2(t.changedTouches[0].clientX,t.changedTouches[0].clientY):null},t}();n.EventHelper=o},{"../Numerics/Vector2":30}],38:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Engine/Application/AppObject/App"),s=t("../Resources/GalleryTexts"),a=t("../../Engine/Platform/PlatformInfo"),c=t("../GalleryStarter"),u=t("./GalleryNavigator"),l=t("../Resources/GalleryImages"),h=t("../../Engine/Common/Utilities"),f=function(e){function t(){var t=e.call(this)||this;return t.joint(new u.GalleryNavigator),t.joint(new p),t.joint(new d),t.joint(new y),t}return o(t,e),t.prototype.launch=function(){var t=this;s.GalleryTextResourceManager.load(function(){l.GalleryImageResourceManager.load(function(){t.processes.run.process()})})},t}(r.App);n.GalleryApp=f;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.launch=function(){sessionStorage.getItem("warningFlag")||sessionStorage.setItem("warningFlag","unknown")},e.prototype.run=function(){if("unknown"==sessionStorage.getItem("warningFlag")&&a.PlatformInfo.IsMobile){sessionStorage.setItem("warningFlag","known");var t=s.GalleryTexts.Warnings.OpenOnPC,e=$('                \n            <div class="alert alert-warning alert-dismissible fade show" role="alert">\n                <strong>'+t.Title+"</strong> "+t.Content+'\n                <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            ');$("#alert-container").append(e),setTimeout(function(){e.alert("close")},6e3)}},e}(r.App),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.run=function(){setTimeout(function(){var t=$("#game-layer-progress");t.removeClass("show"),setTimeout(function(){t.remove()},150)},850)},e}(r.App),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starter=new c.GalleryStarter,t}return o(t,e),t.prototype.launch=function(){var t=this;window.addEventListener("resize",function(){t.box.stop(),t.run()}),$("#button-restart").click(function(){t.box.stop(),t.run()}),$("#button-fullscreen").click(function(){h.Utilities.requestFullScreen(!0,document.querySelector("#gallery-game"))})},t.prototype.run=function(){var t=document.getElementById("canvas");t.width=window.document.body.clientWidth,t.height=window.document.body.clientHeight,this.box=this.starter.launch(document.getElementById("game-layer-canvas"),t),this.box.frameManager.onRateChanged=function(t){var e=$("#text-frame");e&&e.text(t)},this.box.run()},t}(r.App)},{"../../Engine/Application/AppObject/App":2,"../../Engine/Common/Utilities":10,"../../Engine/Platform/PlatformInfo":31,"../GalleryStarter":40,"../Resources/GalleryImages":47,"../Resources/GalleryTexts":48,"./GalleryNavigator":39}],39:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Engine/Application/AppObject/App"),s=t("../Resources/GalleryTexts"),a=t("../GalleryStarter"),c=function(e){function t(){var t=e.call(this)||this;return t.joint(new u),t.joint(new l),t.joint(new h),t}return o(t,e),t}(r.App);n.GalleryNavigator=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.run=function(){$("#title-header").text(s.GalleryTexts.Title.Header),$("#title-description").text(s.GalleryTexts.Title.Description)},e}(r.App),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.run=function(){$("#button-restart").attr("title",s.GalleryTexts.Tooltips.Restart),$("#button-fullscreen").attr("title",s.GalleryTexts.Tooltips.Fullscreen),$(function(){$("[data-toggle='tooltip']").tooltip()})},e}(r.App),h=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return o(i,t),i.prototype.run=function(){if(!i.HasRun){i.HasRun=!0;var t=$("#dropdown-gallery"),e=a.GalleryStarter.Symbols;for(var n in e)t.append($('<a class="dropdown-item" href="./gallery.html?scene='+n+'">'+e[n].Title+"</a>"))}},i}(r.App)},{"../../Engine/Application/AppObject/App":2,"../GalleryStarter":40,"../Resources/GalleryTexts":48}],40:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./Visuals/ParticlesFlyerWorld"),o=t("./Visuals/ParticlesWalkerWorld"),r=t("./Visuals/ParticlesTreeWorld"),s=t("./Visuals/LSystemTreeWorld"),a=t("./Visuals/GameOfLifeWorld"),c=t("./Visuals/AudioVisualizerWorld"),u=t("./Games/EndlessAbyssWorld"),l=t("../Engine/Game/GameBox/GameBox"),h=function(){function t(){this.symbols={},this.addSymbol("flyer",i.ParticlesFlyerWorld),this.addSymbol("walker",o.ParticlesWalkerWorld),this.addSymbol("tree",r.ParticlesTreeWorld),this.addSymbol("lsystemtree",s.LSystemTreeWorld),this.addSymbol("gameoflife",a.GameOfLifeWorld),this.addSymbol("audiovisualizer",c.AudioVisualizerWorld),this.addSymbol("endlessabyss",u.EndlessAbyssWorld),t.Symbols=this.symbols}return t.prototype.addSymbol=function(t,e){this.symbols[t]=e},t.prototype.getSymbolByName=function(t){return this.symbols[t]},t.prototype.launch=function(t,e){var n=this._getRequest(),i=this.getSymbolByName(n.scene);if(i)return document.title=i.Title,new l.GameBox(t,e,new i(e.width,e.height));window.location="../"},t.prototype._getRequest=function(){var t={},e=location.search;if(0<=e.indexOf("?"))for(var n=e.substr(1).split("&"),i=0;i<n.length;i++)t[n[i].split("=")[0]]=unescape(n[i].split("=")[1]);return t},t}();n.GalleryStarter=h},{"../Engine/Game/GameBox/GameBox":18,"./Games/EndlessAbyssWorld":46,"./Visuals/AudioVisualizerWorld":50,"./Visuals/GameOfLifeWorld":54,"./Visuals/LSystemTreeWorld":60,"./Visuals/ParticlesFlyerWorld":71,"./Visuals/ParticlesTreeWorld":72,"./Visuals/ParticlesWalkerWorld":73}],41:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Engine/Game/GameObject/GameVisual"),s=t("../../../Engine/Numerics/Vector2"),a=t("../../../Engine/UI/Color"),c=t("../../../Engine/Utilities/EventHelper"),u=t("../../../Engine/Game/GameObject/GameView"),l=t("./Models/BlockGrid"),h=t("../../../Engine/Game/GameComponents/Effect/Effect"),f=t("../../../Engine/Common/DelayTimer"),p=t("../../../Engine/Drawing/Graphics"),d=t("../../../Engine/Drawing/OffscreenCanvas"),y=t("../../../Engine/Common/Inputs"),g=t("../../Resources/GalleryTexts"),m=function(e){function t(){var t=e.call(this)||this;return t.timer=new f.DelayTimer,t.ghost=new h.GhostEffect(new a.Color(0,0,0,.01),40,!1),t.joint(t.ghost),t}return o(t,e),t.prototype.start=function(){var t=this.world.width,e=this.world.height;this.settings={width:10,rotation:0,center:new s.Vector2(t/2,e/2),playing:!1,gameover:!1,score:0,progress:0,delayTime:500,pointer:{position:new s.Vector2,rotation:0,count:0}},this.blockGrid=new l.BlockGrid(this.settings.width,20),this._registEvents()},t.prototype.update=function(){var e=this;this.settings.playing&&this.timer.delay(this.settings.delayTime,function(){e.blockGrid.down(),e.settings.progress=0},function(t){e.settings.progress=t/e.settings.delayTime}),this.settings.rotation+=.002},t.prototype._registEvents=function(){var r=this;this.on(y.InputEvents.KeyPress,function(t){r.settings.playing?"a"===t.key?r.blockGrid.left():"d"===t.key?r.blockGrid.right():"w"===t.key?r.blockGrid.up():"s"===t.key&&r.blockGrid.down():"Enter"===t.key&&(r.settings.playing=!0,r.settings.gameover&&(r.settings.gameover=!1,r.blockGrid.reset()))}),this.on(y.InputEvents.PointerPressed,function(t){var e=r.settings.pointer;e.position=c.EventHelper.getEventClientPositon(t),e.rotation=r.settings.rotation,e.count=0}),this.on(y.InputEvents.PointerMoved,function(t){if(r.world.inputs.pointer.isPressed){var e=r.settings.pointer,n=c.EventHelper.getEventClientPositon(t).subtract(e.position),i=e.position.subtract(r.settings.center).rotate(Math.PI/2).normalize(),o=n.dot(i)/100;r.settings.rotation=e.rotation+o,e.count+=1,8<e.count&&(e.position=c.EventHelper.getEventClientPositon(t),e.rotation=r.settings.rotation,e.count=0)}}),this.blockGrid.onOver=function(){r.settings.playing=!1,r.settings.gameover=!0,r.settings.score=0},this.blockGrid.onFullRow=function(t){r.settings.score+=10*Math.pow(2,t-1)}},t}(r.GameVisual);n.EndlessAbyss=m;var v=function(i){function t(){var t=i.call(this)||this;t.fill={white:new a.Color(255,255,255,.05),blank:new a.Color(255,255,255,.05),mask:new a.Color(0,0,0,.6)},t.stroke={white:new a.Color(255,255,255,.05),black:new a.Color(0,0,0,.2)};var e=t.stroke.white,n=t.fill.white;return t.styles=[[e,null,!1,!1],[e,n,!1,!0],[null,t.fill.blank,!1,!1],[null,null,!0,!0],[t.stroke.black,null,!1,!1],[e,null,!1,!0]],t.joint(new w),t.joint(new _),t}return o(t,i),t.prototype.render=function(t){this.target=t},t.prototype.drawAll=function(t,e,n){void 0===n&&(n=!0);var i=this.target.blockGrid.width,o=this.target.blockGrid.height,r=(.8*Math.min(e.width,e.height)-100)/o/2+0,s=1-this.target.settings.progress,a=this.target.blockGrid.allBlocks,c=this.target.blockGrid.preBlocks,u=this.target.blockGrid,l=this.target.blockGrid.current.getBlocks(),h=this.target.blockGrid.next.getBlocks(),f={center:e.center,radius:50,blockHeight:r,blockBorder:0,yOffset:0,split:i};f.yOffset=(n?(this.drawBlocks(t,a,f,this.styles[0]),this.drawBlocks(t,u,f,this.styles[1]),this.drawBlocks(t,c,f,this.styles[2]),f.yOffset=4,this.drawBlocks(t,h,f,this.styles[3])):(this.drawBlocks(t,u,f,this.styles[4]),f.yOffset=s,this.drawBlocks(t,l,f,this.styles[5])),0)},t.prototype.drawBlocks=function(u,t,l,h){var f=this,p=Math.PI/l.split,d=l.blockHeight-l.blockBorder;t.forEach(function(t){if(t){var e=t.location.x,n=t.location.y+l.yOffset,i=e*p*2,o=i-p+f.target.settings.rotation,r=i+p+f.target.settings.rotation,s=h[2]?t.color:h[0],a=h[3]?t.color:h[1],c={center:l.center,radius:l.radius+n*l.blockHeight,height:d,start:o,end:r};f.drawSingle(u,c,s,a)}})},t.prototype.drawSingle=function(t,e,n,i){t.beginPath(),t.arc(e.center.x,e.center.y,e.radius,e.start,e.end,!1),t.arc(e.center.x,e.center.y,e.radius+e.height,e.end,e.start,!0),t.closePath(),n&&(t.strokeStyle=n.rgba,t.stroke()),i&&(t.fillStyle=i.rgba,t.fill())},t}(u.GameView);n.EndlessAbyssView=v;var w=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.render=function(e,t){var n=this;this.innerCanvas||(this.innerCanvas=new d.OffscreenCanvas(t.canvas.width,t.canvas.height));var i=e.target.world.size;this.innerCanvas.draw(function(t){n.drawDynamic(e,t,i)}).output(t,0,0)},e.prototype.drawDynamic=function(t,e,n){t.target.ghost.effect(e),p.Graphics.scaleOffset(e,8,8*e.canvas.height/e.canvas.width,.99),t.drawAll(e,n)},e}(u.GameView),_=function(e){function t(){var t=e.call(this)||this;return t.single=0,t.fill={mask:new a.Color(0,0,0,.6)},t}return o(t,e),t.prototype.render=function(t,e){var n=t.target.world.size;this.drawStatic(t,e,n)},t.prototype.drawStatic=function(t,e,n){var i=this;t.target.settings.playing?(t.drawAll(e,n,!1),this.drawScore(e,n,t.target.settings.score)):(this.drawMask(e,n),p.Graphics.shadow(e,3,"rgba(0,0,0,0.38)",3,3,function(){t.target.settings.gameover?i.drawTitle(e,n,g.GalleryTexts.EndlessAbyssWorld.GameOver):i.drawTitle(e,n,g.GalleryTexts.EndlessAbyssWorld.GameName)}),this.drawNotify(e,n))},t.prototype.drawMask=function(t,e){t.fillStyle=this.fill.mask.rgba,t.fillRect(0,0,e.width,e.height)},t.prototype.drawTitle=function(t,e,n){var i=Math.max(e.width/20,48);t.font=i+"px Arial",t.textAlign="center",t.fillStyle="#FFF",t.fillText(n,e.center.x,e.center.y)},t.prototype.drawNotify=function(t,e){var n=Math.max(e.width/64,16);t.font=n+"px Arial",t.textAlign="center",this.single+=.06,t.fillStyle=new a.Color(255,255,255,.6+.3*Math.sin(this.single)).rgba,t.fillText(g.GalleryTexts.EndlessAbyssWorld.Tip,e.center.x,e.center.y+1.6*n)},t.prototype.drawScore=function(t,e,n){var i=Math.max(e.width/48,24);t.font=i+"px Arial",t.textAlign="right",t.fillStyle=new a.Color(255,255,255,.9).rgba,t.fillText(g.GalleryTexts.EndlessAbyssWorld.Score+n,.9*e.width,.15*e.height)},t}(u.GameView)},{"../../../Engine/Common/DelayTimer":5,"../../../Engine/Common/Inputs":9,"../../../Engine/Drawing/Graphics":15,"../../../Engine/Drawing/OffscreenCanvas":16,"../../../Engine/Game/GameComponents/Effect/Effect":19,"../../../Engine/Game/GameObject/GameView":21,"../../../Engine/Game/GameObject/GameVisual":22,"../../../Engine/Numerics/Vector2":30,"../../../Engine/UI/Color":36,"../../../Engine/Utilities/EventHelper":37,"../../Resources/GalleryTexts":48,"./Models/BlockGrid":43}],42:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../../Engine/Numerics/Vector2"),o=t("../../../../../Engine/UI/Color"),r=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.location=new i.Vector2(t,e),this.color=o.Colors.White}return t.prototype.setLocation=function(t){return this.location=t,this},t.prototype.setColor=function(t){return this.color=t,this},t}();n.Block=r},{"../../../../../Engine/Numerics/Vector2":30,"../../../../../Engine/UI/Color":36}],43:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Engine/Collections/Array2"),a=t("../../../../Engine/Numerics/Vector2"),s=t("../../../../Engine/UI/Color"),c=t("./BlockGroup"),u=t("./Block/Block"),l=function(i){function t(t,e){void 0===t&&(t=1),void 0===e&&(e=1);var n=i.call(this,t,e)||this;n.current=null,n.next=null,n.upOffset=new a.Vector2(0,0),n.downOffset=new a.Vector2(0,-1),n.leftOffset=new a.Vector2(-1,0),n.rightOffset=new a.Vector2(1,0),n.indexOffset=1;return n.colors=["#8F1D78","#BA874C","#E9AE6A"].map(function(t){return s.Color.fromHex(t)}),n.blockGroups=c.BlockGroupHelper.getStandardGroups(),n._generateNext(),n._generateCurrent(),n.onOver=null,n.onFullRow=null,n}return o(t,i),Object.defineProperty(t.prototype,"allBlocks",{get:function(){return this._allBlocks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preBlocks",{get:function(){return this._preBlocks},enumerable:!0,configurable:!0}),t.prototype.up=function(){this._checkMoveAvaliable(this.current,this.upOffset,this.indexOffset)&&this.current.move(this.upOffset).rotate(this.indexOffset)},t.prototype.down=function(){this._checkMoveAvaliable(this.current,this.downOffset)?this.current.move(this.downOffset):this.current.location.y===this.height-1?this.over():(this._combineBlock(this.current),this._generateCurrent())},t.prototype.left=function(){this._checkMoveAvaliable(this.current,this.leftOffset)&&this.current.move(this.leftOffset)},t.prototype.right=function(){this._checkMoveAvaliable(this.current,this.rightOffset)&&this.current.move(this.rightOffset)},t.prototype.reset=function(){var i=this;this.forEach(function(t,e,n){i.set(e,n,null)})},t.prototype.over=function(){this.onOver&&this.onOver()},t.prototype.setCurrent=function(t){this.current=t},t.prototype._generateCurrent=function(){this.current=this.next,this._generateNext(),this._generateInformation()},t.prototype._generateNext=function(){var t=Math.floor(Math.random()*this.blockGroups.length),e=new a.Vector2(Math.floor(this.width*Math.random()),this.height-1),n=this.colors[Math.floor(this.colors.length*Math.random())];this.next=this.blockGroups[t].clone().setLocation(e).setColor(n).rotate()},t.prototype._generateInformation=function(){var i=this;this._allBlocks=[],this._preBlocks=[];var o=this._findMaxRow();this.forEach(function(t,e,n){i._allBlocks.push(t||new u.Block(e,n)),!t&&n<=o&&i._preBlocks.push(new u.Block(e,n))})},t.prototype._checkMoveAvaliable=function(t,e,n,i){void 0===e&&(e=a.Vector2.Zero),void 0===n&&(n=0),void 0===i&&(i=!0);for(var o=this.current.getLocations(n),r=0;r<o.length;r++){var s=o[r].add(e);if(i&&(s.x=s.x%this.width,s.x<0&&(s.x+=this.width)),s.y<0||this.get(s.x,s.y))return!1}return!0},t.prototype._combineBlock=function(t,e){var n=this;void 0===e&&(e=!0),t.getBlocks().forEach(function(t){t&&(e&&(t.location.x=t.location.x%n.width,t.location.x<0&&(t.location.x+=n.width)),n.set(t.location.x,t.location.y,t))}),this._combineFullRow()},t.prototype._combineFullRow=function(){for(var t=0,e=this._findMaxRow();0<=e;e--)this._checkFullRow(e)&&(this._clearSingleRow(e),t+=1);0<t&&(this.onFullRow&&this.onFullRow(t),this._updateBlockLocation())},t.prototype._findMaxRow=function(){for(var t=-1,e=0;e<this.height;e++)for(var n=0;n<this.width;n++)if(this.get(n,e)){t=e;break}return t},t.prototype._clearSingleRow=function(t){for(var e=0;e<this.width;e++)this.data[e].splice(t,1),this.data[e].push(null)},t.prototype._checkFullRow=function(t){for(var e=0;e<this.width;e++)if(!this.get(e,t))return!1;return!0},t.prototype._updateBlockLocation=function(){this.forEach(function(t,e,n){t&&t.setLocation(new a.Vector2(e,n))})},t}(r.Array2);n.BlockGrid=l},{"../../../../Engine/Collections/Array2":4,"../../../../Engine/Numerics/Vector2":30,"../../../../Engine/UI/Color":36,"./Block/Block":42,"./BlockGroup":44}],44:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./OffsetMap/OffsetMap"),o=t("./Block/Block"),r=t("../../../../Engine/Numerics/Vector2"),s=t("../../../../Engine/UI/Color"),a=function(){function e(){this.location=new r.Vector2(0,0),this.color=s.Colors.White,this.offsetMaps=[],this.currentIndex=0}return e.prototype.clone=function(){var t=new e;return t.location=this.location.clone(),t.color=this.color,t.offsetMaps=this.offsetMaps,t.currentIndex=this.currentIndex,t},e.prototype.setLocation=function(t){return this.location=t,this},e.prototype.setColor=function(t){return this.color=t,this},e.prototype.addOffsetMap=function(t){return this.offsetMaps.push(t),this},e.prototype.addOffsetMapRange=function(t){var e=this;return t.forEach(function(t){e.offsetMaps.push(t)}),this},e.prototype.getLocations=function(t){void 0===t&&(t=0);var e=(this.currentIndex+t)%this.offsetMaps.length;return this.offsetMaps[e].getLocations(this.location)},e.prototype.getBlocks=function(t){var e=this;void 0===t&&(t=0);var n=[];return this.getLocations(t).forEach(function(t){n.push((new o.Block).setLocation(t).setColor(e.color.clone()))}),n},e.prototype.move=function(t){return this.location=this.location.add(t),this},e.prototype.rotate=function(){return this.currentIndex=(this.currentIndex+1)%this.offsetMaps.length,this},e}();n.BlockGroup=a;var c=function(){function t(){}return t.getStandardGroups=function(){return[[{x:[0,0,0,0],y:[0,-1,-2,-3]},{x:[0,1,2,3],y:[0,0,0,0]}],[{x:[1,1,1,0],y:[0,-1,-2,-2]},{x:[0,0,1,2],y:[,-1,-1,-1]},{x:[0,1,0,0],y:[0,0,-1,-2]},{x:[0,1,2,2],y:[0,0,0,-1]}],[{x:[0,0,0,1],y:[0,-1,-2,-2]},{x:[0,1,2,0],y:[0,0,0,-1]},{x:[0,1,1,1],y:[0,0,-1,-2]},{x:[2,0,1,2],y:[0,-1,-1,-1]}],[{x:[0,1,0,1],y:[0,0,-1,-1]}],[{x:[1,2,0,1],y:[0,0,-1,-1]},{x:[0,0,1,1],y:[0,-1,-1,-2]}],[{x:[0,1,1,2],y:[0,0,-1,-1]},{x:[1,1,0,0],y:[0,-1,-1,-2]}],[{x:[0,1,2,1],y:[0,0,0,-1]},{x:[1,0,1,1],y:[0,-1,-1,-2]},{x:[1,0,1,2],y:[0,-1,-1,-1]},{x:[0,0,1,0],y:[0,-1,-1,-2]}]].map(function(t){return(new a).addOffsetMapRange(t.map(function(n){return new i.OffsetMap(n.x.map(function(t,e){return new r.Vector2(n.x[e],n.y[e])}))}))})},t}();n.BlockGroupHelper=c},{"../../../../Engine/Numerics/Vector2":30,"../../../../Engine/UI/Color":36,"./Block/Block":42,"./OffsetMap/OffsetMap":45}],45:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t){this.offsets=t}return t.prototype.setOffsets=function(t){return this.offsets=t,this},t.prototype.getLocations=function(e){var n=[];return this.offsets.forEach(function(t){n.push(e.add(t))}),n},t}();n.OffsetMap=i},{}],46:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Engine/Game/GameWorld/GameWorld"),s=t("../../Engine/Common/Inputs"),a=t("./EndlessAbyss/EndlessAbyss"),c=t("../Visuals/VisualPointer/VisualPointer"),u=t("../Resources/GalleryTexts"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"Title",{get:function(){return u.GalleryTexts.EndlessAbyssWorld.Title},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.inputs.addInput(new s.PointerInput),this.inputs.addInput(new s.KeyInput)},e.prototype.createObjects=function(){this.addChild((new a.EndlessAbyss).joint(new a.EndlessAbyssView)),this.joint(new c.VisualPointer)},e}(r.GameWorld);n.EndlessAbyssWorld=l},{"../../Engine/Common/Inputs":9,"../../Engine/Game/GameWorld/GameWorld":23,"../Resources/GalleryTexts":48,"../Visuals/VisualPointer/VisualPointer":74,"./EndlessAbyss/EndlessAbyss":41}],47:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../Engine/Resources/ConfigurationManager");n.GalleryImages={Bird:"",Galaxy:""},n.ImageResourceConfigUrl="https://general-gallery-1253318267.cos.ap-beijing.myqcloud.com/config/gallery-image.json",n.GalleryImageResourceManager=new i.ConfigurationManager(n.ImageResourceConfigUrl).attach(n.GalleryImages)},{"../../Engine/Resources/ConfigurationManager":32}],48:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../Engine/Resources/CultureResourceManager"),o=t("../../Engine/Resources/ConfigurationManager");n.GalleryTexts={Gallery:"",AudioVisualizerWorld_Title:"",GameOfLifeWorld_Title:"",LSystemTreeWorld_Title:"",ParticlesFlyerWorld_Title:"",ParticlesTreeWorld_Title:"",PartilesWalkerWorld_Title:"",EndlessAbyssWorld:{Title:"",GameName:"",GameOver:"",Tip:"",Score:""},Warnings:{OpenOnPC:{Title:"",Content:""}},Tooltips:{Restart:"",Fullscreen:""},Title:{Header:"",Description:""}},n.TextResourceConfigUrl="https://general-gallery-1253318267.cos.ap-beijing.myqcloud.com/config/gallery-i18n.json",n.GalleryTextResourceManager=new i.CultureResourceManager,n.GalleryTextResourceManager.preload=function(t){var e=new i.CultureResourceConfig;new o.ConfigurationManager(n.TextResourceConfigUrl).attach(e).load(function(){n.GalleryTextResourceManager.init(e).attach(n.GalleryTexts),t&&t()})}},{"../../Engine/Resources/ConfigurationManager":32,"../../Engine/Resources/CultureResourceManager":33}],49:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Engine/Game/GameObject/GameVisual"),s=t("../../../Engine/Common/DelayTimer"),a=t("../../../Engine/IO/FileIO"),c=t("../../../Engine/Game/GameComponents/Effect/Effect"),u=t("../../../Engine/Application/MessageBox"),l=t("../../../Engine/Game/GameObject/GameView"),h=t("../../../Engine/Drawing/Graphics"),f=t("../../../Engine/Drawing/OffscreenCanvas"),p=t("../../../Engine/Common/Inputs"),d=t("../../Resources/GalleryImages"),y=t("../../../Engine/UI/Color"),g=function(e){function t(){var t=e.call(this)||this;return t.timer=new s.DelayTimer,t.effects={ghost:new c.GhostImageEffect(d.GalleryImages.Galaxy,.1,!1)},t.joint(t.effects.ghost),t}return o(t,e),Object.defineProperty(t.prototype,"fftData",{get:function(){return this.audioAnalyzer.getByteFrequencyData(this.frequncyBytes),this.frequncyBytes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeDomainData",{get:function(){return this.audioAnalyzer.getByteTimeDomainData(this.timeDomainBytes),this.timeDomainBytes},enumerable:!0,configurable:!0}),t.prototype.start=function(){var e=this;this.initAudio(),this.on(p.InputEvents.Drop,function(t){e.loadFile(t.dataTransfer.files[0])}),this.on(p.InputEvents.PointerClicked,function(){a.FileIO.openFileDialog(function(t){e.loadFile(t.target.files[0])},"audio/*")})},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.audioContext.close(),this.audio&&this.audio.remove()},t.prototype.initAudio=function(){this.audioContext=new AudioContext,this.audio=document.createElement("audio"),this.audio.loop=!0,document.body.appendChild(this.audio),this.audioSource=this.audioContext.createMediaElementSource(this.audio),this.audioAnalyzer=this.audioContext.createAnalyser(),this.fftSize=1200<this.world.width?2048:1024,this.audioAnalyzer.fftSize=this.fftSize,this.frequncyBytes=new Uint8Array(this.audioAnalyzer.frequencyBinCount),this.timeDomainSize=2*this.audioAnalyzer.frequencyBinCount,this.timeDomainBytes=new Uint8Array(this.timeDomainSize),this.audioSource.connect(this.audioAnalyzer),this.audioAnalyzer.connect(this.audioContext.destination),this.fileInfo={name:"",playing:!1}},t.prototype.loadFile=function(t){t&&0===t.type.indexOf("audio")?(this.audio.src=URL.createObjectURL(t),this.audio.autoplay=!0,this.audio.play(),this.fileInfo.playing=!0,this.fileInfo.name=t.name.split(".")[0]):u.MessageBox.show("Please select a valid audio file.")},t}(r.GameVisual);n.AudioVisualizer=g;var m=function(e){function t(){var t=e.call(this)||this;return t.rotation=0,t.rotation2=0,t.rotation3=0,t}return o(t,e),t.prototype.render=function(e,t){var n=this;this.innerCanvas||(this.innerCanvas=new f.OffscreenCanvas(t.canvas.width,t.canvas.height)),this.innerCanvas.draw(function(t){n.drawDynamic(e,t)}).output(t,0,0),this.drawStatic(e,t)},t.prototype.drawDynamic=function(t,e){var n=this,i=t.world.width,o=t.world.height,r=i/2,s=o/2,a=t.fftData,c=a.reduce(function(t,e){return t+e},0)/a.length/255,u=c*Math.min(i,o)/10;if(this.rotation2=c,t.effects.ghost.effect(e),t.fileInfo.playing)this.rotation+=.001,h.Graphics.scaleOffset(e,u,u,.9),h.Graphics.rotate(e,this.rotation+c,1,function(){n.drawFFT(t,e,i,o,r,s,1+10*c)}),h.Graphics.rotate(e,Math.PI*(c/2),1,function(){e.drawImage(e.canvas,0,0,i,o)}),h.Graphics.mirror(e,-(1+c/3),-(1+c/3),.6,function(){e.drawImage(e.canvas,0,0)});else{this.rotation3+=.04;var l=2*Math.sin(this.rotation3)-1;h.Graphics.scaleOffset(e,l,l,.96),this.drawText(t,e,i,o,r,s,1),h.Graphics.mirror(e,1,-1,.2,function(){e.drawImage(e.canvas,0,0)})}},t.prototype.drawText=function(t,e,n,i,o,r,s){void 0===s&&(s=1);var a=Math.max(n/30,32);e.font=a+"px Arial",e.textAlign="center",e.fillStyle=new y.Color(255,255,255,1).rgba,e.fillText("Drag an audio file here.",o,r-a/2.5),e.fillRect(0,r-2,n,4)},t.prototype.drawFFT=function(t,e,n,i,o,r,s){void 0===s&&(s=1);var a=t.fftData,c=Math.min(n,i)/2,u=Math.min(n,i)/10;e.beginPath();for(var l=0;l<a.length;l++){var h=a[l],f=l/a.length*c+c,p=r+h+Math.sin(f/(100+Math.sin(this.rotation2)*u/2))*u;e.lineTo(f,p)}e.lineWidth=n/a.length*s,e.strokeStyle="#FFFFFF",e.stroke()},t.prototype.drawTimeDomain=function(t,e,n,i,o,r,s){void 0===s&&(s=1);var a=t.timeDomainData,c=.001*n,u=n-2*c;e.beginPath();for(var l=0;l<a.length;l++){var h=a[l],f=l/a.length*u+c,p=r+h-128;e.lineTo(f,p)}e.lineWidth=n/a.length*s,e.strokeStyle="#FFFFFF",e.stroke()},t.prototype.drawStatic=function(t,e){var n=t.world.width,i=t.world.height;this.drawFileinfo(t,e,n,i)},t.prototype.drawFileinfo=function(t,e,n,i){var o=t.fileInfo;if(o.playing){var r=Math.max(n/48,16),s=.1*n,a=.8*i;e.font=r+"px Arial",e.textAlign="left",e.fillStyle="#FFF",e.fillText(o.name,s,a);var c=.8*n,u=c*(t.audio.currentTime/t.audio.duration);e.strokeStyle="#FFF",e.strokeRect(s+u,a+r,c-u,r/3),e.fillRect(s,a+r,u,r/3)}},t}(l.GameView);n.AudioVisualizerView=m},{"../../../Engine/Application/MessageBox":3,"../../../Engine/Common/DelayTimer":5,"../../../Engine/Common/Inputs":9,"../../../Engine/Drawing/Graphics":15,"../../../Engine/Drawing/OffscreenCanvas":16,"../../../Engine/Game/GameComponents/Effect/Effect":19,"../../../Engine/Game/GameObject/GameView":21,"../../../Engine/Game/GameObject/GameVisual":22,"../../../Engine/IO/FileIO":25,"../../../Engine/UI/Color":36,"../../Resources/GalleryImages":47}],50:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Engine/Game/GameWorld/GameWorld"),s=t("../../Engine/Common/Inputs"),a=t("./AudioVisualizer/AudioVisualizer"),c=t("../Resources/GalleryTexts"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"Title",{get:function(){return c.GalleryTexts.AudioVisualizerWorld_Title},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.inputs.addInput(new s.PointerInput),this.inputs.addInput(new s.DragDropInput)},e.prototype.createObjects=function(){this.addChild((new a.AudioVisualizer).joint(new a.AudioVisualizerView))},e}(r.GameWorld);n.AudioVisualizerWorld=u},{"../../Engine/Common/Inputs":9,"../../Engine/Game/GameWorld/GameWorld":23,"../Resources/GalleryTexts":48,"./AudioVisualizer/AudioVisualizer":49}],51:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){void 0===e&&(e=0),this.color=t,this.scale=e}return t.prototype.setColor=function(t){return this.color=t,this},t}();n.Cell=i;var o=function(t){void 0===t&&(t=0),this.scale=t};n.ScaleCell=o},{}],52:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var h=t("../../../Engine/UI/Color"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.generate=function(){return new e(this.width,this.height)},e.prototype.around=function(t,e,n,i){for(var o=0,r=0;r<8;r++){var s=t+n[r],a=e+i[r];this.data[s]&&this.data[s][a]&&(o+=1)}return o},e.prototype.aroundColor=function(t,e,n,i){for(var o=0,r=0,s=0,a=0,c=0;c<8;c++){var u=t+n[c],l=e+i[c];this.data[u]&&this.data[u][l]&&(o+=this.data[u][l].color.r,r+=this.data[u][l].color.g,s+=this.data[u][l].color.b,a+=1)}return new h.Color(o/a,r/a,s/a)},e.prototype.grow=function(e){void 0===e&&(e=.001),this.forEach(function(t){t&&t.scale<1&&(t.scale+=e)})},e}(t("../../../Engine/Collections/Array2").Array2);n.CellularAutomata=r},{"../../../Engine/Collections/Array2":4,"../../../Engine/UI/Color":36}],53:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Engine/Game/GameObject/GameVisual"),s=t("../../../../Engine/Game/GameComponents/Effect/Effect"),l=t("../../../../Engine/UI/Color"),a=t("../CellularAutomata"),h=t("../../../../Engine/Numerics/Vector2"),c=t("../Cell"),u=t("../../../../Engine/Game/GameObject/GameView"),f=t("../../../../Engine/Drawing/Graphics"),p=t("../../../../Engine/Common/DelayTimer"),d=t("../../../../Engine/Common/Inputs"),y=function(e){function t(){var t=e.call(this)||this;return t.ghost=new s.GhostEffect(new l.Color(0,0,0,.08),10),t.joint(t.ghost),t.timers={generate:new p.DelayTimer,exchange:new p.DelayTimer,grow:new p.DelayTimer},t.settings={xOffsets:[-1,0,1,1,1,0,-1,-1],yOffsets:[-1,-1,-1,0,1,1,1,0],progress:0,sin:Math.PI,size:0,initialSize:16,rangeSize:16,rotation:0},t}return o(t,e),Object.defineProperty(t.prototype,"offset",{get:function(){if(this.settings&&this.automata){var t=this.settings.size,e=this.settings.initialSize,n=-(t-e)*this.automata.width/2,i=-(t-e)*this.automata.height/2;return new h.Vector2(n,i)}return null},enumerable:!0,configurable:!0}),t.prototype.start=function(){var i=this,t=this.world.width,e=this.world.height;this.settings.rangeSize=Math.min(t,e)/16,this.settings.initialSize=Math.min(t,e)/60;var n=Math.round(t/this.settings.initialSize),o=Math.round(e/this.settings.initialSize);this.automata=new a.CellularAutomata(n,o),this.automata.forEach(function(t,e,n){.9<Math.random()&&(i.automata.data[e][n]=new c.ScaleCell)}),this._bindEvents()},t.prototype.update=function(){var e=this;this.timers.exchange.delay(1e3,function(){e.settings.progress=0,e._exchange(e.automata)},function(t){e.settings.progress=t/1e3}),this.timers.generate.delay(1e3,function(){e._generate()}),this.timers.grow.delay(100,function(){e.automata.grow(.005)}),this.settings.rotation+=1e-4,this.settings.sin+=5e-4,this.settings.size=this.settings.initialSize+Math.sin(this.settings.sin)*this.settings.rangeSize+this.settings.rangeSize},t.prototype._bindEvents=function(){var t=this;this.on(d.InputEvents.PointerMoved,function(){t._delete()}),this.on(d.InputEvents.PointerPressed,function(){t._delete()})},t.prototype._delete=function(){if(this.world.inputs.pointer.isPressed)for(var t=new h.Vector2(this.world.width/2,this.world.height/2),e=this.world.inputs.pointer.position,n=t.add(e.subtract(t).rotate(-this.settings.rotation)).subtract(this.offset),i=Math.round(n.x/this.settings.size),o=Math.round(n.y/this.settings.size),r=0;r<4;r++){var s=i+Math.round(2*Math.random()-1),a=o+Math.round(2*Math.random()-1);this.automata.data[s][a]=null}},t.prototype._generate=function(){var o=this,r=this.automata.generate();this.automata.forEach(function(t,e,n){var i=o.automata.around(e,n,o.settings.xOffsets,o.settings.yOffsets);t?2!==i&&3!==i&&4!==i||(r.data[e][n]=o.automata.data[e][n]):3===i&&(r.data[e][n]=new c.ScaleCell)}),this.automata=r},t.prototype._exchange=function(t){var e=t.data.splice(0,1);t.data.push(e[0])},t}(r.GameVisual);n.GameOfLife=y;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(t,s){var a=t.offset,c=t.settings.size,u=1-t.settings.progress;f.Graphics.scaleOffset(s,-4,-4,1),f.Graphics.rotate(s,t.settings.rotation,1,function(){s.beginPath(),t.automata.forEach(function(t,e,n){if(t){var i=new h.Vector2((e+u)*c,n*c).add(a),o=c*t.scale,r=o/2;s.rect(i.x-r,i.y-r,o,o)}}),s.fillStyle=l.Colors.White.rgba,s.fill()})},e}(u.TypedGameView);n.GameOfLifeView=g},{"../../../../Engine/Common/DelayTimer":5,"../../../../Engine/Common/Inputs":9,"../../../../Engine/Drawing/Graphics":15,"../../../../Engine/Game/GameComponents/Effect/Effect":19,"../../../../Engine/Game/GameObject/GameView":21,"../../../../Engine/Game/GameObject/GameVisual":22,"../../../../Engine/Numerics/Vector2":30,"../../../../Engine/UI/Color":36,"../Cell":51,"../CellularAutomata":52}],54:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Engine/Game/GameWorld/GameWorld"),s=t("../../Engine/Common/Inputs"),a=t("./CA/GameOfLife/GameOfLife"),c=t("../Resources/GalleryTexts"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"Title",{get:function(){return c.GalleryTexts.GameOfLifeWorld_Title},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.inputs.addInput(new s.PointerInput)},e.prototype.createObjects=function(){this.addChild((new a.GameOfLife).joint(new a.GameOfLifeView))},e}(r.GameWorld);n.GameOfLifeWorld=u},{"../../Engine/Common/Inputs":9,"../../Engine/Game/GameWorld/GameWorld":23,"../Resources/GalleryTexts":48,"./CA/GameOfLife/GameOfLife":53}],55:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./Rule/RuleSet"),o=t("./State/State"),r=function(){function t(){this.states=[],this.ruleSets={}}return t.prototype.initRoot=function(t){this.root=t,this.states=[],this.states.push(t)},t.prototype.addRule=function(t){this.ruleSets[t.target]||(this.ruleSets[t.target]=new i.RuleSet),this.ruleSets[t.target].add(t)},t.prototype.generate=function(t){var i=this;void 0===t&&(t=1);for(var e=function(e){var n=[];o.states.forEach(function(t){i.ruleSets[t.value]?t.children=i.ruleSets[t.value].generate(t,e):t.children=i.getDefaultState(t),i.combineArray(n,t.children)}),o.states=[],o.combineArray(o.states,n)},o=this,n=0;n<t;n++)e(n)},t.prototype.getDefaultState=function(t){var e=[];return e.push(new o.State(t.value,t,t.generation+1)),e},t.prototype.combineArray=function(e,t){t.forEach(function(t){e.push(t)})},t}();n.LSystem=r},{"./Rule/RuleSet":58,"./State/State":59}],56:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Engine/Game/GameObject/GameVisual"),c=t("./State/State"),u=t("./LSystem"),l=t("./Rule/RuleBase"),s=t("../../../Engine/Game/GameObject/GameView"),h=t("../../../Engine/UI/Color"),f=t("../../../Engine/Numerics/Vector2"),p=t("../../../Engine/Numerics/Random"),d=t("../../../Engine/Common/Inputs"),y=t("../../../Engine/Game/GameComponents/Effect/Effect"),a=t("../../../Engine/Drawing/Graphics"),g=function(a){function t(){var e=a.call(this)||this;e.offset=f.Vector2.Zero,e.lineLengthRatio=3,e.depth=3,e.letters=["F","[","]","+","-",".","*","(",")","R","G","B","r","g","b"],e.letters1=["F","[","]","+","-",".","*","(",")","R","G","B","r","g","b"],e.letters2=["F","]","[","-","+","*",".",")","(","r","g","b","R","G","B"],e.random=new p.Random,e.lSystem=new u.LSystem,e.lSystem.initRoot(new c.State("F",null,0));for(var t=window.document.body.clientWidth/50,n=0;n<e.depth;n++)for(var i=0;i<e.letters.length;i++)e.lSystem.addRule(new l.RuleGrammar(e.letters[i],e.generate(t)));e.lSystem.generate(e.depth);var o,r,s=!1;return e.on(d.InputEvents.PointerPressed,function(){s=!0,o=e.world.inputs.pointer.position,r=e.offset.clone()}),e.on(d.InputEvents.PointerMoved,function(){if(s){var t=e.world.inputs.pointer.position;e.offset=r.add(t.subtract(o))}}),e.on(d.InputEvents.PointerReleased,function(){s=!1}),e.on(d.InputEvents.MouseWheel,function(t){e.lineLengthRatio*=Math.pow(1.2,Math.sign(t.deltaY))}),e.joint(new y.GhostEffect(new h.Color(0,128,128,.006),40)),e}return o(t,a),Object.defineProperty(t.prototype,"states",{get:function(){return this.lSystem.states},enumerable:!0,configurable:!0}),t.prototype.generate=function(t){void 0===t&&(t=50);for(var e=this.random.normal(1,t),n="",i="",o=0;o<e;o++){var r=Math.floor(Math.random()*this.letters.length);n+=this.letters1[r],.5<Math.random()?i+=this.letters2[r]:i=this.letters2[r]+i}return n+"F"+i},t}(r.GameVisual);n.LSystemTree=g;var m=function(e){function t(){var t=e.call(this)||this;return t.centerStack=[],t.offsetStack=[],t.lengthStack=[],t.lineWidthStack=[],t.currentIndex=0,t.lineWidthRatio=1,t.lineColor=new h.Color(255,255,255,1),t.singleNumber=0,t.rotateRatio=6,t.animation=!0,t}return o(t,e),t.prototype.render=function(t,e){this.animation&&(this.singleNumber=(this.singleNumber+.01*Math.random())%(2*Math.PI),this.rotateRatio=6.2+2.3*Math.sin(this.singleNumber),this.centerStack=[],this.offsetStack=[],this.lengthStack=[],this.currentIndex=0,this.lineColor=new h.Color(128,218,128,1),a.Graphics.scaleOffset(e,8,8*e.canvas.height/e.canvas.width,.99)),!this.animation&&this.center||(this.center=new f.Vector2(t.world.width/2,.7*t.world.height).add(t.offset),this.lengthOfLine=t.world.height*(1/Math.pow(3,t.depth+1))*t.lineLengthRatio,this.offset=new f.Vector2(0,-this.lengthOfLine));for(var n=0,i=this.animation?1e4:1e3,o=t.states,r=this.currentIndex;r<o.length&&(this.mapped(o[r].value,e),this.currentIndex=r+1,!(i<(n+=1)));r++);},t.prototype.mapped=function(t,e){switch(t){case"F":this.drawCircleBranch(e,this.center,this.offset),this.center=this.center.add(this.offset);break;case"+":this.offset=this.offset.rotate(Math.PI/this.rotateRatio);break;case"-":this.offset=this.offset.rotate(-Math.PI/this.rotateRatio);break;case".":this.lengthOfLine+=10,this.offset.setLength(this.lengthOfLine);break;case"*":this.lengthOfLine-=10,this.offset.setLength(this.lengthOfLine);break;case"(":this.rotateRatio*=.5;break;case")":this.rotateRatio/=.5;break;case"R":this.lineColor.r+=25,255<this.lineColor.r&&(this.lineColor.r=255);break;case"G":this.lineColor.g+=25,255<this.lineColor.g&&(this.lineColor.g=255);break;case"B":this.lineColor.b+=25,255<this.lineColor.b&&(this.lineColor.b=255);break;case"r":this.lineColor.r-=25,this.lineColor.r<0&&(this.lineColor.r=0);break;case"g":this.lineColor.g-=25,this.lineColor.g<0&&(this.lineColor.g=0);break;case"b":this.lineColor.b-=25,this.lineColor.b<0&&(this.lineColor.b=0);break;case"[":this.centerStack.push(this.center.clone()),this.offsetStack.push(this.offset.clone()),this.lengthStack.push(this.lengthOfLine);break;case"]":this.center=this.centerStack.pop()||this.center,this.offset=this.offsetStack.pop()||this.offset,this.lengthOfLine=this.lengthStack.pop()||this.lengthOfLine}},t.prototype.drawLineBranch=function(t,e,n,i,o){void 0===i&&(i=1);var r=e.add(n);t.strokeStyle=o.rgb,t.lineWidth=i,t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(r.x,r.y),t.closePath(),t.stroke()},t.prototype.drawCircleBranch=function(t,e,n){var i=e.add(n.multiply(.5));t.beginPath(),t.arc(i.x,i.y,n.length/2,0,2*Math.PI,!1),t.closePath(),t.fillStyle=this.lineColor.rgba,t.fill()},t}(s.GameView);n.LSystemTreeView=m},{"../../../Engine/Common/Inputs":9,"../../../Engine/Drawing/Graphics":15,"../../../Engine/Game/GameComponents/Effect/Effect":19,"../../../Engine/Game/GameObject/GameView":21,"../../../Engine/Game/GameObject/GameVisual":22,"../../../Engine/Numerics/Random":28,"../../../Engine/Numerics/Vector2":30,"../../../Engine/UI/Color":36,"./LSystem":55,"./Rule/RuleBase":57,"./State/State":59}],57:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("../State/State"),o=function(){function t(t,e){void 0===e&&(e=""),this.target=t,this.states=e.split("")}return t.prototype.generate=function(e){var n=[];return this.states.forEach(function(t){n.push(new i.State(t,e,e.generation+1))}),n},t}();n.RuleGrammar=o},{"../State/State":59}],58:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){this.rules=[]}return t.prototype.add=function(t){this.rules.push(t)},t.prototype.generate=function(t,e){void 0===e&&(e=0);var n=this.rules[e]||this.rules[0];return n?n.generate(t):[t.next()]},t}();n.RuleSet=i},{}],59:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e,n){this.value=t,this.parent=e,this.children=[],this.generation=n}return t.prototype.next=function(){return new t(this.value,this.parent,this.generation+1)},t}();n.State=i},{}],60:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Engine/Game/GameWorld/GameWorld"),s=t("./LSystem/LSystemTree"),a=t("../Resources/GalleryTexts"),c=t("../../Engine/Common/Inputs"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"Title",{get:function(){return a.GalleryTexts.LSystemTreeWorld_Title},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.inputs.addInput(new c.PointerInput)},e.prototype.createObjects=function(){this.addChild((new s.LSystemTree).joint(new s.LSystemTreeView))},e}(r.GameWorld);n.LSystemTreeWorld=u},{"../../Engine/Common/Inputs":9,"../../Engine/Game/GameWorld/GameWorld":23,"../Resources/GalleryTexts":48,"./LSystem/LSystemTree":56}],61:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.forEach(function(t,e,n){i.data[e][n]=[]}),i.offsetX=[0,-1,0,1,1,1,0,-1,-1],i.offsetY=[0,-1,-1,-1,0,1,1,1,0],i}return o(t,n),t.prototype.clear=function(){this.forEach(function(t){t.splice(0,t.length)})},t.prototype.neighbours=function(t,e){for(var n=[],i=0;i<9;i++){var o=t+this.offsetX[i],r=e+this.offsetY[i];0<=o&&o<this.width&&0<=r&&r<this.height&&n.push.apply(n,this.data[o][r])}return n},t}(t("../../../../Engine/Collections/Array2").Array2);n.ArrayGrid=r},{"../../../../Engine/Collections/Array2":4}],62:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Particle/DynamicParticle"),a=t("../../../../Engine/Numerics/Vector2"),s=function(o){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=0);var i=o.call(this,t,e,n)||this;return i.velocityUpon=5,i.neighbourDistance=400,i}return r(t,o),t.prototype.update=function(t,e,n){this.alignspeed(t),this.seperate(t),this.cohesion(t),n&&this.follow(n,3),this.move()},t.prototype.alignspeed=function(t){var i=this,o=new a.Vector2,r=0;if(this._forEachDistance(t,function(t,e,n){n<i.neighbourDistance&&(o=o.add(t.velocity),r++)}),0<r){(o=o.divide(r)).limitLength(this.velocityUpon);var e=o.subtract(this.velocity);e.limitLength(1),this.applyForce(e)}},t.prototype.seperate=function(t,e){var o=this;void 0===e&&(e=1);var r=new a.Vector2,s=0;if(this._forEachDistance(t,function(t,e,n){var i=(o.size+t.size)/2+5;0<n&&n<i&&(e.normalize(),e.divide(n),r=r.add(e),s++)}),0<s){(r=r.divide(s)).normalize(),r.multiply(this.velocityUpon);var n=r.subtract(this.velocity);n.limitLength(10),this.applyForce(n.multiply(e))}},t.prototype.cohesion=function(t){var i=this,o=new a.Vector2,r=0;if(this._forEachDistance(t,function(t,e,n){n<i.neighbourDistance&&(o=o.add(t.location),r++)}),0<r){o=o.divide(r);var e=this.seek(o);e.limitLength(.1),this.applyForce(e)}},t.prototype.follow=function(t,e){void 0===e&&(e=1),this.applyForce(this.seek(t).multiply(e))},t.prototype.checkRadius=function(t,e){void 0===e&&(e=100);var n=this.location.subtract(t).length,i=175+80*Math.max(.1,Math.min(1,1-n/e)),o=this.color.r+.5*Math.sign(i-this.color.r)*10;this.color.r=this.color.g=this.color.b=o},t.prototype.checkBorder=function(t){var e=this.location,n=t.width,i=t.height,o=this.size/2+10,r=this.size/2+10;e.x<o?(e.x=o,this.velocity.x*=-1):e.x>n-o&&(e.x=n-o,this.velocity.x*=-1),e.y<r?(e.y=r,this.velocity.y*=-1):e.y>i-r&&(e.y=i-r,this.velocity.y*=-1)},t.prototype.seek=function(t){return this._seek(this.location,t,this.velocity)},t.prototype._seek=function(t,e,n){var i=e.subtract(t);i.normalize(),i.multiply(this.velocityUpon);var o=i.subtract(n);return o.limitLength(1),o},t.prototype._forEachDistance=function(t,i){var o=this;t.forEach(function(t){var e=o.location.subtract(t.location),n=e.length;i&&i(t,e,n)})},t}(o.DynamicParticle);n.FlyerParticle=s},{"../../../../Engine/Numerics/Vector2":30,"../Particle/DynamicParticle":65}],63:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../ParticleSystem"),s=t("../../../../Engine/Numerics/Random"),a=t("../../../../Engine/Game/GameComponents/Effect/Effect"),f=t("../../../../Engine/UI/Color"),p=t("../../../../Engine/Numerics/Vector2"),c=t("./ArrayGrid"),u=t("../../../../Engine/Drawing/Graphics"),l=t("../../../../Engine/Game/GameObject/GameView"),d=t("./FlyerParticle"),h=t("../../../../Engine/Drawing/OffscreenCanvas"),y=t("../../../Resources/GalleryImages"),g=function(e){function t(){var t=e.call(this)||this;return t.random=new s.Random,t.ghost=new a.GhostEffect(new f.Color(0,0,255,.1),10,!1),t.joint(t.ghost),t}return o(t,e),t.prototype.start=function(){var t=this.world.width,e=this.world.height,n=new p.Vector2(.5*t,.5*e);this.flyers=[];for(var i=new p.Vector2(t,e).length,o=Math.floor(i/16)/2,r=Math.floor(i/60),s=.8*t,a=.8*e,c=0;c<o;c++){(h=new d.FlyerParticle).location=n.add(new p.Vector2(s*Math.random()-s/2,a*Math.random()-a/2)),h.velocity=new p.Vector2(10*Math.random()-5,10*Math.random()-5),h.size=this.random.normal(10,10+r),h.color=f.Colors.White,this.flyers.push(h)}this.particles=this.flyers,this.blocks=[];var u=2*s,l=2*a;for(c=0;c<5;c++){var h;(h=new d.FlyerParticle).location=n.add(new p.Vector2(u*Math.random()-u/2,l*Math.random()-l/2)),h.velocity=new p.Vector2(0,0),h.size=20+r*Math.random()*20,h.color=f.Colors.Gray,this.blocks.push(h)}this.revolution=200,this.grid=this.createGrid(t,e,this.revolution),this.offset=new p.Vector2(0,0),0===this.world.inputs.pointer.position.length&&(this.world.inputs.pointer.position=new p.Vector2(t/2,e/2))},t.prototype.update=function(){var e=this,t=this.world.width,n=this.world.height,i=new p.Vector2(t/2,n/2);this.offset=this.getAverateLocation(this.particles).subtract(i);var o=null;this.world.inputs.pointer.isPressed&&(o=this.world.inputs.pointer.position.add(this.offset)),this.flyers.forEach(function(t){t.update(e.flyers,e.blocks,o)})},t.prototype.createGrid=function(t,e,n){void 0===n&&(n=10);var i=Math.ceil(t/n),o=Math.ceil(e/n);return new c.ArrayGrid(i,o)},t.prototype.allocateGrid=function(n,t,i,o){var r=this;void 0===o&&(o=10),t.forEach(function(t){var e=r.mapLocation(t.location.subtract(i),o);e.x=Math.min(n.width-1,Math.max(0,e.x)),e.y=Math.min(n.height-1,Math.max(0,e.y)),n.get(e.x,e.y).push(t)})},t.prototype.mapLocation=function(t,e){var n=Math.floor(t.x/e),i=Math.floor(t.y/e);return new p.Vector2(n,i)},t.prototype.getAverateLocation=function(t){if(0<t.length){var e=new p.Vector2;return t.forEach(function(t){e=e.add(t.location)}),e.divide(t.length)}return new p.Vector2},t}(r.ParticlesBase);n.ParticlesFlyer=g;var m=function(e){function t(){var t=e.call(this)||this;return t.joint(new v),t.joint(new w),t}return o(t,e),t.prototype.render=function(t,e){this.target=t,e.fillStyle="#FFFFFF",e.fillRect(0,0,e.canvas.width,e.canvas.height)},t}(l.GameView);n.ParticlesFlyerView=m;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(e,t){var n=this;this.backLayer||(this.backLayer=new h.OffscreenCanvas(t.canvas.width,t.canvas.height)),e=e.target,this.backLayer.draw(function(t){u.Graphics.clear(t).hold(t,function(){t.translate(-e.offset.x,-e.offset.y),n.drawGrid(t,e.world.size,e.offset),t.translate(e.offset.x,e.offset.y)})}).output(t,0,0)},e.prototype.drawGrid=function(t,e,n){var i=Math.max(e.width,e.height)/20,o=Math.ceil(e.width/i)+1,r=Math.ceil(e.height/i)+1,s=Math.ceil(n.x/i),a=Math.ceil(n.y/i),c=s*i,u=a*i;t.beginPath();for(var l=-1;l<o;l++)for(var h=l*i+c,f=-1;f<r;f++)if((l+f+s+a)%2==0){var p=f*i+u;t.rect(h,p,i,i)}t.closePath(),t.fillStyle="rgba(0,0,0,0.05)",t.fill()},e}(l.GameView),w=function(e){function t(){var t=e.call(this)||this;return t.bird=new Image(128,128),t.bird.src=y.GalleryImages.Bird,t}return o(t,e),t.prototype.render=function(n,i){var o=this;this.mainLayer||(this.mainLayer=new h.OffscreenCanvas(i.canvas.width,i.canvas.height),this.cache=new h.OffscreenCanvas(i.canvas.width,i.canvas.height)),n=n.target,this.mainLayer.draw(function(t){u.Graphics.clear(t).hold(t,function(e){n.ghost.effect(e),e.drawImage(o.cache.canvas,0,0),i.globalAlpha=.1,i.drawImage(o.mainLayer.canvas,0,0),i.globalAlpha=1,e.translate(-n.offset.x,-n.offset.y),n.particles.forEach(function(t){o.drawBirdImage(e,t)}),u.Graphics.shadow(e,3,"rgba(0,0,0,0.38)",3,3,function(){o.drawInfo(e,n.world.size)}),e.translate(n.offset.x,n.offset.y)})}).output(i,0,0),this.cache.draw(function(t){u.Graphics.clear(t),t.globalAlpha=.6,t.drawImage(o.mainLayer.canvas,0,0)})},t.prototype.drawParticle=function(t,e){var n=e.location;t.beginPath(),t.arc(n.x,n.y,e.size/2,0,2*Math.PI,!1),t.closePath(),t.fillStyle=e.color.rgba,t.fill()},t.prototype.drawBirdImage=function(t,e){var n=this,i=e.location,o=e.velocity,r=e.size/2,s=2*r;u.Graphics.hold(t,function(){t.translate(i.x,i.y),t.rotate(Math.atan2(o.y,o.x)+Math.PI/2),t.translate(-i.x,-i.y),t.drawImage(n.bird,i.x-r,i.y-r,s,s)})},t.prototype.drawInfo=function(t,e){var n=Math.max(e.width/20,32);t.font=n+"px Arial",t.textAlign="center",t.fillStyle="#FFF",t.fillText("Press And Move Pointer!",e.center.x,e.center.y)},t}(l.GameView)},{"../../../../Engine/Drawing/Graphics":15,"../../../../Engine/Drawing/OffscreenCanvas":16,"../../../../Engine/Game/GameComponents/Effect/Effect":19,"../../../../Engine/Game/GameObject/GameView":21,"../../../../Engine/Numerics/Random":28,"../../../../Engine/Numerics/Vector2":30,"../../../../Engine/UI/Color":36,"../../../Resources/GalleryImages":47,"../ParticleSystem":66,"./ArrayGrid":61,"./FlyerParticle":62}],64:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../Engine/UI/Color"),o=t("../../../Engine/Numerics/Vector2"),r=function(t,e,n){void 0===t&&(t=o.Vector2.Zero),void 0===e&&(e=1),void 0===n&&(n=0),this.location=t,this.size=e,this.age=n,this.color=new i.Color(0,0,0,1),this.dead=!1};n.Particle=r},{"../../../Engine/Numerics/Vector2":30,"../../../Engine/UI/Color":36}],65:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Particle"),s=t("../../../../Engine/Numerics/Vector2"),a=function(o){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=0);var i=o.call(this,t,e,n)||this;return i.velocity=new s.Vector2(0,0),i.acceleration=new s.Vector2(0,0),i.mass=10,i.velocityUpon=Number.POSITIVE_INFINITY,i}return r(t,o),t.prototype.applyForce=function(t){this.acceleration=this.acceleration.add(t.divide(this.mass))},t.prototype.move=function(){this.velocity=this.velocity.add(this.acceleration),this.velocity.limitLength(this.velocityUpon),this.location=this.location.add(this.velocity),this.acceleration=new s.Vector2(0,0)},t.prototype.moveTo=function(t){this.location=t,this.velocity.setLength(0)},t}(o.Particle);n.DynamicParticle=a},{"../../../../Engine/Numerics/Vector2":30,"../Particle":64}],66:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.particles=[],t}return o(t,e),t}(t("../../../Engine/Game/GameObject/GameVisual").GameVisual);n.ParticlesBase=r},{"../../../Engine/Game/GameObject/GameVisual":22}],67:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Engine/UI/Color"),s=t("../../../../Engine/Numerics/Vector2"),a=t("../../../../Engine/Numerics/Random"),c=t("../ParticleSystem"),u=t("./SpotParticle"),l=t("../../../../Engine/Game/GameObject/GameView"),h=t("../../../../Engine/Drawing/Graphics"),f=t("../../../../Engine/Drawing/OffscreenCanvas"),p=t("../../../../Engine/Game/GameComponents/Effect/Effect"),d=function(e){function t(){var t=e.call(this)||this;return t.spots=[],t.generation=[],t.random=new a.Random,t.settings={update:!0,updateIndex:0,updateMax:1e3,drawIndex:0,drawMax:1e3},t.joint(new p.GhostEffect(new r.Color(0,128,128,.006),30)),t}return o(t,e),t.prototype.start=function(){var t=Math.min(this.world.width,this.world.height),e=t/2500*Math.log10(t),n=new s.Vector2(this.world.width/2,.5*this.world.height+.8*t),i=new u.SpotParticle(n);i.velocity=new s.Vector2(0,-16*e),i.size=256*e,i.age=20,i.color=new r.Color(0,0,0,1),this.spots.push(i),this.particles=this.spots},t.prototype.update=function(){var t;if(this.settings.update){for(var e=0,n=this.settings.updateIndex;n<this.spots.length;n++){if(this.spots[n].update(this.generation,Math.ceil(this.random.normal(1,3))),e+=1,this.settings.updateIndex+=1,e>this.settings.updateMax)break}this.settings.updateIndex>=this.spots.length&&(this.settings.updateIndex=0,this.settings.update=!1,(t=this.spots).push.apply(t,this.generation),this.generation=[],this.spots=this.spots.filter(function(t){return!t.isDead}),this.particles=this.spots)}},t}(c.ParticlesBase);n.ParticlesTree=d;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(e,t){var n=this;this.backLayer||(this.backLayer=new f.OffscreenCanvas(t.canvas.width,t.canvas.height)),h.Graphics.scaleOffset(t,12,12*t.canvas.height/t.canvas.width,1),this.backLayer.draw(function(t){n.drawByFillCircle(e,t)}).output(t,0,0)},e.prototype.drawByFillCircle=function(t,e){for(var n=2*Math.PI,i=0,o=t.settings.drawIndex;o<t.particles.length;o++){var r=t.particles[o],s=r.location;if(e.beginPath(),e.arc(s.x,s.y,r.size/2,0,n,!1),e.fillStyle=r.color.rgb,e.fill(),i+=1,t.settings.drawIndex+=1,i>t.settings.drawMax)return}t.settings.drawIndex=0,t.settings.update=!0},e}(l.GameView);n.ParticlesTreeView=y},{"../../../../Engine/Drawing/Graphics":15,"../../../../Engine/Drawing/OffscreenCanvas":16,"../../../../Engine/Game/GameComponents/Effect/Effect":19,"../../../../Engine/Game/GameObject/GameView":21,"../../../../Engine/Numerics/Random":28,"../../../../Engine/Numerics/Vector2":30,"../../../../Engine/UI/Color":36,"../ParticleSystem":66,"./SpotParticle":68}],68:[function(t,e,n){"use strict";var i,s=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Particle/DynamicParticle"),a=t("../../../../Engine/Numerics/Random"),c=t("../../../../Engine/Numerics/Vector2"),u=t("../../../../Engine/UI/Color"),r=function(o){function r(t,e,n){void 0===e&&(e=1),void 0===n&&(n=0);var i=o.call(this,t,e,n)||this;return i.angleOffset=.024*Math.random()-.012,i.velocityUpon=16,i.random=new a.Random,i}return s(r,o),r.prototype.update=function(t,e){0<this.age&&(this.age-=1,this.size=this.size*l.sizeRadius,this.velocity=this.velocity.rotate(this.angleOffset*l.rotateRatio),this.velocity=this.velocity.rotate(this.random.normal(-100,100)*l.rotateRatioRandom),this.color=u.ColorHelper.gradient(this.color,l.gradientColorIncrement),this.velocityUpon=.32*this.size,this.move()),this.size>l.sizeMinimum?Math.random()<l.divideRatio&&this.divide(t,e):(this.velocity=new c.Vector2(-1,-1),this.dead=!0)},r.prototype.divide=function(t,e){e<2&&(e=2);var n=this.size*l.divideSizeRatio;if(this.size=n,this.age=this.random.normal(0,20),1<e)for(var i=2;i<=e;i++){n*=l.divideSizeRatioEx;var o=new r(this.location,n);o.velocity=this.velocity.rotate(this.random.normal(-100,100)*l.divideRotateRatio).multiply(l.divideLengthRatio),o.age=this.random.normal(0,40),o.color=u.ColorHelper.gradientRandom2(this.color,l.gradientColorIncrement*o.size/6),t.push(o)}},r}(o.DynamicParticle);n.SpotParticle=r;var l={sizeMinimum:1,sizeRadius:.995,rotateRatio:.01,rotateRatioRandom:.003,divideRatio:.03,divideSizeRatio:.8,divideSizeRatioEx:.92,divideColorIncrementRatio:1,divideRotateRatio:.012,divideLengthRatio:.7,gradientColorIncrement:1.1}},{"../../../../Engine/Numerics/Random":28,"../../../../Engine/Numerics/Vector2":30,"../../../../Engine/UI/Color":36,"../Particle/DynamicParticle":65}],69:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var c=t("../../../../Engine/UI/Color"),r=t("../../../../Engine/Numerics/Vector2"),s=t("../../../../Engine/Numerics/Random"),a=t("../ParticleSystem"),u=t("./WalkerParticle"),l=t("../../../../Engine/Numerics/Transform"),h=t("../../../../Engine/Game/GameComponents/Effect/Effect"),f=t("../../../../Engine/Game/GameObject/GameView"),p=t("../../../../Engine/Drawing/Graphics"),d=function(e){function t(){var t=e.call(this)||this;return t.random=new s.Random,t.joint(new h.GhostEffect(new c.Color(0,128,128,.006),40)),t.transform=new l.Transform,t}return o(t,e),t.prototype.start=function(){var t=this.world.width,e=this.world.height;this.walkers=[],this.split=1;var n=new r.Vector2(t/2,.8*e);this.center=n,u.WalkerParticle.StaticGravityRatio=5e3;var i=new u.WalkerParticle(n);i.origin=i.location.clone(),i.maxSize=10,i.color=new c.Color(255,255,255,.1),i.direction=new r.Vector2(0,-this.world.width/10),this.walkers.push(i),this.maxDepth=6+Math.floor(t/600),this.createNodes(this.walkers,i,this.maxDepth,this.split,1),this.rotationDelta=2*Math.PI/Math.floor(8*Math.random()+2),this.particles=this.walkers},t.prototype.update=function(){var n=this,i={width:this.world.width,height:this.world.height};this.transform.center=new r.Vector2(i.width/2,i.height/2),this.transform.rotation=this.transform.rotation+this.rotationDelta,this.transform.rotation>1e4*Math.PI&&(this.transform.rotation=0,this.rotationDelta=2*Math.PI/Math.floor(8*Math.random()+2)),this.walkers.forEach(function(t,e){t.update(i,0===e?n.center:t.parent.location)}),.5<Math.random()&&(this.split+=1.6*Math.random()-.8,this.split=Math.max(1,Math.min(16,this.split))),this.modifyNodes(this.walkers[0],this.split,1*this.split/10)},t.prototype.createNodes=function(t,e,n,i,o){if(void 0===i&&(i=1),void 0===o&&(o=1),0<n){var r=[-1,1,0];e.children=[];for(var s=0;s<2;s++){var a=new u.WalkerParticle;a.direction=e.direction.rotate(Math.PI/i*r[s]),a.location=e.location.add(a.direction.multiply(o)),a.origin=a.location.clone(),a.parent=e,a.maxSize=.8*e.maxSize,a.color=new c.Color(255,255,255,1/this.maxDepth-.05*n),e.children.push(a),this.walkers.push(a),this.createNodes(t,a,n-1,i,o)}}},t.prototype.modifyNodes=function(t,e,n){if(void 0===n&&(n=1),t.children&&0<t.children.length)for(var i=[-1,1,0],o=0;o<2;o++){var r=t.children[o];r.direction=t.direction.rotate(Math.PI/e*i[o]),r.origin=t.origin.add(r.direction.multiply(n)),this.modifyNodes(r,e,n)}},t}(a.ParticlesBase);n.ParticlesWalker=d;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(i,o){p.Graphics.scaleOffset(o,2,2*o.canvas.height/o.canvas.width,1),p.Graphics.transform(o,i.transform.toMatrix3x2(),function(){for(var t=0;t<i.particles.length;t++){var e=i.particles[t],n=e.location;e.parent&&(o.beginPath(),o.moveTo(n.x,n.y),o.lineTo(e.parent.location.x,e.parent.location.y),o.lineWidth=e.size,o.strokeStyle=e.color.rgba,o.closePath(),o.stroke())}})},e}(f.GameView);n.ParticlesWalkerView=y},{"../../../../Engine/Drawing/Graphics":15,"../../../../Engine/Game/GameComponents/Effect/Effect":19,"../../../../Engine/Game/GameObject/GameView":21,"../../../../Engine/Numerics/Random":28,"../../../../Engine/Numerics/Transform":29,"../../../../Engine/Numerics/Vector2":30,"../../../../Engine/UI/Color":36,"../ParticleSystem":66,"./WalkerParticle":70}],70:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Particle/DynamicParticle"),s=t("../../../../Engine/Numerics/Random"),a=function(o){function a(t,e,n){void 0===e&&(e=1),void 0===n&&(n=0);var i=o.call(this,t,e,n)||this;return i.random=new s.Random,i.maxSize=1,i.maxAge=300,i}return r(a,o),a.prototype.update=function(t,e){this.age<this.maxAge&&(this.age+=1,this.size=this.maxSize*this.age/this.maxAge,this.mass=this.size*this.size*this.size,this.velocityUpon=this.size/2);var n=e.subtract(this.location),i=n.length;if(i<this.size/2)this.age=0,this.size=1,this.mass=1,this.location=this.origin.clone();else{var o=n.normalize(),r=a.StaticGravityRatio||0,s=o.multiply(this.mass/(i*i)*r);this.applyForce(s)}this.move()},a.StaticGravityRatio=0,a}(o.DynamicParticle);n.WalkerParticle=a},{"../../../../Engine/Numerics/Random":28,"../Particle/DynamicParticle":65}],71:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Engine/Game/GameWorld/GameWorld"),s=t("../../Engine/Common/Inputs"),a=t("./ParticleSystem/Flyer/ParticlesFlyer"),c=t("../Resources/GalleryTexts"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"Title",{get:function(){return c.GalleryTexts.ParticlesFlyerWorld_Title},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.inputs.addInput(new s.PointerInput)},e.prototype.createObjects=function(){this.addChild((new a.ParticlesFlyer).joint(new a.ParticlesFlyerView))},e}(r.GameWorld);n.ParticlesFlyerWorld=u},{"../../Engine/Common/Inputs":9,"../../Engine/Game/GameWorld/GameWorld":23,"../Resources/GalleryTexts":48,"./ParticleSystem/Flyer/ParticlesFlyer":63}],72:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Engine/Game/GameWorld/GameWorld"),s=t("./ParticleSystem/Tree/ParticlesTree"),a=t("../Resources/GalleryTexts"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"Title",{get:function(){return a.GalleryTexts.ParticlesTreeWorld_Title},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){},e.prototype.createObjects=function(){this.addChild((new s.ParticlesTree).joint(new s.ParticlesTreeView))},e}(r.GameWorld);n.ParticlesTreeWorld=c},{"../../Engine/Game/GameWorld/GameWorld":23,"../Resources/GalleryTexts":48,"./ParticleSystem/Tree/ParticlesTree":67}],73:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Engine/Game/GameWorld/GameWorld"),s=t("../../Engine/Common/Inputs"),a=t("./ParticleSystem/Walker/ParticlesWalker"),c=t("../Resources/GalleryTexts"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"Title",{get:function(){return c.GalleryTexts.PartilesWalkerWorld_Title},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.inputs.addInput(new s.PointerInput)},e.prototype.createObjects=function(){this.addChild((new a.ParticlesWalker).joint(new a.ParticlesWalkerView))},e}(r.GameWorld);n.ParticlesWalkerWorld=u},{"../../Engine/Common/Inputs":9,"../../Engine/Game/GameWorld/GameWorld":23,"../Resources/GalleryTexts":48,"./ParticleSystem/Walker/ParticlesWalker":69}],74:[function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Engine/Game/GameObject/GameVisual"),s=t("../../../Engine/Game/GameObject/GameView"),a=t("../../../Engine/Drawing/Graphics"),c=t("../../../Engine/Common/Inputs"),u=function(e){function t(){var t=e.call(this)||this;return t.pointers=[],t.cache={},t.joint(new l),t}return o(t,e),t.prototype.start=function(t){var e=this;this.cache.container=t.world.ui.container,this.cache.cursor=this.cache.container.style.cursor,this.cache.container.style.cursor="none",this.cache.handler=function(){e.pointers.push(t.world.inputs.pointer.position.clone())},t.on(c.InputEvents.PointerMoved,this.cache.handler)},t.prototype.update=function(){1<this.pointers.length&&this.pointers.shift()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.cache.container.style.cursor=this.cache.cursor,arguments[0].off(c.InputEvents.PointerMoved,this.cache.handler)},t}(r.GameVisual);n.VisualPointer=u;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(t,e){a.Graphics.hold(e,function(){0<t.pointers.length&&(e.beginPath(),t.pointers.forEach(function(t){e.lineTo(t.x,t.y)}),e.lineWidth=10,e.strokeStyle="#FFF",e.stroke())})},e}(s.GameView);n.VisualPointerView=l},{"../../../Engine/Common/Inputs":9,"../../../Engine/Drawing/Graphics":15,"../../../Engine/Game/GameObject/GameView":21,"../../../Engine/Game/GameObject/GameVisual":22}],75:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),(new(t("./Gallery/App/GalleryApp").GalleryApp)).processes.launch.process()},{"./Gallery/App/GalleryApp":38}]},{},[75]);