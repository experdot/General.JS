!function o(a,s,c){function u(e,t){if(!s[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[e]={exports:{}};a[e][0].call(i.exports,function(t){return u(a[e][1][t]||t)},i,i.exports,o,a,s,c)}return s[e].exports}for(var l="function"==typeof require&&require,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.children=[],t}return i(t,e),t.prototype.addChild=function(t){return(t.parent=this).children.push(t),this.joint(t),this},t.prototype.removeChild=function(t){var e=this.children.indexOf(t);return 0<=e?(this.disjoint(t),t.parent=null,this.children.splice(e,1),this.removeChild(t)):this},t}(t("./GeneralObject").GeneralObject);n.GeneralNode=o},{"./GeneralObject":2}],2:[function(t,e,n){"use strict";var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Engine/Common/Identifier"),a=t("./GeneralProcess"),i=function(){};n.GeneralInterface=i;var s=function(){function t(){this.identifier=r.Identifier.unique,this.joints=[],this.processes={}}return t.prototype.joint=function(t){return c.combine(this,t),this.joints.push(t),t.joints.push(this),this},t.prototype.disjoint=function(t){return 0<=this.joints.indexOf(t)?(this.joints.splice(this.joints.indexOf(t),1),t.joints.splice(t.joints.indexOf(this),1),c.seperate(this,t),this.disjoint(t)):this},t.prototype.implements=function(t){for(var e in t)t[e]instanceof Array&&(this.processes[e]||(this.processes[e]=new a.GeneralProcess(this).next(this[e])))},t}();n.GeneralObject=s;var c=function(){function t(){}return t.find=function(t){var e=[],n=t.processes;for(var r in n)e.push({key:r,value:n[r]});return e},t.combine=function(i,e){this.every(i,e,function(t,r){t.next(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return r.process.apply(r,o([i],e))},e.identifier)})},t.seperate=function(t,e){this.every(t,e,function(t){t.remove(e.identifier)})},t.every=function(t,e,r){var i=t.processes,o=e.processes;this.find(t).forEach(function(t){var e=i[t.key],n=o[t.key];n instanceof a.GeneralProcess&&r(e,n,t.key)})},t}()},{"../Engine/Common/Identifier":12,"./GeneralProcess":3}],3:[function(t,e,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./GeneralTask"),o=function(){function t(t){this.enabled=!0,this.thisArg=t,this.tasks=[]}return t.prototype.process=function(e){var n=this;void 0===e&&(e=this.thisArg);for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return this.enabled&&this.tasks.forEach(function(t){t.run.apply(t,i([n.thisArg,e],r))}),this},t.prototype.before=function(t,e){return t&&this.tasks.unshift(new r.GeneralTask(t,e)),this},t.prototype.next=function(t,e){return t&&this.tasks.push(new r.GeneralTask(t,e)),this},t.prototype.remove=function(e){var n=this;return this.tasks.filter(function(t){return t.identifier===e}).forEach(function(t){var e=n.tasks.indexOf(t);0<=e&&n.tasks.splice(e,1)}),this},t.prototype.clear=function(){return this.tasks=[],this},t.prototype.enable=function(){return this.enabled=!0,this},t.prototype.disable=function(){return this.enabled=!1,this},t}();n.GeneralProcess=o},{"./GeneralTask":4}],4:[function(t,e,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e,n){void 0===e&&(e=Number.MIN_SAFE_INTEGER),void 0===n&&(n=!0),this.action=t,this.identifier=e,this.enabled=n}return t.prototype.run=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.enabled&&this.action&&(e=this.action).call.apply(e,i([t],n))},t}();n.GeneralTask=r},{}],5:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.load=[HTMLCollection],t.start=[],t.dispose=[],t}return i(t,e),t}(t("../../../Core/GeneralObject").GeneralInterface);n.AppInterface=o},{"../../../Core/GeneralObject":2}],6:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Core/GeneralObject"),a=t("../AppInterface/AppInterface"),s=function(e){function t(){var t=e.call(this)||this;return t.implements(new a.AppInterface),t}return i(t,e),t}(o.GeneralObject);n.App=s},{"../../../Core/GeneralObject":2,"../AppInterface/AppInterface":5}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(){}return r.show=function(t,e,n){void 0===t&&(t=""),r.onNotify(t,e,n)},r.onNotify=function(t,e,n){window.alert(t)},r.prototype.show=function(t,e,n){void 0===t&&(t=""),this.onNotify(t,e,n)},r.prototype.onNotify=function(t,e,n){window.alert(t)},r}();n.MessageBox=r},{}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){void 0===t&&(t=1),void 0===e&&(e=1),this.width=t,this.height=e,this.data=[];for(var n=0;n<t;n++){this.data.push([]);for(var r=0;r<e;r++)this.data[n][r]=void 0}}return t.prototype.set=function(t,e,n){return this.data[t][e]=n,this.data[t][e]},t.prototype.get=function(t,e){return this.data[t][e]},t.prototype.forEach=function(r){this.data.forEach(function(t,n){t&&t.forEach(function(t,e){r&&r(t,n,e)})})},t}();n.Array2=r},{}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){this.reset()}return t.prototype.reset=function(){return this.lastTime=(new Date).getTime(),this},t.prototype.delay=function(t,e,n){var r=(new Date).getTime(),i=r-this.lastTime;t<=i?(this.lastTime=r,e&&e(i)):n&&n(i)},t}();n.DelayTimer=r},{}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Exception"),i=function(){function t(){this.handlers={}}return t.prototype.addHandler=function(t,e){if(this.registEvent(t),!this.handlers[t])throw new r.InvalidOperationException("The event is not registed.");return this.handlers[t].push(e),this},t.prototype.removeHandler=function(t,e){var n=this.handlers[t];if(n&&0<n.length){var r=n.findIndex(function(t){return t===e});0<=r&&n.splice(r,1)}return this},t.prototype.registEvent=function(t){return this.handlers[t]||(this.handlers[t]=[]),this},t.prototype.raiseEvent=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.handlers[t]&&this.handlers[t].forEach(function(t){t&&t.apply(void 0,e)})},t.prototype.dispose=function(){this.handlers={}},t}();n.Events=i},{"./Exception":11}],11:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){this.message=t},a=function(e){function t(t){return void 0===t&&(t="One of the arguments provided to a method is not valid."),e.call(this,t)||this}return i(t,e),t}(n.Exception=o),s=function(e){function t(t){return void 0===t&&(t="An undefined/null reference is passed to a method that does not accept it as a valid argument."),e.call(this,t)||this}return i(t,e),t}(n.ArgumentException=a);n.ArgumentNullException=s;var c=function(e){function t(t){return void 0===t&&(t="The value of an argument is outside the allowable range of values as defined by the invoked method."),e.call(this,t)||this}return i(t,e),t}(a);n.ArgumentOutOfRangeException=c;var u=function(e){function t(t){return void 0===t&&(t="An attempt is made to access an element of an array or collection with an index that is outside its bounds."),e.call(this,t)||this}return i(t,e),t}(o);n.IndexOutOfRangeException=u;var l=function(e){function t(t){return void 0===t&&(t="A method call is invalid for the object's current state."),e.call(this,t)||this}return i(t,e),t}(o);n.InvalidOperationException=l;var h=function(e){function t(t){return void 0===t&&(t="The key specified for accessing an element in an object does not match any key in the object."),e.call(this,t)||this}return i(t,e),t}(o);n.KeyNotFoundException=h;var f=function(e){function t(t){return void 0===t&&(t="The method is not implemented."),e.call(this,t)||this}return i(t,e),t}(o);n.NotImplementedException=f;var p=function(e){function t(t){return void 0===t&&(t="An invoked method is not supported."),e.call(this,t)||this}return i(t,e),t}(o);n.NotSupportedException=p;var d=function(e){function t(t){return void 0===t&&(t="A feature does not run on a particular platform."),e.call(this,t)||this}return i(t,e),t}(o);n.PlatformNotSupportedException=d;var y=function(e){function t(t){return void 0===t&&(t="An array with the wrong number of dimensions is passed to a method."),e.call(this,t)||this}return i(t,e),t}(o);n.RankException=y;var g=function(e){function t(t){return void 0===t&&(t="The time interval allotted to an operation has expired."),e.call(this,t)||this}return i(t,e),t}(o);n.TimeoutException=g},{}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){}return Object.defineProperty(t,"unique",{get:function(){return t.uniqueCount++},enumerable:!0,configurable:!0}),t.uniqueCount=1,t}();n.Identifier=r},{}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t){void 0===t&&(t=1),this.count=0,this.speed=t}return t.prototype.change=function(t){return this.speed=t,this},t.prototype.invoke=function(t){return this.count=(this.count+1)%this.speed,0===this.count&&t&&t(),this},t}();n.Speeder=r},{}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function u(){}return u.clear=function(t){return t.clearRect(0,0,t.canvas.width,t.canvas.height),this},u.shadow=function(t,e,n,r,i,o){return u.hold(t,function(){t.shadowBlur=e,t.shadowColor=n,t.shadowOffsetX=r,t.shadowOffsetY=i,o&&o(t)}),this},u.scaleOffset=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1);var i=t.canvas.width,o=t.canvas.height,a=i+e,s=o+n;return u.hold(t,function(){t.globalAlpha=r,t.translate(i/2,o/2),t.drawImage(t.canvas,-a/2,-s/2,a,s)}),this},u.offset=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1);var i=t.canvas.width,o=t.canvas.height;return u.hold(t,function(){t.globalAlpha=r,t.drawImage(t.canvas,e,n,i,o)}),this},u.rotate=function(t,e,n,r){void 0===n&&(n=1);var i=t.canvas.width,o=t.canvas.height,a=i/2,s=o/2;return u.hold(t,function(){t.translate(a,s),t.rotate(e),t.translate(-a,-s),t.globalAlpha=n,r&&r(t)}),this},u.mirror=function(t,e,n,r,i){void 0===r&&(r=1);var o=t.canvas.width,a=t.canvas.height,s=o/2,c=a/2;return u.hold(t,function(){t.translate(s,c),t.scale(e,n),t.translate(-s,-c),t.globalAlpha=r,i&&i(t)}),this},u.transform=function(t,e,n){return u.hold(t,function(){t.setTransform.apply(t,e.toArray()),n&&n(t)}),this},u.transparent=function(t,e,n){return void 0===e&&(e=1),u.hold(t,function(){t.globalAlpha=e,n&&n(t)}),this},u.hold=function(t,e){return t.save(),e&&e(t),t.restore(),this},u.drawPoints=function(t,e){if(t.beginPath(),0<e.length){t.moveTo(e[0].x,e[0].y);for(var n=0;n<e.length-1;n++){var r=(e[n].x+e[n+1].x)/2,i=(e[n].y+e[n+1].y)/2,o=(r+e[n].x)/2,a=(r+e[n+1].x)/2;t.quadraticCurveTo(o,e[n].y,r,i),t.quadraticCurveTo(a,e[n+1].y,e[n+1].x,e[n+1].y)}}t.closePath()},u}();n.Graphics=r},{}],15:[function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e}return t.prototype.clear=function(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this},t.prototype.draw=function(t){return t&&t(this.context),this},t.prototype.output=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.drawImage.apply(t,r([this.canvas],e)),this},t}();n.OffscreenCanvas=i},{}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Common/DelayTimer"),i=function(){function t(){this.timer=new r.DelayTimer,this.initialize(),this.isLoop=!1}return t.prototype.loopInvoke=function(t){var e,n=this;this.initialize(),this.isLoop=!0;var r=function(){t&&t(),n.frameCount+=1,n.timer.delay(1e3,function(t){var e=1e3===t?0:-1;n.framePerSecond=n.frameCount-n.lastSecondCount+e,n.lastSecondCount=n.frameCount,n.onRateChanged&&n.onRateChanged(n.framePerSecond)}),n.isLoop?e=window.requestAnimationFrame(r):(window.cancelAnimationFrame(e),n.initialize(),n.stopCallback&&n.stopCallback())};r()},t.prototype.stop=function(t){this.stopCallback=t,this.isLoop=!1},t.prototype.initialize=function(){this.frameCount=0,this.framePerSecond=0,this.lastSecondCount=0},t}();n.FrameManager=i},{"../../Common/DelayTimer":9}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./FrameManager"),i=function(){function t(t,e,n){this.container=t,this.canvas=e,this.context=e.getContext("2d"),this.world=n,this.world.initializeUI(t,e),this.frameManager=new r.FrameManager}return t.prototype.start=function(){var t=this;this.world.processes.start.process(),this.world.processes.gui.process(this.world,this.container),this.frameManager.loopInvoke(function(){t.world.processes.render.process(t.world,t.context),t.world.processes.update.process()})},t.prototype.stop=function(){var t=this;this.frameManager.stop(function(){t.context.clearRect(0,0,t.canvas.width,t.canvas.height)}),this.world.processes.dispose.process()},t}();n.GameBox=i},{"./FrameManager":16}],18:[function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../Core/GeneralObject"),a=t("../../../UI/Color"),s=t("../../GameInterface/GameInterface"),c=function(i){function t(t,e,n){void 0===t&&(t=a.Colors.Black),void 0===e&&(e=10),void 0===n&&(n=!0);var r=i.call(this)||this;return r.fillColor=t,r.gradientNumber=e,r.direct=n,r.implements(new s.GameEffectInterface),r}return o(t,i),t.prototype.start=function(t){var n=this;this.direct&&t.processes.render.before(function(t,e){return n.effect(e)},this.identifier)},t.prototype.update=function(){.5<Math.random()&&(this.fillColor=a.ColorHelper.gradientRandom(this.fillColor,this.gradientNumber))},t.prototype.effect=function(t){var e=t.canvas.width,n=t.canvas.height;t.fillStyle=this.fillColor.rgba,t.fillRect(0,0,e,n)},t}(i.GeneralObject);n.GhostEffect=c;var u=function(i){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!0);var r=i.call(this)||this;return r.image=new Image,r.image.src=t,r.alpha=e,r.direct=n,r.implements(new s.GameEffectInterface),r}return o(t,i),t.prototype.start=function(t){var n=this;this.direct&&t.processes.render.before(function(t,e){return n.effect(e)},this.identifier)},t.prototype.effect=function(t){var e=t.globalAlpha;t.globalAlpha=this.alpha,t.drawImage(this.image,0,0),t.globalAlpha=e},t}(i.GeneralObject);n.GhostImageEffect=u},{"../../../../Core/GeneralObject":2,"../../../UI/Color":38,"../../GameInterface/GameInterface":19}],19:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.start=[],t.dispose=[],t}return i(t,e),t}(t("../../../Core/GeneralObject").GeneralInterface),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=[],t}return i(t,e),t}(n.GameObjectInterface=o);n.GameViewInterface=a;var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gui=[],t}return i(t,e),t}(o);n.GameGUIInterface=s;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.update=[],t}return i(t,e),t}(o);n.GameEffectInterface=c;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=[],t.gui=[],t.update=[],t}return i(t,e),t}(o);n.GameVsiualInterface=u},{"../../../Core/GeneralObject":2}],20:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Core/GeneralObject"),a=t("../GameInterface/GameInterface"),s=function(e){function t(){var t=e.call(this)||this;return t.implements(new a.GameViewInterface),t}return i(t,e),t}(o.GeneralObject),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(n.GameView=s);n.TypedGameView=c},{"../../../Core/GeneralObject":2,"../GameInterface/GameInterface":19}],21:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../Core/GeneralNode"),s=t("../GameInterface/GameInterface"),c=t("../../Common/Events"),u=function(e){function t(){var t=e.call(this)||this;return t.implements(new s.GameVsiualInterface),t.events=new c.Events,t}return i(t,e),t.prototype.on=function(t,e){this.events.addHandler(t,e)},t.prototype.off=function(t,e){this.events.removeHandler(t,e)},t.prototype.dispatch=function(n){for(var t,r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];(t=this.events).raiseEvent.apply(t,o([n],r)),this.children.forEach(function(t){var e;(e=t).dispatch.apply(e,o([n],r))})},t.prototype.dispose=function(t){this.events.dispose()},t}(a.GeneralNode);n.GameVisual=u},{"../../../Core/GeneralNode":1,"../../Common/Events":10,"../GameInterface/GameInterface":19}],22:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../GameObject/GameVisual"),a=t("../../Inputs/Inputs"),s=t("../../Numerics/Vector2"),c=function(r){function t(t,e){var n=r.call(this)||this;return n.width=t,n.height=e,(n.world=n).inputs=(new a.Inputs).change(function(t,e){return n.dispatch(t,e)}),n.ui={container:null,canvas:null},n.initialize(),n}return i(t,r),Object.defineProperty(t.prototype,"size",{get:function(){return{width:this.width,height:this.height,center:{x:this.width/2,y:this.height/2}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return new s.Vector2(this.width/2,this.height/2)},enumerable:!0,configurable:!0}),t.prototype.addChild=function(t){return r.prototype.addChild.call(this,t),t.world=this},t.prototype.dispose=function(){r.prototype.dispose.call(this),this.inputs.dispose()},t.prototype.initialize=function(){},t.prototype.initializeUI=function(t,e){this.ui.container=t,this.ui.canvas=e,this.inputs.launch(this.ui.container)},t}(o.GameVisual);n.GameWorld=c},{"../../Inputs/Inputs":26,"../../Numerics/Vector2":32,"../GameObject/GameVisual":21}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={"en-US":"English(United States)","zh-CN":"简体中文"},i=function(){function t(t){this.language=t}return Object.defineProperty(t,"LanguageSessionKey",{get:function(){return"General_SessionStorage_Language"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"netural",{get:function(){return new t(sessionStorage.getItem("General_SessionStorage_Language")||navigator.language||"en-US")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"en_US",{get:function(){return new t("en-US")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"zh_CN",{get:function(){return new t("zh-CN")},enumerable:!0,configurable:!0}),t.switch=function(t){sessionStorage.setItem("General_SessionStorage_Language",t)},Object.defineProperty(t.prototype,"displayName",{get:function(){return r[this.language]},enumerable:!0,configurable:!0}),t}();n.CultureInfo=i},{}],24:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Common/Exception"),r=function(){function t(){}return t.openFileDialog=function(e,t){void 0===t&&(t="");var n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept",t),n.onchange=function(t){e&&e(t),n.remove()},n.oncancel=function(){n.remove()},n.style.display="none",document.body.appendChild(n),n.click()},t.readAllText=function(t,e){this.readByFileReader(t,e,function(t,e){t.readAsText(e)})},t.readAsDataURL=function(t,e){this.readByFileReader(t,e,function(t,e){t.readAsDataURL(e)})},t.readByFileReader=function(t,e,n){var r=new FileReader;n(r,t),r.onload=function(){e&&e(r.result)},r.onerror=function(){throw new i.Exception("Could not read file, error: "+r.error)}},t}();n.FileIO=r},{"../Common/Exception":11}],25:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.regist=function(t){e.prototype.regist.call(this,t),this.registEvent("drop","Drop",function(t){t.stopPropagation(),t.preventDefault()}),this.registEvent("dragenter","DragEnter",function(t){t.stopPropagation(),t.preventDefault()}),this.registEvent("dragleave","DragLeave",function(t){t.stopPropagation(),t.preventDefault()}),this.registEvent("dragover","DragOver",function(t){t.stopPropagation(),t.preventDefault()})},t}(t("./Inputs").InputBase);n.DragDropInput=o},{"./Inputs":26}],26:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Common/Exception"),i=function(){function t(){this.inputList=[],this.dispatcher=function(){throw new r.NotImplementedException("The dispatcher event handler is not configured.")}}return t.prototype.change=function(t){return this.dispatcher=t,this},t.prototype.launch=function(t){var e=this;return this.dispose(),this.ui=t,this.inputList.forEach(function(t){e.regist(t)}),this},t.prototype.dispose=function(){this.inputList.forEach(function(t){t.release()}),this.ui=null},t.prototype.regist=function(t){t.regist(this)},t.prototype.addInput=function(t){this.inputList.push(t)},t}();n.Inputs=i;var o=function(){function t(){this.events=[]}return t.prototype.regist=function(t){this.inputs=t},t.prototype.registEvent=function(t,e,n,r,i){var o=this;void 0===i&&(i=null);var a=function(t){n&&n(t),o.inputs.dispatcher(e,t),r&&r(t)};(i=i||this.inputs.ui).addEventListener(t,a),this.events.push({ui:i,name:t,listener:a})},t.prototype.release=function(){this.events.forEach(function(t){t.ui.removeEventListener(t.name,t.listener)})},t}();n.InputBase=o},{"../Common/Exception":11}],27:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.regist=function(t){e.prototype.regist.call(this,t),t.key||(t.key={isKeyDown:!1}),this.registEvent("keydown","KeyDown",function(){t.key.isKeyDown=!0},null,document.body),this.registEvent("keyup","KeyUp",function(){t.key.isKeyDown=!1},null,document.body),this.registEvent("keypress","KeyPress",null,null,document.body)},t}(t("./Inputs").InputBase);n.KeyInput=o},{"./Inputs":26}],28:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Inputs"),a=t("../Numerics/Vector2"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.regist=function(t){e.prototype.regist.call(this,t),t.pointer||(t.pointer={isPressed:!1,position:new a.Vector2(0,0)}),this.registMouseEvent(t),this.registTouchEvent(t)},t.prototype.registMouseEvent=function(e){this.registEvent("click","PointerClicked"),this.registEvent("mouseenter","PointerEntered"),this.registEvent("mouseleave","PointerExited",function(){e.pointer.isPressed=!1}),this.registEvent("mousedown","PointerPressed",function(){e.pointer.isPressed=!0}),this.registEvent("mouseup","PointerReleased",function(){e.pointer.isPressed=!1}),this.registEvent("mousemove","PointerMoved",function(t){e.pointer.position=new a.Vector2(t.offsetX,t.offsetY)});window.onmousewheel=function(t){e.dispatcher&&e.dispatcher("MouseWheel",t)}},t.prototype.registTouchEvent=function(n){this.registEvent("touchstart","PointerPressed",function(t){t.preventDefault(),n.pointer.isPressed=!0,n.pointer.position=new a.Vector2(t.changedTouches[0].clientX,t.changedTouches[0].clientY)}),this.registEvent("touchend","PointerReleased",function(t){t.preventDefault();var e=n.pointer.isPressed;n.pointer.position=new a.Vector2(t.changedTouches[0].clientX,t.changedTouches[0].clientY),e&&n.ui.click()}),this.registEvent("touchmove","PointerMoved",function(t){t.preventDefault(),n.pointer.isPressed=!0,n.pointer.position=new a.Vector2(t.changedTouches[0].clientX,t.changedTouches[0].clientY)})},t}(o.InputBase);n.PointerInput=s},{"../Numerics/Vector2":32,"./Inputs":26}],29:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function s(t,e,n,r,i,o){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),this.M11=t,this.M12=e,this.M21=n,this.M22=r,this.M31=i,this.M32=o,this}return Object.defineProperty(s,"identity",{get:function(){return new s},enumerable:!0,configurable:!0}),s.createScale=function(t,e,n){var r=new s,i=n.x*(1-t),o=n.y*(1-e);return r.M11=t,r.M12=0,r.M21=0,r.M22=e,r.M31=i,r.M32=o,r},s.createRotation=function(t,e){var n=new s,r=Math.cos(t),i=Math.sin(t),o=e.x*(1-r)+e.y*i,a=e.y*(1-r)-e.x*i;return n.M11=r,n.M12=i,n.M21=-i,n.M22=r,n.M31=o,n.M32=a,n},s.createTranslation=function(t){var e=new s;return e.M11=1,e.M12=0,e.M21=0,e.M22=1,e.M31=t.x,e.M32=t.y,e},s.prototype.toArray=function(){return[this.M11,this.M12,this.M21,this.M22,this.M31,this.M32]},s.prototype.toIdentity=function(){return this.M11=this.M22=1,this.M12=this.M21=this.M31=this.M32=0,this},s.prototype.transform=function(t,e,n,r,i,o,a){var s=Math.cos(i),c=Math.sin(i);return this.append(s*n,c*n,-c*r,s*r,t,e),(o||a)&&(this.M31-=o*this.M11+a*this.M21,this.M32-=o*this.M12+a*this.M22),this},s.prototype.append=function(t,e,n,r,i,o){var a=this.M11,s=this.M12,c=this.M21,u=this.M22;return this.M11=t*a+e*c,this.M12=t*s+e*u,this.M21=n*a+r*c,this.M22=n*s+r*u,this.M31=i*a+o*c+this.M31,this.M32=i*s+o*u+this.M32,this},s.prototype.multiply=function(t){return this.append(t.M11,t.M12,t.M21,t.M22,t.M31,t.M32),this},s.prototype.invert=function(){var t=this.M11,e=this.M12,n=this.M21,r=this.M22,i=this.M31,o=t*r-e*n;return this.M11=r/o,this.M12=-e/o,this.M21=-n/o,this.M22=t/o,this.M31=(n*this.M32-r*i)/o,this.M32=-(t*this.M32-e*i)/o,this},s}();n.Matrix3x2=r},{}],30:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.next=function(t){return void 0===t&&(t=Number.MAX_SAFE_INTEGER),Math.floor(0<=Math.random()*t?t:0)},t.prototype.range=function(t,e){return Math.ceil(t+Math.floor(Math.random()*(e-t)))},t.prototype.normal=function(t,e,n){void 0===n&&(n=3);for(var r=0,i=0;i<n;i++)r+=this.range(t,e+1);return r/n},t.prototype.sample=function(){return Math.random()},t}();n.Random=r},{}],31:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Vector2"),i=t("./Matrix3x2"),o=function(){function t(){this.translation=new r.Vector2(0,0),this.scale=new r.Vector2(1,1),this.rotation=0,this.center=new r.Vector2(0,0)}return t.prototype.toMatrix3x2=function(){var t=i.Matrix3x2.createScale(this.scale.x,this.scale.y,this.center),e=i.Matrix3x2.createRotation(this.rotation,this.center),n=i.Matrix3x2.createTranslation(this.translation);return t.multiply(e).multiply(n)},t}();n.Transform=o},{"./Matrix3x2":29,"./Vector2":32}],32:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return Object.defineProperty(r,"Zero",{get:function(){return new r(0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sqrtLength",{get:function(){return this.x*this.x+this.y*this.y},enumerable:!0,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.normalize=function(){var t=1/this.length;return new r(this.x*t,this.y*t)},r.prototype.negate=function(){return new r(-this.x,-this.y)},r.prototype.add=function(t){return new r(this.x+t.x,this.y+t.y)},r.prototype.subtract=function(t){return new r(this.x-t.x,this.y-t.y)},r.prototype.multiply=function(t){return new r(this.x*t,this.y*t)},r.prototype.divide=function(t){var e=1/t;return new r(this.x*e,this.y*e)},r.prototype.dot=function(t){return this.x*t.x+this.y*t.y},r.prototype.rotate=function(t){var e=Math.sin(t),n=Math.cos(t);return new r(this.x*n-this.y*e,this.y*n+this.x*e)},r.prototype.setLength=function(t){var e=this.length;0<e&&(this.x=this.x*t/e,this.y=this.y*t/e)},r.prototype.limitLength=function(t){t<this.length&&this.setLength(t)},r.prototype.cos=function(t){return this.dot(t)/(this.length*t.length)},r}();n.Vector2=r},{}],33:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){}return Object.defineProperty(t,"isMobile",{get:function(){return/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),t}();n.PlatformInfo=r},{}],34:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,a,s,c){return new(s||(s=Promise))(function(n,e){function r(t){try{o(c.next(t))}catch(t){e(t)}}function i(t){try{o(c.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((c=c.apply(t,a||[])).next())})},a=this&&this.__generator||function(n,r){var i,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("./ResourceManager"),c=t("./ResourceSet"),u=function(n){function t(t){var e=n.call(this)||this;return e.url=t,e.add(new c.ResourceSet(e.url)),e}return i(t,n),t.prototype.attach=function(t){return this.target=t,this},t.prototype.load=function(){return o(this,void 0,void 0,function(){var e=this;return a(this,function(t){switch(t.label){case 0:return[4,n.prototype.load.call(this).then(function(){e.target&&e.assign(e.target)})];case 1:return t.sent(),[2]}})})},t}(s.ResourceManager);n.ConfigurationManager=u},{"./ResourceManager":36,"./ResourceSet":37}],35:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,a,s,c){return new(s||(s=Promise))(function(n,e){function r(t){try{o(c.next(t))}catch(t){e(t)}}function i(t){try{o(c.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((c=c.apply(t,a||[])).next())})},a=this&&this.__generator||function(n,r){var i,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("./ResourceManager"),c=t("../Globalization/CultureInfo"),u=t("./ResourceSet"),l=function(n){function t(t){var e=n.call(this)||this;return e.config=t,e}return i(t,n),t.prototype.init=function(t){return this.config=t,this},t.prototype.load=function(){return o(this,void 0,void 0,function(){var e=this;return a(this,function(t){switch(t.label){case 0:return[4,n.prototype.load.call(this).then(function(){e.target&&e.assign(e.target)})];case 1:return t.sent(),[2]}})})},t.prototype.attach=function(t,e){return void 0===e&&(e=c.CultureInfo.netural),this.config&&(this.add(new u.ResourceSet(this.config.get(e.language))),this.target=t),this},t}(s.ResourceManager);n.CultureResourceManager=l;var h=function(){function t(t,e,n){void 0===n&&(n="{{language}}"),this.template=t,this.languages=e,this.replace=n}return t.prototype.get=function(e){return this.languages.findIndex(function(t){return t===e})<0&&(e=this.languages[0]),this.template.replace(this.replace,e)},t}();n.CultureResourceConfig=h},{"../Globalization/CultureInfo":23,"./ResourceManager":36,"./ResourceSet":37}],36:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,a,s,c){return new(s||(s=Promise))(function(n,e){function r(t){try{o(c.next(t))}catch(t){e(t)}}function i(t){try{o(c.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((c=c.apply(t,a||[])).next())})},i=this&&this.__generator||function(n,r){var i,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.sets=[]}return t.prototype.add=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=this.sets).push.apply(t,e)},t.prototype.clear=function(){return this.sets=[],this},t.prototype.load=function(){return r(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return e=this.sets.map(function(t){return t.load()}),[4,Promise.all(e)];case 1:return t.sent(),[2]}})})},t.prototype.assign=function(n){return this.sets.forEach(function(t){for(var e in n){void 0!==t.data[e]&&(n[e]=t.data[e])}}),this},t}();n.ResourceManager=o},{}],37:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,a,s,c){return new(s||(s=Promise))(function(n,e){function r(t){try{o(c.next(t))}catch(t){e(t)}}function i(t){try{o(c.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((c=c.apply(t,a||[])).next())})},i=this&&this.__generator||function(n,r){var i,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t){this.src=t}return t.prototype.init=function(t){this.data=t},t.prototype.load=function(){return r(this,void 0,void 0,function(){var e=this;return i(this,function(t){switch(t.label){case 0:return[4,fetch(this.src).then(function(t){return t.json()}).then(function(t){return e.init(t)})];case 1:return t.sent(),[2]}})})},t}();n.ResourceSet=o},{}],38:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function n(t,e,n,r){void 0===t&&(t=255),void 0===e&&(e=255),void 0===n&&(n=255),void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r}return n.fromHex=function(t){var e=parseInt(t.slice(1),16);return new n(e/65536,e/256%256,e%256)},n.fromNumber=function(t){return new n(t/65536,t/256%256,t%256)},Object.defineProperty(n.prototype,"hex",{get:function(){var t=Math.floor(this.r),e=Math.floor(this.g),n=Math.floor(this.b),r=t<16?"0":"",i=n<16?"0":"";return"#"+(e<16?"0":"")+t.toString(16)+r+e.toString(16)+i+n.toString(16)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rgb",{get:function(){return"rgb("+Math.floor(this.r)+","+Math.floor(this.g)+","+Math.floor(this.b)+")"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rgba",{get:function(){return"rgba("+Math.floor(this.r)+","+Math.floor(this.g)+","+Math.floor(this.b)+","+this.a+")"},enumerable:!0,configurable:!0}),n.prototype.clone=function(){return new n(this.r,this.g,this.b,this.a)},n}();n.Color=a;var r=function(){function t(){}return t.gradient=function(t,e){void 0===e&&(e=1);var n=t.r;n+=e,n=Math.min(255,Math.max(0,n));var r=t.g;r+=e,r=Math.min(255,Math.max(0,r));var i=t.b;return i+=e,i=Math.min(255,Math.max(0,i)),new a(n,r,i,t.a)},t.gradientRandom=function(t,e){void 0===e&&(e=1);var n=e/2,r=t.r;r+=Math.random()*e-n,r=Math.min(255,Math.max(0,r));var i=t.g;i+=Math.random()*e-n,i=Math.min(255,Math.max(0,i));var o=t.b;return o+=Math.random()*e-n,o=Math.min(255,Math.max(0,o)),new a(r,i,o,t.a)},t.gradientRandom2=function(t,e){void 0===e&&(e=1);var n=t.r;n+=Math.random()*e+1,n=Math.min(255,Math.max(0,n));var r=t.g;r+=Math.random()*e+1,r=Math.min(255,Math.max(0,r));var i=t.b;return i+=Math.random()*e+1,i=Math.min(255,Math.max(0,i)),new a(n,r,i,t.a)},t.gradientRandom3=function(t,e){void 0===e&&(e=1);var n=Math.random()*e+1,r=t.r;r+=n,r=Math.min(255,Math.max(0,r));var i=t.g;i+=n,i=Math.min(255,Math.max(0,i));var o=t.b;return o+=n,o=Math.min(255,Math.max(0,o)),new a(r,i,o,t.a)},t}();n.ColorHelper=r;var i=function(){function t(){}return Object.defineProperty(t,"Black",{get:function(){return new a(0,0,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"White",{get:function(){return new a(255,255,255,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Gray",{get:function(){return new a(128,128,128,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Random",{get:function(){return new a(255*Math.random(),255*Math.random(),255*Math.random(),1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RandomGray",{get:function(){var t=255*Math.random();return new a(t,t,t,1)},enumerable:!0,configurable:!0}),t}();n.Colors=i},{}],39:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){}return Object.defineProperty(t,"all",{get:function(){var n=this;if(!this.values){this.values=[[127744,127999],[127744,127999],[127744,127999]].reduce(function(t,e){return t.concat(n.range(e[0],e[1]))}).map(function(t){return String.fromCodePoint(t)})}return this.values},enumerable:!0,configurable:!0}),t.range=function(n,t){return Array.from(Array(t-n+1).keys()).map(function(t,e){return n+e})},t}();n.Emoji=r;var i=function(){function t(){}return Object.defineProperty(t,"one",{get:function(){var t=r.all;return t[Math.floor(Math.random()*t.length)]},enumerable:!0,configurable:!0}),t}();n.RandomEmoji=i},{}],40:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Numerics/Vector2"),i=function(){function t(){}return t.getEventClientPositon=function(t){return t instanceof MouseEvent?new r.Vector2(t.clientX,t.clientY):t instanceof TouchEvent?new r.Vector2(t.changedTouches[0].clientX,t.changedTouches[0].clientY):null},t}();n.EventHelper=i},{"../Numerics/Vector2":32}],41:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){}return t.requestFullScreen=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=document.documentElement),t.browsersPrefix.map(function(t){return t+(e?"RequestFullscreen":"ExitFullscreen")}).forEach(function(t){e?n[t]&&n[t]():document[t]&&document[t]()})},t.isFullScreen=function(){return t.browsersPrefix.map(function(t){return t+"IsFullScreen"}).some(function(t){return document[t]})},t.getSearchKeyValuePair=function(){var t={},e=location.search;if(0<=e.indexOf("?"))for(var n=e.substr(1).split("&"),r=0;r<n.length;r++)t[n[r].split("=")[0]]=unescape(n[r].split("=")[1]);return t},t.browsersPrefix=["ms","moz","webkit"],t}();n.Utilities=r},{}],42:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Engine/Application/AppObject/App"),a=t("../../../Engine/Application/MessageBox"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.load=function(){a.MessageBox.onNotify=function(t,e,n){var r=$('                \n            <div class="alert alert-warning alert-dismissible fade show" role="alert">\n                <strong>'+e+"</strong> "+t+'\n                <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            ');$("#gallery-alert-container").append(r),setTimeout(function(){r.alert("close")},n||6e3)}},e}(o.App);n.AttachAlert=s},{"../../../Engine/Application/AppObject/App":6,"../../../Engine/Application/MessageBox":7}],43:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Engine/Application/AppObject/App"),a=t("../../../Engine/Platform/PlatformInfo"),s=t("../../Resources/GalleryTexts"),c=t("../../../Engine/Application/MessageBox"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){if(a.PlatformInfo.isMobile&&!sessionStorage.getItem("Gallery-WarningOpenOnPC")){sessionStorage.setItem("Gallery-WarningOpenOnPC","set");var t=s.GalleryTexts.Warnings.OpenOnPC;c.MessageBox.show(t.Content,t.Title,6e3)}},e}(o.App);n.WarningOpenOnPC=u},{"../../../Engine/Application/AppObject/App":6,"../../../Engine/Application/MessageBox":7,"../../../Engine/Platform/PlatformInfo":33,"../../Resources/GalleryTexts":60}],44:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../Engine/Application/AppObject/App"),a=t("../Resources/GalleryTexts"),s=t("./Navigator/GalleryNavigator"),c=t("../Resources/GalleryImages"),u=t("./Game/GalleryGame"),l=t("./Alert/AttachAlert"),h=t("./Alert/WarningOpenOnPC"),f=t("./Progress/ProgressCover"),p=t("../Collection/GalleryCollection"),d=function(e){function t(){var t=e.call(this)||this;return t.collection=new p.GalleryCollection,t.joint(new l.AttachAlert),t.joint(new s.GalleryNavigator(t.collection.symbols)),t.joint(new h.WarningOpenOnPC),t.joint(new f.ProgressCover),t.joint(new u.GalleryGame(t.collection)),t}return i(t,e),t.prototype.load=function(){var t=this;a.GalleryTextLoader.load().then(function(){c.GalleryImageResourceManager.load().then(function(){t.processes.start.process()})})},t}(o.App);n.GalleryApp=d},{"../../Engine/Application/AppObject/App":6,"../Collection/GalleryCollection":48,"../Resources/GalleryImages":59,"../Resources/GalleryTexts":60,"./Alert/AttachAlert":42,"./Alert/WarningOpenOnPC":43,"./Game/GalleryGame":45,"./Navigator/GalleryNavigator":46,"./Progress/ProgressCover":47}],45:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Engine/Application/AppObject/App"),a=t("../../../Engine/Game/GameBox/GameBox"),s=t("../../Collection/GalleryCollection"),c=t("../../../Engine/Utilities/Utilities"),u=function(n){function t(t){var e=n.call(this)||this;return e.collection=new s.GalleryCollection,e.collection=t,e.joint(new h),e.joint(new l),e}return i(t,n),t.prototype.load=function(){var t=this;$("#gallery-navigator-restart").click(function(){t.box.stop(),t.start()}),$("#gallery-navigator-fullscreen").click(function(){c.Utilities.requestFullScreen(!0,$("#gallery-game-container")[0])})},t.prototype.start=function(){var t=$("#gallery-game-canvas")[0],e=$("#gallery-game-container")[0];t.width===e.clientWidth&&t.height===e.clientHeight||(t.width=e.clientWidth,t.height=e.clientHeight),this.box=this.createGameBox(e,t),this.box.start()},t.prototype.createGameBox=function(t,e){var n=c.Utilities.getSearchKeyValuePair(),r=this.collection.getSymbolByName(n.scene);if(r)return document.title=r.Title||"<Blank>",new a.GameBox(t,e,new r(e.width,e.height));window.location.assign("../")},t}(o.App);n.GalleryGame=u;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.load=function(t){var e=this;window.addEventListener("resize",function(){e.restart(t)})},e.prototype.restart=function(t){var e=$("#gallery-game-canvas")[0],n=$("#gallery-game-container")[0];e.width===n.clientWidth&&e.height===n.clientHeight||(t.box.stop(),t.start())},e}(o.App),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(t){var e=$("#gallery-navigator-frame");t.box.frameManager.onRateChanged=function(t){e.text(t)}},e}(o.App)},{"../../../Engine/Application/AppObject/App":6,"../../../Engine/Game/GameBox/GameBox":17,"../../../Engine/Utilities/Utilities":41,"../../Collection/GalleryCollection":48}],46:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Engine/Application/AppObject/App"),a=t("../../Resources/GalleryTexts"),s=function(n){function t(t){var e=n.call(this)||this;return e.joint(new c),e.joint(new u),e.joint(new l(t)),e}return i(t,n),t}(o.App);n.GalleryNavigator=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){$("#gallery-navigator-tiltle-header").text(a.GalleryTexts.Title.Header),$("#gallery-navigator-title-description").text(a.GalleryTexts.Title.Description)},e}(o.App),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){$("#gallery-navigator-restart").attr("title",a.GalleryTexts.Tooltips.Restart),$("#gallery-navigator-fullscreen").attr("title",a.GalleryTexts.Tooltips.Fullscreen),$(function(){$("[data-toggle='tooltip']").tooltip()})},e}(o.App),l=function(n){function t(t){var e=n.call(this)||this;return e.symbols=t,e}return i(t,n),t.prototype.start=function(){var t=$("#gallery-navigator-dropdown");for(var e in t.empty(),this.symbols)t.append($('<a class="dropdown-item" href="./gallery.html?scene='+e+'">'+this.symbols[e].Title+"</a>"))},t}(o.App)},{"../../../Engine/Application/AppObject/App":6,"../../Resources/GalleryTexts":60}],47:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){setTimeout(function(){var t=$("#gallery-game-layer-progress");t.removeClass("show"),setTimeout(function(){t.remove()},150)},850)},e}(t("../../../Engine/Application/AppObject/App").App);n.ProgressCover=o},{"../../../Engine/Application/AppObject/App":6}],48:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Visuals/ParticlesFlyerWorld"),i=t("../Visuals/ParticlesWalkerWorld"),o=t("../Visuals/ParticlesTreeWorld"),a=t("../Visuals/LSystemTreeWorld"),s=t("../Visuals/GameOfLifeWorld"),c=t("../Visuals/AudioVisualizerWorld"),u=t("../Games/EndlessAbyssWorld"),l=t("../Games/AutoPaintWorld"),h=function(){function t(){this.symbols={},this.addSymbol("flyer",r.ParticlesFlyerWorld),this.addSymbol("walker",i.ParticlesWalkerWorld),this.addSymbol("tree",o.ParticlesTreeWorld),this.addSymbol("lsystemtree",a.LSystemTreeWorld),this.addSymbol("gameoflife",s.GameOfLifeWorld),this.addSymbol("audiovisualizer",c.AudioVisualizerWorld),this.addSymbol("endlessabyss",u.EndlessAbyssWorld),this.addSymbol("autopaint",l.AutoPaintWorld)}return t.prototype.addSymbol=function(t,e){this.symbols[t]=e},t.prototype.getSymbolByName=function(t){return this.symbols[t]},t}();n.GalleryCollection=h},{"../Games/AutoPaintWorld":52,"../Games/EndlessAbyssWorld":58,"../Visuals/AudioVisualizerWorld":62,"../Visuals/GameOfLifeWorld":66,"../Visuals/LSystemTreeWorld":72,"../Visuals/ParticlesFlyerWorld":83,"../Visuals/ParticlesTreeWorld":84,"../Visuals/ParticlesWalkerWorld":85}],49:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.convertImageData=function(t){for(var e=t.width,n=t.height,r=0;r<e;r++)for(;0<n;r++)t.data[0],t.data[0],t.data[0]},t}();n.SimpleAutoPaintAI=r;var i=function(){function t(){}return t.getImageData=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var r=document.createElement("canvas");r.width=e||t.width,r.height=n||t.height;var i=r.getContext("2d");return i.drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height),i.getImageData(0,0,r.width,r.height)},t.getThresholdImageData=function(t,e){void 0===e&&(e=128);for(var n=t.width,r=t.height,i=new ImageData(n,r),o=0;o<n;o++)for(var a=0;a<r;a++){var s=4*(a*n+o);e<(t.data[s+0]+t.data[s+1]+t.data[s+2])/3?(i.data[s+0]=255,i.data[s+1]=255,i.data[s+2]=255):(i.data[s+0]=0,i.data[s+1]=0,i.data[s+2]=0),i.data[s+3]=255}return i},t}();n.ImageDataHelper=i},{}],50:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Engine/Game/GameObject/GameVisual"),a=t("../../../Engine/Game/GameObject/GameView"),s=t("./Model/Drawing"),c=t("./AI/SimpleAutoPaintAI"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.single=0,t.changed=!1,t}return i(t,e),t.prototype.start=function(){var t=this;this.drawing=new s.Drawing;var e=new Image;e.src="../static/girl.png",e.onload=function(){t.rawImageData=c.ImageDataHelper.getImageData(e),t.imageData=c.ImageDataHelper.getThresholdImageData(t.rawImageData),t.changed=!0}},t.prototype.update=function(){if(this.imageData){this.single+=.01;var t=64*Math.sin(this.single)+128;this.imageData=c.ImageDataHelper.getThresholdImageData(this.rawImageData,t),this.changed=!0}},t}(o.GameVisual);n.AutoPaint=u;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(t,e){if(t.changed){var n=t.world.size.center,r=n.x-t.imageData.width/2,i=n.y-t.imageData.height/2;t.imageData&&e.putImageData(t.imageData,r,i),t.changed=!1}},e}(a.TypedGameView);n.AutoPaintView=l},{"../../../Engine/Game/GameObject/GameView":20,"../../../Engine/Game/GameObject/GameVisual":21,"./AI/SimpleAutoPaintAI":49,"./Model/Drawing":51}],51:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){this.lines=[]};n.Drawing=r},{}],52:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../Engine/Game/GameWorld/GameWorld"),a=t("../Resources/GalleryTexts"),s=t("../../Engine/Inputs/KeyInput"),c=t("../../Engine/Inputs/PointerInput"),u=t("./AutoPaint/AutoPaint"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e,"Title",{get:function(){return a.GalleryTexts.AutoPaintWorld.Title},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.inputs.addInput(new s.KeyInput),this.inputs.addInput(new c.PointerInput),this.addChild((new u.AutoPaint).joint(new u.AutoPaintView))},e}(o.GameWorld);n.AutoPaintWorld=l},{"../../Engine/Game/GameWorld/GameWorld":22,"../../Engine/Inputs/KeyInput":27,"../../Engine/Inputs/PointerInput":28,"../Resources/GalleryTexts":60,"./AutoPaint/AutoPaint":50}],53:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Engine/Game/GameObject/GameVisual"),a=t("../../../Engine/Numerics/Vector2"),s=t("../../../Engine/UI/Color"),c=t("../../../Engine/Utilities/EventHelper"),u=t("../../../Engine/Game/GameObject/GameView"),l=t("./Models/BlockGrid"),h=t("../../../Engine/Game/GameComponents/Effect/Effect"),f=t("../../../Engine/Common/DelayTimer"),p=t("../../../Engine/Drawing/Graphics"),d=t("../../../Engine/Drawing/OffscreenCanvas"),y=t("../../Resources/GalleryTexts"),g=t("../../../Engine/Numerics/Random"),v=function(e){function t(){var t=e.call(this)||this;return t.timer=new f.DelayTimer,t.ghost=new h.GhostEffect(new s.Color(0,0,0,.005),30,!1),t.joint(t.ghost),t}return i(t,e),t.prototype.start=function(){this.initProperties(),this.grid=new l.BlockGrid(this.settings.width,this.settings.height),this.registEvents()},t.prototype.update=function(){var e=this;if(this.status.playing||this.status.mocking){var n=this.status.mocking?200:this.settings.delayTime;this.timer.delay(n,function(){e.grid.down(),e.status.progress=0},function(t){e.status.progress=t/n})}this.settings.rotation+=.002},t.prototype.initProperties=function(){var t=this.world.width,e=this.world.height;this.status={playing:!1,gameover:!1,mocking:!0,score:0,progress:0},this.settings={width:(new g.Random).range(10,30),height:20,rotation:0,center:new a.Vector2(t/2,e/2),delayTime:500,pointer:{position:new a.Vector2,rotation:0,count:0}}},t.prototype.registEvents=function(){this.registKeyPressedEvent(),this.registPointerEvents(),this.registBlockGridEvents()},t.prototype.registKeyPressedEvent=function(){var e=this;this.on("KeyPress",function(t){e.status.playing?"a"===t.key?e.grid.left():"d"===t.key?e.grid.right():"w"===t.key?e.grid.up():"s"===t.key&&e.grid.down():13===t.keyCode&&(e.status.playing=!0,e.status.gameover&&(e.status.gameover=!1),e.status.mocking&&(e.status.mocking=!1),e.grid.reset())})},t.prototype.registPointerEvents=function(){var o=this;this.on("PointerPressed",function(t){var e=o.settings.pointer;e.position=c.EventHelper.getEventClientPositon(t),e.rotation=o.settings.rotation,e.count=0}),this.on("PointerMoved",function(t){if(o.world.inputs.pointer.isPressed){var e=o.settings.pointer,n=c.EventHelper.getEventClientPositon(t).subtract(e.position),r=e.position.subtract(o.settings.center).rotate(Math.PI/2).normalize(),i=n.dot(r)/100;o.settings.rotation=e.rotation+i,e.count+=1,8<e.count&&(e.position=c.EventHelper.getEventClientPositon(t),e.rotation=o.settings.rotation,e.count=0)}})},t.prototype.registBlockGridEvents=function(){var e=this;this.grid.onOver=function(){e.status.mocking?(e.status.playing=!1,e.status.mocking=!0,e.status.gameover=!1,e.grid.reset()):(e.status.playing=!1,e.status.mocking=!1,e.status.gameover=!0),e.status.score=0},this.grid.onFullRow=function(t){e.status.score+=10*Math.pow(2,t-1)}},t}(o.GameVisual);n.EndlessAbyss=v;var m=function(t,e,n,r){this.stroke=t,this.fill=e,this.ignoreStroke=n,this.ignoreFill=r},w=function(e){function t(){var t=e.call(this)||this;return t.colorModes=[],t.single=0,t.initProperties(),t.joint(new _),t.joint(new b),t}return i(t,e),t.prototype.render=function(t){this.target=t,this.single=(this.single+.01)%(2*Math.PI),this.settings.radius=100+75*Math.sin(this.single)},t.prototype.drawAll=function(t,e,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1);var i=this.settings.radius,o=this.target.grid.width,a=this.target.grid.height,s=(.8*Math.min(e.width,e.height)-2*i)/a/2,c=this.settings.border,u=s+c,l=1-this.target.status.progress,h=(this.target.grid.allBlocks,this.target.grid.preBlocks),f=this.target.grid,p=this.target.grid.current.getBlocks(),d=this.target.grid.next.getBlocks(),y={center:e.center,radius:i,blockHeight:u,blockBorder:c,yOffset:0,split:o};n?(this.drawBlocks(t,f,y,this.colorModes[1]),this.drawBlocks(t,h,y,this.colorModes[2]),y.yOffset=4,this.drawBlocks(t,d,y,this.colorModes[3])):(!r&&this.drawBlocks(t,f,y,this.colorModes[4]),y.yOffset=l,this.drawBlocks(t,p,y,this.colorModes[5])),y.yOffset=0},t.prototype.drawBlocks=function(u,t,l,h){var f=this,p=Math.PI/l.split,d=l.blockHeight-l.blockBorder;t.forEach(function(t){if(t){var e=t.location.x,n=t.location.y+l.yOffset,r=e*p*2,i=r-p+f.target.settings.rotation,o=r+p+f.target.settings.rotation,a=h.ignoreStroke?t.color:h.stroke,s=h.ignoreFill?t.color:h.fill,c={center:l.center,radius:l.radius+n*l.blockHeight,height:d,start:i,end:o,stroke:a,fill:s};f.drawSingleBlock(u,c)}})},t.prototype.drawSingleBlock=function(t,e){t.beginPath(),t.arc(e.center.x,e.center.y,e.radius,e.start,e.end,!1),t.arc(e.center.x,e.center.y,e.radius+e.height,e.end,e.start,!0),t.closePath(),e.stroke&&(t.strokeStyle=e.stroke.rgba,t.stroke()),e.fill&&(t.fillStyle=e.fill.rgba,t.fill())},t.prototype.initProperties=function(){this.fill={white:new s.Color(255,255,255,.05),blank:new s.Color(255,255,255,.05),mask:new s.Color(0,0,0,.6)},this.stroke={white:new s.Color(255,255,255,.05),black:new s.Color(0,0,0,.2)};var t=this.stroke.white,e=this.fill.white;this.colorModes.push(new m(t,null,!1,!1),new m(t,e,!1,!0),new m(null,this.fill.blank,!1,!1),new m(null,null,!0,!0),new m(this.stroke.black,null,!1,!1),new m(t,null,!1,!0)),this.settings={radius:50,border:0}},t}(u.GameView);n.EndlessAbyssView=w;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(e,t){var n=this;this.layer||(this.layer=new d.OffscreenCanvas(t.canvas.width,t.canvas.height));var r=e.target.world.size;this.layer.draw(function(t){n.drawDynamic(e,t,r)}).output(t,0,0)},e.prototype.drawDynamic=function(t,e,n){t.target.ghost.effect(e),p.Graphics.scaleOffset(e,8,8*e.canvas.height/e.canvas.width,1),p.Graphics.rotate(e,Math.PI/160,1,function(){e.drawImage(e.canvas,0,0,e.canvas.width,e.canvas.height)}),t.drawAll(e,n)},e}(u.GameView),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mask=new s.Color(0,0,0,.6),t.single=0,t}return i(t,e),t.prototype.render=function(t,e){var n=t.target.world.size;this.drawStatic(t,e,n)},t.prototype.drawStatic=function(t,e,n){var r=this;t.target.status.playing&&(t.drawAll(e,n,!1,!1),this.drawScore(e,n,t.target.status.score)),t.target.status.mocking&&t.drawAll(e,n,!1,!0),t.target.status.playing||(this.drawMask(e,n),p.Graphics.shadow(e,3,"rgba(0,0,0,0.38)",3,3,function(){t.target.status.gameover?r.drawTitle(e,n,y.GalleryTexts.EndlessAbyssWorld.GameOver):r.drawTitle(e,n,y.GalleryTexts.EndlessAbyssWorld.GameName)}),this.drawNotify(e,n))},t.prototype.drawMask=function(t,e){t.fillStyle=this.mask.rgba,t.fillRect(0,0,e.width,e.height)},t.prototype.drawTitle=function(t,e,n){var r=Math.max(e.width/20,48);t.font=r+"px Arial",t.textAlign="center",t.fillStyle="#FFF",t.fillText(n,e.center.x,e.center.y)},t.prototype.drawNotify=function(t,e){var n=Math.max(e.width/64,16);t.font=n+"px Arial",t.textAlign="center",this.single+=.06,t.fillStyle=new s.Color(255,255,255,.6+.3*Math.sin(this.single)).rgba,t.fillText(y.GalleryTexts.EndlessAbyssWorld.Tip,e.center.x,e.center.y+1.6*n)},t.prototype.drawScore=function(t,e,n){var r=Math.max(e.width/48,24);t.font=r+"px Arial",t.textAlign="right",t.fillStyle=new s.Color(255,255,255,.9).rgba,t.fillText(y.GalleryTexts.EndlessAbyssWorld.Score+n,.9*e.width,.15*e.height)},t}(u.GameView)},{"../../../Engine/Common/DelayTimer":9,"../../../Engine/Drawing/Graphics":14,"../../../Engine/Drawing/OffscreenCanvas":15,"../../../Engine/Game/GameComponents/Effect/Effect":18,"../../../Engine/Game/GameObject/GameView":20,"../../../Engine/Game/GameObject/GameVisual":21,"../../../Engine/Numerics/Random":30,"../../../Engine/Numerics/Vector2":32,"../../../Engine/UI/Color":38,"../../../Engine/Utilities/EventHelper":40,"../../Resources/GalleryTexts":60,"./Models/BlockGrid":55}],54:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../../Engine/Numerics/Vector2"),i=t("../../../../../Engine/UI/Color"),o=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.location=new r.Vector2(t,e),this.color=i.Colors.White}return t.prototype.setLocation=function(t){return this.location=t,this},t.prototype.setColor=function(t){return this.color=t,this},t}();n.Block=o},{"../../../../../Engine/Numerics/Vector2":32,"../../../../../Engine/UI/Color":38}],55:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../Engine/Collections/Array2"),s=t("../../../../Engine/Numerics/Vector2"),a=t("../../../../Engine/UI/Color"),c=t("./BlockGroup"),u=t("./Block/Block"),l=function(r){function t(t,e){void 0===t&&(t=1),void 0===e&&(e=1);var n=r.call(this,t,e)||this;n.current=null,n.next=null,n.upOffset=new s.Vector2(0,0),n.downOffset=new s.Vector2(0,-1),n.leftOffset=new s.Vector2(-1,0),n.rightOffset=new s.Vector2(1,0),n.indexOffset=1;return n.colors=["#8F1D78","#BA874C","#E9AE6A"].map(function(t){return a.Color.fromHex(t)}),n.blockGroups=c.BlockGroupHelper.getStandardGroups(),n._generateNext(),n._generateCurrent(),n.onOver=null,n.onFullRow=null,n}return i(t,r),Object.defineProperty(t.prototype,"allBlocks",{get:function(){return this._allBlocks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preBlocks",{get:function(){return this._preBlocks},enumerable:!0,configurable:!0}),t.prototype.up=function(){this._checkMoveAvailable(this.current,this.upOffset,this.indexOffset)&&this.current.move(this.upOffset).rotate(this.indexOffset)},t.prototype.down=function(){this._checkMoveAvailable(this.current,this.downOffset)?this.current.move(this.downOffset):this.current.location.y===this.height-1?this.over():(this._combineBlock(this.current),this._generateCurrent())},t.prototype.left=function(){this._checkMoveAvailable(this.current,this.leftOffset)&&this.current.move(this.leftOffset)},t.prototype.right=function(){this._checkMoveAvailable(this.current,this.rightOffset)&&this.current.move(this.rightOffset)},t.prototype.reset=function(){var r=this;this.forEach(function(t,e,n){r.set(e,n,null)})},t.prototype.over=function(){this.onOver&&this.onOver()},t.prototype.setCurrent=function(t){this.current=t},t.prototype._generateCurrent=function(){this.current=this.next,this._generateNext(),this._generateInformation()},t.prototype._generateNext=function(){var t=Math.floor(Math.random()*this.blockGroups.length),e=new s.Vector2(Math.floor(this.width*Math.random()),this.height-1),n=Math.floor(this.colors.length*Math.random()),r=this.colors[n];this.next=this.blockGroups[t].clone().setLocation(e).setColor(r).rotate()},t.prototype._generateInformation=function(){var r=this;this._allBlocks=[],this._preBlocks=[];var i=this._findMaxRow();this.forEach(function(t,e,n){r._allBlocks.push(t||new u.Block(e,n)),!t&&n<=i&&r._preBlocks.push(new u.Block(e,n))})},t.prototype._checkMoveAvailable=function(t,e,n,r){void 0===e&&(e=s.Vector2.Zero),void 0===n&&(n=0),void 0===r&&(r=!0);for(var i=this.current.getLocations(n),o=0;o<i.length;o++){var a=i[o].add(e);if(r&&(a.x=a.x%this.width,a.x<0&&(a.x+=this.width)),a.y<0||this.get(a.x,a.y))return!1}return!0},t.prototype._combineBlock=function(t,e){var n=this;void 0===e&&(e=!0),t.getBlocks().forEach(function(t){t&&(e&&(t.location.x=t.location.x%n.width,t.location.x<0&&(t.location.x+=n.width)),n.set(t.location.x,t.location.y,t))}),this._combineFullRow()},t.prototype._combineFullRow=function(){for(var t=0,e=this._findMaxRow();0<=e;e--)this._checkFullRow(e)&&(this._clearSingleRow(e),t+=1);0<t&&(this.onFullRow&&this.onFullRow(t),this._updateBlockLocation())},t.prototype._findMaxRow=function(){for(var t=-1,e=0;e<this.height;e++)for(var n=0;n<this.width;n++)if(this.get(n,e)){t=e;break}return t},t.prototype._clearSingleRow=function(t){for(var e=0;e<this.width;e++)this.data[e].splice(t,1),this.data[e].push(null)},t.prototype._checkFullRow=function(t){for(var e=0;e<this.width;e++)if(!this.get(e,t))return!1;return!0},t.prototype._updateBlockLocation=function(){this.forEach(function(t,e,n){t&&t.setLocation(new s.Vector2(e,n))})},t}(o.Array2);n.BlockGrid=l},{"../../../../Engine/Collections/Array2":8,"../../../../Engine/Numerics/Vector2":32,"../../../../Engine/UI/Color":38,"./Block/Block":54,"./BlockGroup":56}],56:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./OffsetMap/OffsetMap"),i=t("./Block/Block"),o=t("../../../../Engine/Numerics/Vector2"),a=t("../../../../Engine/UI/Color"),s=function(){function e(){this.location=new o.Vector2(0,0),this.color=a.Colors.White,this.offsetMaps=[],this.currentIndex=0}return e.prototype.clone=function(){var t=new e;return t.location=this.location.clone(),t.color=this.color,t.offsetMaps=this.offsetMaps,t.currentIndex=this.currentIndex,t},e.prototype.setLocation=function(t){return this.location=t,this},e.prototype.setColor=function(t){return this.color=t,this},e.prototype.addOffsetMap=function(t){return this.offsetMaps.push(t),this},e.prototype.addOffsetMapRange=function(t){var e=this;return t.forEach(function(t){e.offsetMaps.push(t)}),this},e.prototype.getLocations=function(t){void 0===t&&(t=0);var e=(this.currentIndex+t)%this.offsetMaps.length;return this.offsetMaps[e].getLocations(this.location)},e.prototype.getBlocks=function(t){var e=this;void 0===t&&(t=0);var n=[];return this.getLocations(t).forEach(function(t){n.push((new i.Block).setLocation(t).setColor(e.color.clone()))}),n},e.prototype.move=function(t){return this.location=this.location.add(t),this},e.prototype.rotate=function(){return this.currentIndex=(this.currentIndex+1)%this.offsetMaps.length,this},e}();n.BlockGroup=s;var c=function(){function t(){}return t.getStandardGroups=function(){return t.maps.map(function(t){return(new s).addOffsetMapRange(t.map(function(n){return new r.OffsetMap(n.x.map(function(t,e){return new o.Vector2(n.x[e],n.y[e])}))}))})},t.maps=[[{x:[0,0,0,0],y:[0,-1,-2,-3]},{x:[0,1,2,3],y:[0,0,0,0]}],[{x:[1,1,1,0],y:[0,-1,-2,-2]},{x:[0,0,1,2],y:[,-1,-1,-1]},{x:[0,1,0,0],y:[0,0,-1,-2]},{x:[0,1,2,2],y:[0,0,0,-1]}],[{x:[0,0,0,1],y:[0,-1,-2,-2]},{x:[0,1,2,0],y:[0,0,0,-1]},{x:[0,1,1,1],y:[0,0,-1,-2]},{x:[2,0,1,2],y:[0,-1,-1,-1]}],[{x:[0,1,0,1],y:[0,0,-1,-1]}],[{x:[1,2,0,1],y:[0,0,-1,-1]},{x:[0,0,1,1],y:[0,-1,-1,-2]}],[{x:[0,1,1,2],y:[0,0,-1,-1]},{x:[1,1,0,0],y:[0,-1,-1,-2]}],[{x:[0,1,2,1],y:[0,0,0,-1]},{x:[1,0,1,1],y:[0,-1,-1,-2]},{x:[1,0,1,2],y:[0,-1,-1,-1]},{x:[0,0,1,0],y:[0,-1,-1,-2]}]],t}();n.BlockGroupHelper=c},{"../../../../Engine/Numerics/Vector2":32,"../../../../Engine/UI/Color":38,"./Block/Block":54,"./OffsetMap/OffsetMap":57}],57:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t){this.offsets=t}return t.prototype.setOffsets=function(t){return this.offsets=t,this},t.prototype.getLocations=function(e){var n=[];return this.offsets.forEach(function(t){n.push(e.add(t))}),n},t}();n.OffsetMap=r},{}],58:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../Engine/Game/GameWorld/GameWorld"),a=t("./EndlessAbyss/EndlessAbyss"),s=t("../Visuals/VisualPointer/VisualPointer"),c=t("../Resources/GalleryTexts"),u=t("../../Engine/Inputs/KeyInput"),l=t("../../Engine/Inputs/PointerInput"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e,"Title",{get:function(){return c.GalleryTexts.EndlessAbyssWorld.Title},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.inputs.addInput(new u.KeyInput),this.inputs.addInput(new l.PointerInput),this.addChild((new a.EndlessAbyss).joint(new a.EndlessAbyssView)),this.joint(new s.VisualPointer)},e}(o.GameWorld);n.EndlessAbyssWorld=h},{"../../Engine/Game/GameWorld/GameWorld":22,"../../Engine/Inputs/KeyInput":27,"../../Engine/Inputs/PointerInput":28,"../Resources/GalleryTexts":60,"../Visuals/VisualPointer/VisualPointer":86,"./EndlessAbyss/EndlessAbyss":53}],59:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Engine/Resources/ConfigurationManager");n.GalleryImages={Bird:"",Galaxy:"",Cloud:"",Plane:""},n.ImageResourceConfigUrl="https://general-gallery-1253318267.cos.ap-beijing.myqcloud.com/config/gallery-config-image.json",n.GalleryImageResourceManager=new r.ConfigurationManager(n.ImageResourceConfigUrl).attach(n.GalleryImages)},{"../../Engine/Resources/ConfigurationManager":34}],60:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,a,s,c){return new(s||(s=Promise))(function(n,e){function r(t){try{o(c.next(t))}catch(t){e(t)}}function i(t){try{o(c.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((c=c.apply(t,a||[])).next())})},i=this&&this.__generator||function(n,r){var i,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../Engine/Resources/CultureResourceManager"),a=t("../../Engine/Resources/ConfigurationManager");n.GalleryTexts={Gallery:"",AudioVisualizerWorld_Title:"",GameOfLifeWorld_Title:"",LSystemTreeWorld_Title:"",ParticlesFlyerWorld_Title:"",ParticlesTreeWorld_Title:"",PartilesWalkerWorld_Title:"",EndlessAbyssWorld:{Title:"",GameName:"",GameOver:"",Tip:"",Score:""},AutoPaintWorld:{Title:"Game - AutoPaint",GameName:"",GameOver:"",Tip:"",Score:""},Warnings:{OpenOnPC:{Title:"",Content:""}},Tooltips:{Restart:"",Fullscreen:""},Title:{Header:"",Description:""}},n.TextResourceConfigUrl="https://general-gallery-1253318267.cos.ap-beijing.myqcloud.com/config/gallery-config-i18n.json",n.GalleryTextResourceManager=new o.CultureResourceManager;var s=function(){function t(){}return t.load=function(){return r(this,void 0,void 0,function(){var e;return i(this,function(t){return e=new o.CultureResourceConfig,[2,new a.ConfigurationManager(n.TextResourceConfigUrl).attach(e).load().then(function(){return n.GalleryTextResourceManager.init(e).attach(n.GalleryTexts),n.GalleryTextResourceManager.load()})]})})},t}();n.GalleryTextLoader=s},{"../../Engine/Resources/ConfigurationManager":34,"../../Engine/Resources/CultureResourceManager":35}],61:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Engine/Game/GameObject/GameVisual"),a=t("../../../Engine/Common/DelayTimer"),s=t("../../../Engine/IO/FileIO"),c=t("../../../Engine/Game/GameComponents/Effect/Effect"),u=t("../../../Engine/Application/MessageBox"),l=t("../../../Engine/Game/GameObject/GameView"),h=t("../../../Engine/Drawing/Graphics"),f=t("../../../Engine/Drawing/OffscreenCanvas"),p=t("../../Resources/GalleryImages"),d=t("../../../Engine/UI/Color"),y=function(e){function t(){var t=e.call(this)||this;return t.timer=new a.DelayTimer,t.effects={ghost:new c.GhostImageEffect(p.GalleryImages.Galaxy,.1,!1)},t.joint(t.effects.ghost),t}return i(t,e),Object.defineProperty(t.prototype,"fftData",{get:function(){return this.audioAnalyzer.getByteFrequencyData(this.frequncyBytes),this.frequncyBytes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeDomainData",{get:function(){return this.audioAnalyzer.getByteTimeDomainData(this.timeDomainBytes),this.timeDomainBytes},enumerable:!0,configurable:!0}),t.prototype.start=function(){var e=this;this.initAudio(),this.on("Drop",function(t){e.loadFile(t.dataTransfer.files[0])}),this.on("PointerClicked",function(){s.FileIO.openFileDialog(function(t){e.loadFile(t.target.files[0])},"audio/*")})},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.audioContext.close(),this.audio&&this.audio.remove()},t.prototype.initAudio=function(){this.audioContext=new AudioContext,this.audio=document.createElement("audio"),this.audio.loop=!0,document.body.appendChild(this.audio),this.audioSource=this.audioContext.createMediaElementSource(this.audio),this.audioAnalyzer=this.audioContext.createAnalyser(),this.fftSize=1200<this.world.width?2048:1024,this.audioAnalyzer.fftSize=this.fftSize,this.frequncyBytes=new Uint8Array(this.audioAnalyzer.frequencyBinCount),this.timeDomainSize=2*this.audioAnalyzer.frequencyBinCount,this.timeDomainBytes=new Uint8Array(this.timeDomainSize),this.audioSource.connect(this.audioAnalyzer),this.audioAnalyzer.connect(this.audioContext.destination),this.fileInfo={name:"",playing:!1}},t.prototype.loadFile=function(t){t&&0===t.type.indexOf("audio")?(this.audio.src=URL.createObjectURL(t),this.audio.autoplay=!0,this.audio.play(),this.fileInfo.playing=!0,this.fileInfo.name=t.name.split(".")[0]):u.MessageBox.show("Please select a valid audio file.")},t}(o.GameVisual);n.AudioVisualizer=y;var g=function(e){function t(){var t=e.call(this)||this;return t.rotation=0,t.rotation2=0,t.rotation3=0,t}return i(t,e),t.prototype.render=function(e,t){var n=this;this.innerCanvas||(this.innerCanvas=new f.OffscreenCanvas(t.canvas.width,t.canvas.height)),this.innerCanvas.draw(function(t){n.drawDynamic(e,t)}).output(t,0,0),this.drawStatic(e,t)},t.prototype.drawDynamic=function(t,e){var n=this,r=t.world.width,i=t.world.height,o=r/2,a=i/2,s=t.fftData,c=s.reduce(function(t,e){return t+e},0)/s.length/255,u=c*Math.min(r,i)/10;if(this.rotation2=c,t.effects.ghost.effect(e),t.fileInfo.playing)this.rotation+=.001,h.Graphics.scaleOffset(e,u,u,.9),h.Graphics.rotate(e,this.rotation+c,1,function(){n.drawFFT(t,e,r,i,o,a,1+10*c)}),h.Graphics.rotate(e,Math.PI*(c/2),1,function(){e.drawImage(e.canvas,0,0,r,i)}),h.Graphics.mirror(e,-(1+c/2),-(1+c/2),.6,function(){e.drawImage(e.canvas,0,0)});else{this.rotation3+=.04;var l=2*Math.sin(this.rotation3)-1;h.Graphics.scaleOffset(e,l,l,.96),this.drawText(t,e,r,i,o,a,1),h.Graphics.mirror(e,1,-1,.2,function(){e.drawImage(e.canvas,0,0)})}},t.prototype.drawText=function(t,e,n,r,i,o,a){void 0===a&&(a=1);var s=Math.max(n/30,32);e.font=s+"px Arial",e.textAlign="center",e.fillStyle=new d.Color(255,255,255,1).rgba,e.fillText("Drag an audio file here.",i,o-s/2.5),e.fillRect(0,o-2,n,4)},t.prototype.drawFFT=function(t,e,n,r,i,o,a){void 0===a&&(a=1);var s=t.fftData,c=Math.min(n,r)/2,u=Math.min(n,r)/10;e.beginPath();for(var l=0;l<s.length;l++){var h=s[l],f=l/s.length*c*a+c,p=o+h+Math.sin(f/(100+Math.sin(this.rotation2)*u/2))*u;e.lineTo(f,p)}e.lineWidth=n/s.length*a,e.strokeStyle="#FFF",e.stroke()},t.prototype.drawTimeDomain=function(t,e,n,r,i,o,a){void 0===a&&(a=1);var s=t.timeDomainData,c=.001*n,u=n-2*c;e.beginPath();for(var l=0;l<s.length;l++){var h=s[l],f=l/s.length*u+c,p=o+h-128;e.lineTo(f,p)}e.lineWidth=n/s.length*a,e.strokeStyle="#FFFFFF",e.stroke()},t.prototype.drawStatic=function(t,e){var n=t.world.width,r=t.world.height;this.drawFileinfo(t,e,n,r)},t.prototype.drawFileinfo=function(t,e,n,r){var i=t.fileInfo;if(i.playing){var o=Math.max(n/48,16),a=.1*n,s=.8*r;e.font=o+"px Arial",e.textAlign="left",e.fillStyle="#FFF",e.fillText(i.name,a,s);var c=.8*n,u=c*(t.audio.currentTime/t.audio.duration);e.strokeStyle="#FFF",e.strokeRect(a+u,s+o,c-u,o/3),e.fillRect(a,s+o,u,o/3)}},t}(l.GameView);n.AudioVisualizerView=g},{"../../../Engine/Application/MessageBox":7,"../../../Engine/Common/DelayTimer":9,"../../../Engine/Drawing/Graphics":14,"../../../Engine/Drawing/OffscreenCanvas":15,"../../../Engine/Game/GameComponents/Effect/Effect":18,"../../../Engine/Game/GameObject/GameView":20,"../../../Engine/Game/GameObject/GameVisual":21,"../../../Engine/IO/FileIO":24,"../../../Engine/UI/Color":38,"../../Resources/GalleryImages":59}],62:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../Engine/Game/GameWorld/GameWorld"),a=t("../../Engine/Inputs/PointerInput"),s=t("./AudioVisualizer/AudioVisualizer"),c=t("../Resources/GalleryTexts"),u=t("../../Engine/Inputs/DragDropInput"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e,"Title",{get:function(){return c.GalleryTexts.AudioVisualizerWorld_Title},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.inputs.addInput(new a.PointerInput),this.inputs.addInput(new u.DragDropInput),this.addChild((new s.AudioVisualizer).joint(new s.AudioVisualizerView))},e}(o.GameWorld);n.AudioVisualizerWorld=l},{"../../Engine/Game/GameWorld/GameWorld":22,"../../Engine/Inputs/DragDropInput":25,"../../Engine/Inputs/PointerInput":28,"../Resources/GalleryTexts":60,"./AudioVisualizer/AudioVisualizer":61}],63:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){void 0===e&&(e=0),this.color=t,this.scale=e}return t.prototype.setColor=function(t){return this.color=t,this},t}();n.Cell=r},{}],64:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var h=t("../../../Engine/UI/Color"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.generate=function(){return new e(this.width,this.height)},e.prototype.around=function(t,e,n,r){for(var i=0,o=0;o<8;o++){var a=t+n[o],s=e+r[o];this.data[a]&&this.data[a][s]&&(i+=1)}return i},e.prototype.aroundColor=function(t,e,n,r){for(var i=0,o=0,a=0,s=0,c=0;c<8;c++){var u=t+n[c],l=e+r[c];this.data[u]&&this.data[u][l]&&(i+=this.data[u][l].color.r,o+=this.data[u][l].color.g,a+=this.data[u][l].color.b,s+=1)}return new h.Color(i/s,o/s,a/s)},e.prototype.grow=function(e){void 0===e&&(e=.001),this.forEach(function(t){t&&t.scale<1&&(t.scale+=e)})},e}(t("../../../Engine/Collections/Array2").Array2);n.CellularAutomata=o},{"../../../Engine/Collections/Array2":8,"../../../Engine/UI/Color":38}],65:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../Engine/Game/GameObject/GameVisual"),a=t("../../../../Engine/Game/GameComponents/Effect/Effect"),l=t("../../../../Engine/UI/Color"),s=t("../CellularAutomata"),h=t("../../../../Engine/Numerics/Vector2"),c=t("../Cell"),u=t("../../../../Engine/Game/GameObject/GameView"),f=t("../../../../Engine/Drawing/Graphics"),p=t("../../../../Engine/Common/DelayTimer"),d=function(e){function t(){var t=e.call(this)||this;return t.ghost=new a.GhostEffect(new l.Color(0,0,0,.05),15),t.joint(t.ghost),t.timers={generate:new p.DelayTimer,exchange:new p.DelayTimer,grow:new p.DelayTimer},t.settings={xOffsets:[-1,0,1,1,1,0,-1,-1],yOffsets:[-1,-1,-1,0,1,1,1,0],progress:0,sin:Math.PI,size:0,initialSize:16,rangeSize:16,rotation:0},t}return i(t,e),Object.defineProperty(t.prototype,"offset",{get:function(){if(this.settings&&this.automata){var t=this.settings.size,e=this.settings.initialSize,n=-(t-e)*this.automata.width/2,r=-(t-e)*this.automata.height/2;return new h.Vector2(n,r)}return null},enumerable:!0,configurable:!0}),t.prototype.start=function(){var r=this,t=this.world.width,e=this.world.height;this.settings.rangeSize=Math.min(t,e)/16,this.settings.initialSize=Math.min(t,e)/60;var n=Math.round(t/this.settings.initialSize),i=Math.round(e/this.settings.initialSize);this.automata=new s.CellularAutomata(n,i),this.automata.forEach(function(t,e,n){.9<Math.random()&&(r.automata.data[e][n]=new c.Cell(null,0))}),this._bindEvents()},t.prototype.update=function(){var e=this;this.timers.exchange.delay(1e3,function(){e.settings.progress=0,e._exchange(e.automata)},function(t){e.settings.progress=t/1e3}),this.timers.generate.delay(10,function(){e._generate()}),this.timers.grow.delay(10,function(){e.automata.grow(.01)}),this.settings.rotation+=.005,this.settings.sin+=.006,this.settings.size=this.settings.initialSize+Math.sin(this.settings.sin)*this.settings.rangeSize+this.settings.rangeSize},t.prototype._bindEvents=function(){var t=this;this.on("PointerMoved",function(){t._delete()}),this.on("PointerPressed",function(){t._delete()})},t.prototype._delete=function(){for(var t=new h.Vector2(this.world.width/2,this.world.height/2),e=this.world.inputs.pointer.position,n=t.add(e.subtract(t).rotate(-this.settings.rotation)).subtract(this.offset),r=Math.round(n.x/this.settings.size),i=Math.round(n.y/this.settings.size),o=0;o<4;o++){var a=r+Math.round(2*Math.random()-1),s=i+Math.round(2*Math.random()-1);this.automata.data[a][s]=null}},t.prototype._generate=function(){var i=this,o=this.automata.generate();this.automata.forEach(function(t,e,n){var r=i.automata.around(e,n,i.settings.xOffsets,i.settings.yOffsets);t?2!==r&&3!==r&&4!==r||(o.data[e][n]=i.automata.data[e][n]):3===r&&(o.data[e][n]=new c.Cell(null,0))}),this.automata=o},t.prototype._exchange=function(t){var e=t.data.splice(0,1);t.data.push(e[0])},t}(o.GameVisual);n.GameOfLife=d;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(t,a){var s=t.offset,c=t.settings.size,u=1-t.settings.progress;f.Graphics.scaleOffset(a,4,4,1),f.Graphics.rotate(a,t.settings.rotation,1,function(){t.automata.forEach(function(t,e,n){if(t){var r=new h.Vector2(e+u,n).multiply(c).add(s),i=c*t.scale,o=i/2;a.fillStyle=new l.Color(255,255,255,Math.pow(t.scale,5)).rgba,a.fillRect(r.x-o,r.y-o,i,i)}})})},e}(u.TypedGameView);n.GameOfLifeView=y},{"../../../../Engine/Common/DelayTimer":9,"../../../../Engine/Drawing/Graphics":14,"../../../../Engine/Game/GameComponents/Effect/Effect":18,"../../../../Engine/Game/GameObject/GameView":20,"../../../../Engine/Game/GameObject/GameVisual":21,"../../../../Engine/Numerics/Vector2":32,"../../../../Engine/UI/Color":38,"../Cell":63,"../CellularAutomata":64}],66:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../Engine/Game/GameWorld/GameWorld"),a=t("../../Engine/Inputs/PointerInput"),s=t("./CA/GameOfLife/GameOfLife"),c=t("../Resources/GalleryTexts"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e,"Title",{get:function(){return c.GalleryTexts.GameOfLifeWorld_Title},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.inputs.addInput(new a.PointerInput),this.addChild((new s.GameOfLife).joint(new s.GameOfLifeView))},e}(o.GameWorld);n.GameOfLifeWorld=u},{"../../Engine/Game/GameWorld/GameWorld":22,"../../Engine/Inputs/PointerInput":28,"../Resources/GalleryTexts":60,"./CA/GameOfLife/GameOfLife":65}],67:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Rule/RuleSet"),i=t("./State/State"),o=function(){function t(){this.states=[],this.states=[],this.ruleSets={}}return t.prototype.initRoot=function(t){this.root=t,this.states=[],this.states.push(t)},t.prototype.addRule=function(t){this.ruleSets[t.target]||(this.ruleSets[t.target]=new r.RuleSet),this.ruleSets[t.target].add(t)},t.prototype.generate=function(t){var r=this;void 0===t&&(t=1);for(var e=function(e){var n=[];i.states.forEach(function(t){r.ruleSets[t.value]?t.children=r.ruleSets[t.value].generate(t,e):t.children=r.getDefaultState(t),r.combineArray(n,t.children)}),i.states=[],i.combineArray(i.states,n)},i=this,n=0;n<t;n++)e(n)},t.prototype.getDefaultState=function(t){var e=[];return e.push(new i.State(t.value,t,t.generation+1)),e},t.prototype.combineArray=function(e,t){t.forEach(function(t){e.push(t)})},t}();n.LSystem=o},{"./Rule/RuleSet":70,"./State/State":71}],68:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Engine/Game/GameObject/GameVisual"),a=t("./State/State"),s=t("./LSystem"),c=t("./Rule/Rule"),u=t("../../../Engine/Game/GameObject/GameView"),l=t("../../../Engine/UI/Color"),h=t("../../../Engine/Numerics/Vector2"),f=t("../../../Engine/Numerics/Random"),p=function(e){function t(){var t=e.call(this)||this;return t.offset=h.Vector2.Zero,t.lineLengthRatio=1,t.depth=4,t.changed=!1,t.letters=["F","U","D","L","R","[","]",".","*","+","-","(",")"],t.letters1=["F","U","D","L","R","[","]",".","*","+","-","(",")"],t.letters2=["F","D","U","R","L","]","[","*",".","-","+",")","("],t.random=new f.Random,t.lSystem=new s.LSystem,t.lSystem.initRoot(new a.State("F",null,0)),t.buildRect(),t.lSystem.generate(t.depth),t.bindMouseEvents(),t}return i(t,e),Object.defineProperty(t,"defaultView",{get:function(){return new d},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"states",{get:function(){return this.lSystem.states},enumerable:!0,configurable:!0}),t.prototype.bindMouseEvents=function(){var e,n,r=this,i=!1;this.on("PointerPressed",function(){i=!0,e=r.world.inputs.pointer.position,n=r.offset.clone()}),this.on("PointerMoved",function(){if(i){var t=r.world.inputs.pointer.position;r.offset=n.add(t.subtract(e)),r.changed=!0}}),this.on("PointerReleased",function(){i=!1}),this.on("MouseWheel",function(t){var e=Math.pow(1.2,Math.sign(t.deltaY));r.lineLengthRatio*=e,r.offset=r.offset.multiply(e),r.changed=!0})},t.prototype.buildDefault=function(){var t=["FF+[+F-F-F]-[-F+F+F]","F[+F-F+F+FF]F[-F+F-F-FF]F","FF[-F-FF--F][+F+FF-F]FF","F[.--F++F-.F][.++F--F+.F][.-F++F][.+F--F].F","F-F-F+F++F+F-F-F","F--F+F+F+F+F--F","F[-F-FF--F][+F+FF-F]F","F[-FF--F][+FF-F]FF","F[-F-FF][+F+FF]F","F-F[-FFF-F][+FFF-F]F+F","F+[-FF-F][+FF-F]F-F","F-[-FF-F][+FF-F]+F"],e=Math.floor(Math.random()*t.length);this.lSystem.addRule(new c.GrammarRule("F",t[e]))},t.prototype.buildRect=function(){for(var t=0;t<this.letters.length;t++){var e=this.generate(15,t);this.lSystem.addRule(new c.GrammarRule(this.letters[t],e))}},t.prototype.buildTwoDemention=function(){for(var t="ABCDEFGHJKLMNOPQRSTUVWXYZ",e=0;e<9;e++){var n=t[e];this.lSystem.states.push(new a.TwoDementionState(n,null,1,new h.Vector2(e%3,Math.floor(e/3))))}for(e=0;e<t.length;e++){n=t[e];this.lSystem.addRule(new c.TwoDementionRule(n,this.generateABCD(t,9)))}},t.prototype.generate=function(t,e){void 0===t&&(t=50),void 0===e&&(e=0);for(var n=this.random.normal(1,t),r="",i="",o=0;o<n;o++){var a=Math.floor(Math.random()*this.letters.length);r+=this.letters1[a],i+=this.letters2[a]}return r+this.letters[e]+i},t.prototype.generateABCD=function(t,e){for(var n="",r=Math.floor(Math.random()*t.length),i=0;i<e;i++)n+=t[(r+i)%t.length];return n},t}(o.GameVisual);n.LSystemTree=p;var d=function(e){function t(){var t=e.call(this)||this;return t.centerStack=[],t.offsetStack=[],t.lengthStack=[],t.rotateStack=[],t.currentIndex=0,t.lineColor=new l.Color(255,255,255,1),t.singleNumber=0,t.rotateRatio=6,t.animation=!0,t}return i(t,e),t.prototype.render=function(t,e){(this.animation||t.changed)&&(this.singleNumber=(this.singleNumber+.01*Math.random())%(2*Math.PI),this.rotateRatio=6.2+2.4*Math.sin(this.singleNumber),this.centerStack=[],this.offsetStack=[],this.lengthStack=[],this.rotateStack=[],this.currentIndex=0,e.clearRect(0,0,t.world.width,t.world.height)),this.lineWidthRatio=Math.max(1,t.lineLengthRatio/10),(this.animation||!this.center||t.changed)&&(this.center=new h.Vector2(t.world.width/2,t.world.height/2).add(t.offset),this.lengthOfLine=t.world.height*(1/Math.pow(2,t.depth+1))*t.lineLengthRatio,this.offset=new h.Vector2(0,-this.lengthOfLine),t.changed=!1);for(var n=0,r=this.animation?1e4:1e3,i=t.states,o=this.currentIndex;o<i.length&&(this.mapped(e,i[o]),this.currentIndex=o+1,!(r<(n+=1)));o++);},t.prototype.mapped=function(t,e){switch(e.value){case"F":this.drawLineBranch(t,this.center,this.offset,this.lineWidthRatio,this.lineColor),this.center=this.center.add(this.offset);break;case"U":this.offset=new h.Vector2(0,-this.lengthOfLine).rotate(2.4/this.rotateRatio),this.drawLineBranch(t,this.center,this.offset,this.lineWidthRatio,this.lineColor),this.center=this.center.add(this.offset);break;case"D":this.offset=new h.Vector2(0,this.lengthOfLine).rotate(2.4/this.rotateRatio),this.drawLineBranch(t,this.center,this.offset,this.lineWidthRatio,this.lineColor),this.center=this.center.add(this.offset);break;case"L":this.offset=new h.Vector2(-this.lengthOfLine,0).rotate(2.4/this.rotateRatio),this.drawLineBranch(t,this.center,this.offset,this.lineWidthRatio,this.lineColor),this.center=this.center.add(this.offset);break;case"R":this.offset=new h.Vector2(this.lengthOfLine,0).rotate(2.4/this.rotateRatio),this.drawLineBranch(t,this.center,this.offset,this.lineWidthRatio,this.lineColor),this.center=this.center.add(this.offset);break;case"+":this.offset=this.offset.rotate(2.4/this.rotateRatio);break;case"-":this.offset=this.offset.rotate(-2.4/this.rotateRatio);break;case".":this.lengthOfLine*=.8,this.offset.setLength(this.lengthOfLine);break;case"*":this.lengthOfLine/=.8,this.offset.setLength(this.lengthOfLine);break;case"(":this.rotateRatio*=.6;break;case")":this.rotateRatio/=.6;break;case"[":this.centerStack.push(this.center.clone()),this.offsetStack.push(this.offset.clone()),this.lengthStack.push(this.lengthOfLine),this.rotateStack.push(this.rotateRatio);break;case"]":this.center=this.centerStack.pop()||this.center,this.offset=this.offsetStack.pop()||this.offset,this.lengthOfLine=this.lengthStack.pop()||this.lengthOfLine,this.rotateRatio=this.rotateStack.pop()||this.rotateRatio}},t.prototype.drawLineBranch=function(t,e,n,r,i){void 0===r&&(r=1);var o=e.add(n);t.strokeStyle=i.rgb,t.lineWidth=r,t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(o.x,o.y),t.closePath(),t.stroke()},t.prototype.drawCircleBranch=function(t,e,n){var r=e.add(n.multiply(.5));t.beginPath(),t.arc(r.x,r.y,n.length/2,0,2*Math.PI,!1),t.closePath(),t.fillStyle=this.lineColor.rgba,t.fill()},t}(u.GameView),y=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.mapped=function(t,e){var n=2*(r.letters.indexOf(e.value)+1+10);this.drawRect(t,e,"#"+n+n+n)},r.prototype.drawRect=function(t,e,n){var r=e.location,i=this.lengthOfLine,o=r.multiply(i).add(this.center);t.fillStyle=n,t.fillRect(o.x,o.y,i,i)},r.letters="ABCDEFGHJKLMNOPQRSTUVWXYZ",r}(n.LSystemTreeView=d);n.TwoDementionView=y},{"../../../Engine/Game/GameObject/GameView":20,"../../../Engine/Game/GameObject/GameVisual":21,"../../../Engine/Numerics/Random":30,"../../../Engine/Numerics/Vector2":32,"../../../Engine/UI/Color":38,"./LSystem":67,"./Rule/Rule":69,"./State/State":71}],69:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("../State/State"),s=t("../../../../Engine/Numerics/Vector2"),r=function(){function t(t,e){void 0===e&&(e=""),this.target=t,this.states=e.split("")}return t.prototype.generate=function(e){var n=[];return this.states.forEach(function(t){n.push(new a.State(t,e,e.generation+1))}),n},t}();n.GrammarRule=r;var i=function(){function t(t,e){void 0===e&&(e=""),this.rank=3,this.target=t,this.states=e.split("")}return t.prototype.generate=function(r){var i=this,o=[];return r.location=r.location.multiply(this.rank),this.states.forEach(function(t,e){var n=r.location.add(new s.Vector2(e%i.rank,Math.floor(e/i.rank)));o.push(new a.TwoDementionState(t,r,r.generation+1,n))}),o},t}();n.TwoDementionRule=i},{"../../../../Engine/Numerics/Vector2":32,"../State/State":71}],70:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){this.rules=[]}return t.prototype.add=function(t){this.rules.push(t)},t.prototype.generate=function(t,e){void 0===e&&(e=0);var n=this.rules[e]||this.rules[0];return n?n.generate(t):[t.next()]},t}();n.RuleSet=r},{}],71:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../../Engine/Numerics/Vector2"),o=function(){function t(t,e,n){this.value=t,this.parent=e,this.children=[],this.generation=n}return t.prototype.next=function(){return new t(this.value,this.parent,this.generation+1)},t}(),s=function(o){function t(t,e,n,r){void 0===r&&(r=a.Vector2.Zero);var i=o.call(this,t,e,n)||this;return i.location=r,i}return i(t,o),t}(n.State=o);n.TwoDementionState=s},{"../../../../Engine/Numerics/Vector2":32}],72:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../Engine/Game/GameWorld/GameWorld"),a=t("./LSystem/LSystemTree"),s=t("../Resources/GalleryTexts"),c=t("../../Engine/Inputs/PointerInput"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e,"Title",{get:function(){return s.GalleryTexts.LSystemTreeWorld_Title},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.inputs.addInput(new c.PointerInput),this.addChild((new a.LSystemTree).joint(a.LSystemTree.defaultView))},e}(o.GameWorld);n.LSystemTreeWorld=u},{"../../Engine/Game/GameWorld/GameWorld":22,"../../Engine/Inputs/PointerInput":28,"../Resources/GalleryTexts":60,"./LSystem/LSystemTree":68}],73:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.offsetX=[0,-1,0,1,1,1,0,-1,-1],r.offsetY=[0,-1,-1,-1,0,1,1,1,0],r.forEach(function(t,e,n){r.data[e][n]=[]}),r}return i(t,n),t.prototype.clear=function(){this.forEach(function(t){t.splice(0,t.length)})},t.prototype.neighbours=function(t,e){for(var n=[],r=0;r<9;r++){var i=t+this.offsetX[r],o=e+this.offsetY[r];0<=i&&i<this.width&&0<=o&&o<this.height&&n.push.apply(n,this.data[i][o])}return n},t}(t("../../../../Engine/Collections/Array2").Array2);n.ArrayGrid=o},{"../../../../Engine/Collections/Array2":8}],74:[function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Particle/DynamicParticle"),s=t("../../../../Engine/Numerics/Vector2"),a=t("../../../../Engine/UI/Font"),c=t("../../../../Engine/Common/Speeder"),u=function(i){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=0);var r=i.call(this,t,e,n)||this;return r.history=[],r.count=0,r.velocityUpon=50,r.neighbourDistance=400,r.emoji=a.RandomEmoji.one,r.speeder=new c.Speeder(1),r}return o(t,i),Object.defineProperty(t.prototype,"trail",{get:function(){return this.location.add(new s.Vector2(0,this.size/2).rotate(Math.atan2(this.velocity.y,this.velocity.x)+Math.PI/2))},enumerable:!0,configurable:!0}),t.prototype.update=function(t,e){this.alignspeed(t,3),this.seperate(t,2),this.cohesion(t,3),e&&this.follow(e,3),this.move()},t.prototype.alignspeed=function(t,e){var r=this;void 0===e&&(e=1);var i=new s.Vector2,o=0;if(this.forEachDistance(t,function(t,e,n){n<r.neighbourDistance&&(i=i.add(t.velocity),o++)}),0<o){(i=i.divide(o)).limitLength(this.velocityUpon);var n=i.subtract(this.velocity);n.limitLength(5),this.applyForce(n.multiply(e))}},t.prototype.seperate=function(t,e){var i=this;void 0===e&&(e=1);var o=new s.Vector2,a=0;if(this.forEachDistance(t,function(t,e,n){var r=(i.size+t.size)/2+5;0<n&&n<r&&(e.normalize(),e.divide(n),o=o.add(e),a++)}),0<a){(o=o.divide(a)).normalize(),o.multiply(this.velocityUpon);var n=o.subtract(this.velocity);n.limitLength(5),this.applyForce(n.multiply(e))}},t.prototype.cohesion=function(t,e){void 0===e&&(e=1);var r=new s.Vector2,i=0;if(this.forEachDistance(t,function(t,e,n){r=r.add(t.location),i++}),0<i){r=r.divide(i);var n=this.seekDefault(r);n.limitLength(.01),this.applyForce(n.multiply(e))}},t.prototype.follow=function(t,e){void 0===e&&(e=1),this.applyForce(this.seekDefault(t).multiply(e))},t.prototype.seekDefault=function(t){return this.seek(this.location,t,this.velocity)},t.prototype.seek=function(t,e,n){var r=e.subtract(t);r.normalize(),r.multiply(this.velocityUpon);var i=r.subtract(n);return i.limitLength(1),i},t.prototype.forEachDistance=function(t,r){var i=this;t.forEach(function(t){var e=i.location.subtract(t.location),n=e.length;r&&r(t,e,n)})},t}(i.DynamicParticle);n.FlyerParticle=u},{"../../../../Engine/Common/Speeder":13,"../../../../Engine/Numerics/Vector2":32,"../../../../Engine/UI/Font":39,"../Particle/DynamicParticle":77}],75:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(n,"__esModule",{value:!0});var o=t("../ParticleSystem"),a=t("../../../../Engine/Numerics/Random"),s=t("../../../../Engine/Game/GameComponents/Effect/Effect"),d=t("../../../../Engine/UI/Color"),y=t("../../../../Engine/Numerics/Vector2"),u=t("./ArrayGrid"),l=t("../../../../Engine/Drawing/Graphics"),h=t("../../../../Engine/Game/GameObject/GameView"),g=t("./FlyerParticle"),f=t("../../../../Engine/Drawing/OffscreenCanvas"),p=t("../../../Resources/GalleryImages"),v=t("../Particle"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clouds=[],t.revolution=200,t.cameraSpeed=.99,t.scaleDelta=0,t.scale=2,t.random=new a.Random,t}return i(t,e),t.prototype.start=function(){var t,e,n=this.world.width,r=this.world.height,i=new y.Vector2(.5*n,.5*r),o=this.random.normal(1,3);this.flyerFieldWidth=.8*n,this.flyerFieldHeight=.8*r;var a=new y.Vector2(n,r).length,s=Math.max(10,Math.floor(a/10)),c=Math.min(60,Math.floor(a/6));this.cameraSpeed=Math.max(.1,Math.min(1,.5+1e3/a)),console.log(this.cameraSpeed);var u=this.createFlyers(o,10,i,s,c,this.flyerFieldWidth,this.flyerFieldHeight);(t=this.particles).push.apply(t,u);var l=this.random.normal(40,80);this.cloudFieldWidth=8*this.flyerFieldWidth,this.cloudFieldHeight=8*this.flyerFieldHeight;var h=this.createClouds(l,i,this.cloudFieldWidth,this.cloudFieldHeight);(e=this.clouds).push.apply(e,h),this.grid=this.createGrid(n,r,this.revolution),this.offset=new y.Vector2(0,0),0===this.world.inputs.pointer.position.length&&(this.world.inputs.pointer.position=new y.Vector2(n/2,r/2))},t.prototype.createFlyers=function(t,e,n,r,i,o,a){for(var s=[],c=0;c<t;c++){var u=new g.FlyerParticle,l=o*(Math.random()-.5),h=a*(Math.random()-.5),f=e*(2*Math.random()-1),p=e*(2*Math.random()-1);u.location=n.add(new y.Vector2(l,h)),u.velocity=new y.Vector2(f,p),u.size=this.random.normal(r,i),u.color=d.Colors.White,s.push(u)}return s},t.prototype.createClouds=function(t,e,n,r){for(var i=[],o=0;o<t;o++){var a=new v.Particle,s=n*(Math.random()-.5),c=r*(Math.random()-.5);a.location=e.add(new y.Vector2(s,c)),a.rotation=Math.random()*Math.PI*2,a.size=this.random.normal(.1,2),a.alpha=0,a.age=.5<Math.random()?0:1,i.push(a)}return i},t.prototype.update=function(){var e=this,t=this.world.center;this.averageLocation=o.ParticleSystem.calcAverageLocation(this.particles);var n=this.averageLocation.multiply(this.scale).subtract(t);this.offset=this.offset.add(n.subtract(this.offset).multiply(this.cameraSpeed));var r=null;if(this.world.inputs.pointer.isPressed){var i=this.offset.add(t).divide(this.scale);r=this.world.inputs.pointer.position.divide(this.scale).add(i.subtract(t.divide(this.scale)))}this.particles.forEach(function(t){t.update(e.particles,r)}),this.clouds.forEach(function(t){t.alpha<1&&(t.alpha+=.01,.99<=t.alpha&&(t.alpha=1)),t.rotation+=1e-4}),this.locateParticles(this.particles,this.cloudFieldWidth,this.cloudFieldHeight),this.locateParticles(this.clouds,this.cloudFieldWidth,this.cloudFieldHeight,function(t){t.alpha=0}),this.scaleDelta=(this.scaleDelta+.005)%(2*Math.PI),this.scale=1.5-1*Math.sin(this.scaleDelta)},t.prototype.locateParticles=function(t,r,i,o){var a=this,s=new y.Vector2(r,i).length;t.forEach(function(t){if(t.location.subtract(a.averageLocation).length>s){var e=r*(Math.random()-.5),n=i*(Math.random()-.5);t.location=a.averageLocation.add(new y.Vector2(e,n)),o&&o(t)}})},t.prototype.createGrid=function(t,e,n){void 0===n&&(n=10);var r=Math.ceil(t/n),i=Math.ceil(e/n);return new u.ArrayGrid(r,i)},t.prototype.allocateGrid=function(n,t,r,i){var o=this;t.forEach(function(t){var e=o.mapLocation(t.location.subtract(r),i);e.x=Math.min(n.width-1,Math.max(0,e.x)),e.y=Math.min(n.height-1,Math.max(0,e.y)),n.get(e.x,e.y).push(t)})},t.prototype.mapLocation=function(t,e){var n=Math.floor(t.x/e),r=Math.floor(t.y/e);return new y.Vector2(n,r)},t}(o.ParticleSystem);n.ParticlesFlyer=m;var w=function(e){function t(){var t=e.call(this)||this;return t.joint(new b),t.joint(new P(0)),t.joint(new O),t.joint(new P(1)),t.joint(new G),t}return i(t,e),t.prototype.render=function(t,e){this.target=t,e.fillStyle="#FFFFFF",e.fillRect(0,0,e.canvas.width,e.canvas.height)},t}(h.TypedGameView);n.ParticlesFlyerView=w;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(e,t){var n=this;this.layer||(this.layer=new f.OffscreenCanvas(t.canvas.width,t.canvas.height)),this.layer.draw(function(t){l.Graphics.clear(t).hold(t,function(){n.drawLayer(t,e)})}).output(t,0,0)},e}(h.GameView),b=function(e){function t(){var t=e.call(this)||this;return t.ghost=new s.GhostEffect(new d.Color(50,100,200),0,!1),t}return i(t,e),t.prototype.drawLayer=function(t,e){this.ghost.update(),this.ghost.effect(t)},t}(_),O=(function(e){function t(){var t=e.call(this)||this;return t.background=new Image,t.background.src=p.GalleryImages.Galaxy,t}i(t,e),t.prototype.drawLayer=function(t,e){t.drawImage(this.background,0,0)}}(_),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}i(e,t),e.prototype.drawLayer=function(t,e){var n=e.target.offset;t.translate(-n.x,-n.y),this.drawGrid(t,e.target.world.size,n,e.target.scale),t.translate(n.x,n.y)},e.prototype.drawGrid=function(t,e,n,r){void 0===r&&(r=1);var i=Math.max(e.width,e.height)/1*r,o=Math.ceil(e.width/i)+1,a=Math.ceil(e.height/i)+1,s=Math.ceil(n.x/i),c=Math.ceil(n.y/i),u=s*i,l=c*i;t.beginPath();for(var h=-1;h<o;h++)for(var f=h*i+u,p=-1;p<a;p++)if((h+p+s+c)%2==0){var d=p*i+l;t.rect(f,d,i,i)}t.closePath(),t.fillStyle="rgba(0,0,0,0.05)",t.fill()}}(_),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}i(e,t),e.prototype.drawLayer=function(e,n){var r=this;l.Graphics.clear(e);var t=n.target.offset;e.translate(-t.x,-t.y),n.target.particles.forEach(function(t){r.drawBirdTrail(e,t,n.target.scale)}),e.translate(t.x,t.y)},e.prototype.drawBirdTrail=function(o,a,s){l.Graphics.hold(o,function(){var t=c(a.history,[a.trail]),e=t.length;if(1<e)for(var n=1;n<e;n++){var r=t[n-1].multiply(s),i=t[n].multiply(s);o.beginPath(),o.moveTo(r.x,r.y),o.lineTo(i.x,i.y),o.closePath(),o.lineWidth=(1+a.size*s/10)*(n/e),o.strokeStyle=new d.Color(255,255,255,n/e*.8).rgba,o.stroke()}})}}(_),function(e){function t(){var t=e.call(this)||this;return t.bird=new Image(128,128),t.bird.src=p.GalleryImages.Plane,t}return i(t,e),t.prototype.render=function(n,t){var r=this;this.mainLayer||(this.mainLayer=new f.OffscreenCanvas(t.canvas.width,t.canvas.height),this.cache=new f.OffscreenCanvas(t.canvas.width,t.canvas.height));var i=n.target;this.mainLayer.draw(function(t){l.Graphics.clear(t).hold(t,function(e){e.drawImage(r.cache.canvas,0,0);var t=i.offset;e.translate(-t.x,-t.y),i.particles.forEach(function(t){r.drawBirdImage(e,t,i.scale,n)}),e.translate(t.x,t.y)})}).output(t,0,0)},t.prototype.drawBirdImage=function(t,e,n,r){var i=this,o=e.location.multiply(n),a=e.velocity,s=e.size*n,c=s/2;l.Graphics.hold(t,function(){t.translate(o.x,o.y),t.rotate(Math.atan2(a.y,a.x)+Math.PI/2),t.translate(-o.x,-o.y),t.drawImage(i.bird,o.x-c,o.y-c,s,s),t.globalCompositeOperation="destination-out",t.fillStyle="rgba(0,0,0,"+(.5-.2*r.target.scale)+")",t.fillRect(o.x-c,o.y-c,s,s),t.globalCompositeOperation="source-atop"})},t.prototype.drawText=function(t,e,n,r){t.font=Math.round(r)+"px Arial",t.textAlign="center",t.fillStyle="#FFF",t.fillText(e,n.x,n.y)},t}(h.GameView)),P=function(n){function t(t){var e=n.call(this)||this;return e.allowAge=0,e.allowAge=t,e.cloud=new Image,e.cloud.src=p.GalleryImages.Cloud,e}return i(t,n),t.prototype.drawLayer=function(e,n){var r=this,t=n.target.offset;e.translate(-t.x,-t.y),n.target.clouds.filter(function(t){return t.age===r.allowAge}).forEach(function(t){r.drawCloudImage(e,t,n.target.scale)}),e.translate(t.x,t.y)},t.prototype.drawCloudImage=function(t,e,n){var r=this,i=e.location.multiply(n);l.Graphics.hold(t,function(){t.globalAlpha=e.alpha,t.translate(i.x,i.y),t.rotate(e.rotation),t.translate(-i.x,-i.y),t.drawImage(r.cloud,i.x,i.y,r.cloud.width*n,r.cloud.height*n)})},t}(_),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.drawLayer=function(t,e){var n=e.target.offset;t.translate(-n.x,-n.y),this.drawInfo(t,e.target.world.size,e.target.scale),t.translate(n.x,n.y)},e.prototype.drawInfo=function(t,e,n){var r=Math.max(e.height/2*n);t.font=r+"px Arial",t.textAlign="center",t.textBaseline="middle",t.fillStyle="#FFF",t.fillText("JUST FLY",e.center.x*n,e.center.y*n)},e}(_)},{"../../../../Engine/Drawing/Graphics":14,"../../../../Engine/Drawing/OffscreenCanvas":15,"../../../../Engine/Game/GameComponents/Effect/Effect":18,"../../../../Engine/Game/GameObject/GameView":20,"../../../../Engine/Numerics/Random":30,"../../../../Engine/Numerics/Vector2":32,"../../../../Engine/UI/Color":38,"../../../Resources/GalleryImages":59,"../Particle":76,"../ParticleSystem":78,"./ArrayGrid":73,"./FlyerParticle":74}],76:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Engine/UI/Color"),i=t("../../../Engine/Numerics/Vector2"),o=function(t,e,n){void 0===t&&(t=i.Vector2.Zero),void 0===e&&(e=1),void 0===n&&(n=0),this.location=t,this.size=e,this.age=n,this.color=new r.Color(0,0,0,1),this.dead=!1};n.Particle=o},{"../../../Engine/Numerics/Vector2":32,"../../../Engine/UI/Color":38}],77:[function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Particle"),a=t("../../../../Engine/Numerics/Vector2"),s=function(i){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=0);var r=i.call(this,t,e,n)||this;return r.velocity=new a.Vector2(0,0),r.acceleration=new a.Vector2(0,0),r.mass=10,r.velocityUpon=Number.POSITIVE_INFINITY,r}return o(t,i),t.prototype.applyForce=function(t){this.acceleration=this.acceleration.add(t.divide(this.mass))},t.prototype.move=function(){this.velocity=this.velocity.add(this.acceleration),this.velocity.limitLength(this.velocityUpon),this.location=this.location.add(this.velocity),this.acceleration=new a.Vector2(0,0)},t.prototype.moveTo=function(t){this.location=t,this.velocity.setLength(0)},t}(i.Particle);n.DynamicParticle=s},{"../../../../Engine/Numerics/Vector2":32,"../Particle":76}],78:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Engine/Game/GameObject/GameVisual"),a=t("../../../Engine/Numerics/Vector2"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.particles=[],t}return i(t,e),t.calcAverageLocation=function(t){if(0<t.length){var e=new a.Vector2;return t.forEach(function(t){e=e.add(t.location)}),e.divide(t.length)}return new a.Vector2},t}(o.GameVisual);n.ParticleSystem=s},{"../../../Engine/Game/GameObject/GameVisual":21,"../../../Engine/Numerics/Vector2":32}],79:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../Engine/UI/Color"),a=t("../../../../Engine/Numerics/Vector2"),s=t("../../../../Engine/Numerics/Random"),c=t("../ParticleSystem"),u=t("./SpotParticle"),l=t("../../../../Engine/Game/GameObject/GameView"),h=t("../../../../Engine/Drawing/Graphics"),f=t("../../../../Engine/Drawing/OffscreenCanvas"),p=t("../../../../Engine/Game/GameComponents/Effect/Effect"),d=function(e){function t(){var t=e.call(this)||this;return t.generation=[],t.random=new s.Random,t.settings={update:!0,updateIndex:0,updateMax:1e3,drawIndex:0,drawMax:1e3},t.joint(new p.GhostEffect(new o.Color(0,128,128,.006),30)),t}return i(t,e),t.prototype.start=function(){var t=Math.min(this.world.width,this.world.height),e=t/2500*Math.log10(t),n=new a.Vector2(this.world.width/2,.5*this.world.height+.8*t),r=new u.SpotParticle(n);r.velocity=new a.Vector2(0,-16*e),r.size=256*e,r.age=20,r.color=new o.Color(0,0,0,1),this.particles.push(r)},t.prototype.update=function(){var t;if(this.settings.update){for(var e=0,n=this.settings.updateIndex;n<this.particles.length;n++){if(this.particles[n].update(this.generation,Math.ceil(this.random.normal(1,3))),e+=1,this.settings.updateIndex+=1,e>this.settings.updateMax)break}this.settings.updateIndex>=this.particles.length&&(this.settings.updateIndex=0,this.settings.update=!1,(t=this.particles).push.apply(t,this.generation),this.generation=[],this.particles=this.particles.filter(function(t){return!t.dead}))}},t}(c.ParticleSystem);n.ParticlesTree=d;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(e,t){var n=this;this.backLayer||(this.backLayer=new f.OffscreenCanvas(t.canvas.width,t.canvas.height)),h.Graphics.scaleOffset(t,12,12*t.canvas.height/t.canvas.width,1),this.backLayer.draw(function(t){n.drawByFillCircle(e,t)}).output(t,0,0)},e.prototype.drawByFillCircle=function(t,e){for(var n=2*Math.PI,r=0,i=t.settings.drawIndex;i<t.particles.length;i++){var o=t.particles[i],a=o.location;if(e.beginPath(),e.arc(a.x,a.y,o.size/2,0,n,!1),e.fillStyle=o.color.rgb,e.fill(),r+=1,t.settings.drawIndex+=1,r>t.settings.drawMax)return}t.settings.drawIndex=0,t.settings.update=!0},e}(l.GameView);n.ParticlesTreeView=y},{"../../../../Engine/Drawing/Graphics":14,"../../../../Engine/Drawing/OffscreenCanvas":15,"../../../../Engine/Game/GameComponents/Effect/Effect":18,"../../../../Engine/Game/GameObject/GameView":20,"../../../../Engine/Numerics/Random":30,"../../../../Engine/Numerics/Vector2":32,"../../../../Engine/UI/Color":38,"../ParticleSystem":78,"./SpotParticle":80}],80:[function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Particle/DynamicParticle"),s=t("../../../../Engine/Numerics/Random"),c=t("../../../../Engine/Numerics/Vector2"),u=t("../../../../Engine/UI/Color"),o=function(i){function o(t,e,n){void 0===e&&(e=1),void 0===n&&(n=0);var r=i.call(this,t,e,n)||this;return r.angleOffset=.024*Math.random()-.012,r.velocityUpon=16,r.random=new s.Random,r}return a(o,i),o.prototype.update=function(t,e){0<this.age&&(this.age-=1,this.size=this.size*l.sizeRadius,this.velocity=this.velocity.rotate(this.angleOffset*l.rotateRatio),this.velocity=this.velocity.rotate(this.random.normal(-100,100)*l.rotateRatioRandom),this.color=u.ColorHelper.gradient(this.color,l.gradientColorIncrement),this.velocityUpon=.32*this.size,this.move()),this.size>l.sizeMinimum?Math.random()<l.divideRatio&&this.divide(t,e):(this.velocity=new c.Vector2(-1,-1),this.dead=!0)},o.prototype.divide=function(t,e){e<2&&(e=2);var n=this.size*l.divideSizeRatio;if(this.size=n,this.age=this.random.normal(0,20),1<e)for(var r=2;r<=e;r++){n*=l.divideSizeRatioEx;var i=new o(this.location,n);i.velocity=this.velocity.rotate(this.random.normal(-100,100)*l.divideRotateRatio).multiply(l.divideLengthRatio),i.age=this.random.normal(0,40),i.color=u.ColorHelper.gradientRandom2(this.color,l.gradientColorIncrement*i.size/6),t.push(i)}},o}(i.DynamicParticle);n.SpotParticle=o;var l={sizeMinimum:1,sizeRadius:.995,rotateRatio:.01,rotateRatioRandom:.003,divideRatio:.03,divideSizeRatio:.8,divideSizeRatioEx:.92,divideColorIncrementRatio:1,divideRotateRatio:.012,divideLengthRatio:.7,gradientColorIncrement:1.1}},{"../../../../Engine/Numerics/Random":30,"../../../../Engine/Numerics/Vector2":32,"../../../../Engine/UI/Color":38,"../Particle/DynamicParticle":77}],81:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var c=t("../../../../Engine/UI/Color"),o=t("../../../../Engine/Numerics/Vector2"),a=t("../../../../Engine/Numerics/Random"),s=t("../ParticleSystem"),u=t("./WalkerParticle"),l=t("../../../../Engine/Numerics/Transform"),h=t("../../../../Engine/Game/GameComponents/Effect/Effect"),f=t("../../../../Engine/Game/GameObject/GameView"),p=t("../../../../Engine/Drawing/Graphics"),d=function(e){function t(){var t=e.call(this)||this;return t.random=new a.Random,t.joint(new h.GhostEffect(new c.Color(0,128,128,.006),40)),t.transform=new l.Transform,t}return i(t,e),t.prototype.start=function(){var t=this.world.width,e=this.world.height;this.split=1;var n=new o.Vector2(t/2,.8*e);this.center=n,u.WalkerParticle.StaticGravityRatio=5e3;var r=new u.WalkerParticle(n);r.origin=r.location.clone(),r.maxSize=10,r.color=new c.Color(255,255,255,.1),r.direction=new o.Vector2(0,-this.world.width/10),this.particles.push(r),this.maxDepth=6+Math.floor(t/600),this.createNodes(this.particles,r,this.maxDepth,this.split,1),this.rotationDelta=2*Math.PI/Math.floor(8*Math.random()+2)},t.prototype.update=function(){var n=this,r={width:this.world.width,height:this.world.height};this.transform.center=new o.Vector2(r.width/2,r.height/2),this.transform.rotation=this.transform.rotation+this.rotationDelta,this.transform.rotation>1e4*Math.PI&&(this.transform.rotation=0,this.rotationDelta=2*Math.PI/Math.floor(8*Math.random()+2)),this.particles.forEach(function(t,e){t.update(r,0===e?n.center:t.parent.location)}),.5<Math.random()&&(this.split+=1.6*Math.random()-.8,this.split=Math.max(1,Math.min(16,this.split))),this.modifyNodes(this.particles[0],this.split,1*this.split/10)},t.prototype.createNodes=function(t,e,n,r,i){if(void 0===r&&(r=1),void 0===i&&(i=1),0<n){var o=[-1,1,0];e.children=[];for(var a=0;a<2;a++){var s=new u.WalkerParticle;s.direction=e.direction.rotate(Math.PI/r*o[a]),s.location=e.location.add(s.direction.multiply(i)),s.origin=s.location.clone(),s.parent=e,s.maxSize=.8*e.maxSize,s.color=new c.Color(255,255,255,1/this.maxDepth-.05*n),e.children.push(s),this.particles.push(s),this.createNodes(t,s,n-1,r,i)}}},t.prototype.modifyNodes=function(t,e,n){if(void 0===n&&(n=1),t.children&&0<t.children.length)for(var r=[-1,1,0],i=0;i<2;i++){var o=t.children[i];o.direction=t.direction.rotate(Math.PI/e*r[i]),o.origin=t.origin.add(o.direction.multiply(n)),this.modifyNodes(o,e,n)}},t}(s.ParticleSystem);n.ParticlesWalker=d;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(r,i){p.Graphics.scaleOffset(i,2,2*i.canvas.height/i.canvas.width,1),p.Graphics.transform(i,r.transform.toMatrix3x2(),function(){for(var t=0;t<r.particles.length;t++){var e=r.particles[t],n=e.location;e.parent&&(i.beginPath(),i.moveTo(n.x,n.y),i.lineTo(e.parent.location.x,e.parent.location.y),i.lineWidth=e.size,i.strokeStyle=e.color.rgba,i.closePath(),i.stroke())}})},e}(f.GameView);n.ParticlesWalkerView=y},{"../../../../Engine/Drawing/Graphics":14,"../../../../Engine/Game/GameComponents/Effect/Effect":18,"../../../../Engine/Game/GameObject/GameView":20,"../../../../Engine/Numerics/Random":30,"../../../../Engine/Numerics/Transform":31,"../../../../Engine/Numerics/Vector2":32,"../../../../Engine/UI/Color":38,"../ParticleSystem":78,"./WalkerParticle":82}],82:[function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Particle/DynamicParticle"),a=t("../../../../Engine/Numerics/Random"),s=function(i){function s(t,e,n){void 0===e&&(e=1),void 0===n&&(n=0);var r=i.call(this,t,e,n)||this;return r.random=new a.Random,r.maxSize=1,r.maxAge=300,r}return o(s,i),s.prototype.update=function(t,e){this.age<this.maxAge&&(this.age+=1,this.size=this.maxSize*this.age/this.maxAge,this.mass=this.size*this.size*this.size,this.velocityUpon=this.size/2);var n=e.subtract(this.location),r=n.length;if(r<this.size/2)this.age=0,this.size=1,this.mass=1,this.location=this.origin.clone();else{var i=n.normalize(),o=s.StaticGravityRatio||0,a=i.multiply(this.mass/(r*r)*o);this.applyForce(a)}this.move()},s.StaticGravityRatio=0,s}(i.DynamicParticle);n.WalkerParticle=s},{"../../../../Engine/Numerics/Random":30,"../Particle/DynamicParticle":77}],83:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../Engine/Game/GameWorld/GameWorld"),a=t("../../Engine/Inputs/PointerInput"),s=t("./ParticleSystem/Flyer/ParticlesFlyer"),c=t("../Resources/GalleryTexts"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e,"Title",{get:function(){return c.GalleryTexts.ParticlesFlyerWorld_Title},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.inputs.addInput(new a.PointerInput),this.addChild((new s.ParticlesFlyer).joint(new s.ParticlesFlyerView))},e}(o.GameWorld);n.ParticlesFlyerWorld=u},{"../../Engine/Game/GameWorld/GameWorld":22,"../../Engine/Inputs/PointerInput":28,"../Resources/GalleryTexts":60,"./ParticleSystem/Flyer/ParticlesFlyer":75}],84:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../Engine/Game/GameWorld/GameWorld"),a=t("./ParticleSystem/Tree/ParticlesTree"),s=t("../Resources/GalleryTexts"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e,"Title",{get:function(){return s.GalleryTexts.ParticlesTreeWorld_Title},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.addChild((new a.ParticlesTree).joint(new a.ParticlesTreeView))},e}(o.GameWorld);n.ParticlesTreeWorld=c},{"../../Engine/Game/GameWorld/GameWorld":22,"../Resources/GalleryTexts":60,"./ParticleSystem/Tree/ParticlesTree":79}],85:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../Engine/Game/GameWorld/GameWorld"),a=t("./ParticleSystem/Walker/ParticlesWalker"),s=t("../Resources/GalleryTexts"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e,"Title",{get:function(){return s.GalleryTexts.PartilesWalkerWorld_Title},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.addChild((new a.ParticlesWalker).joint(new a.ParticlesWalkerView))},e}(o.GameWorld);n.ParticlesWalkerWorld=c},{"../../Engine/Game/GameWorld/GameWorld":22,"../Resources/GalleryTexts":60,"./ParticleSystem/Walker/ParticlesWalker":81}],86:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Engine/Game/GameObject/GameVisual"),a=t("../../../Engine/Game/GameObject/GameView"),s=t("../../../Engine/Drawing/Graphics"),c=function(e){function t(){var t=e.call(this)||this;return t.pointers=[],t.cache={},t.maxLength=30,t.joint(new u),t}return i(t,e),t.prototype.start=function(t){var e=this;this.cache.container=t.world.ui.container,this.cache.cursor=this.cache.container.style.cursor,this.cache.container.style.cursor="none",this.cache.handler=function(){e.pointers.push(t.world.inputs.pointer.position.clone()),e.pointers.length>e.maxLength&&e.pointers.shift()},t.on("PointerMoved",this.cache.handler)},t.prototype.update=function(){1<this.pointers.length&&this.pointers.shift()},t.prototype.dispose=function(t){e.prototype.dispose.call(this),this.cache.container.style.cursor=this.cache.cursor,t&&t.off("PointerMoved",this.cache.handler)},t}(o.GameVisual);n.VisualPointer=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(t,e){s.Graphics.hold(e,function(){0<t.pointers.length&&(e.beginPath(),t.pointers.forEach(function(t){e.lineTo(t.x,t.y)}),e.closePath(),e.lineWidth=10,e.lineCap="round",e.lineJoin="round",e.strokeStyle="#FFF",e.stroke())})},e}(a.GameView);n.VisualPointerView=u},{"../../../Engine/Drawing/Graphics":14,"../../../Engine/Game/GameObject/GameView":20,"../../../Engine/Game/GameObject/GameVisual":21}],87:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),(new(t("./Gallery/App/GalleryApp").GalleryApp)).processes.load.process()},{"./Gallery/App/GalleryApp":44}]},{},[87]);